#+TITLE: Configuration Emacs
#+AUTHOR: Kassim Berth√©
#+EMAIL: berthekassime@gmail.com
#+OPTIONS: toc:nil

* Introduction
Ceci est ma configuration personnelle d'Emacs, inspir√© par la configuration
de Derek Taylor, Harry et David Wilson and his System Crafters. 
* Information personnelle
#+BEGIN_SRC emacs-lisp
(setq user-full-name "Kassim Berth√©")
(setq user-mail-address "berthekassime@gmail.com")
#+END_SRC

#+RESULTS:
: berthekassime@gmail.com

* Chargement de Use-package
#+BEGIN_SRC emacs-lisp
(require 'use-package-ensure)
(setq use-package-always-ensure t)
#+END_SRC

#+RESULTS:
: t


#+BEGIN_SRC emacs-lisp
(use-package auto-compile
  :demand t
  :config (auto-compile-on-load-mode))

(setq load-prefer-newer t)
#+END_SRC

#+RESULTS:
: t

* Reponse courte et confirmation
#+BEGIN_SRC emacs-lisp
(defalias 'yes-or-no-p 'y-or-n-p)
(setq confirm-kill-emacs #'y-or-n-p)
#+END_SRC

#+RESULTS:
: y-or-n-p

*  Evil mode
** Undo-tree
*Fonctionnement*: Il permet d'avoir acc√®s aux diff√©rentes modifications
du fichier avec la commande /M-x undo-tree-visualize/ entrer.
u ie annuler la modification, r ie revenir sur la modif annul√©,
n ie aller au noeud suivant et p pour le pr√©c√©dent, q pour quitter
#+BEGIN_SRC emacs-lisp
(use-package undo-tree
  :demand t
  :init
  (global-undo-tree-mode))  ;; Active `undo-tree` globalement
#+END_SRC

#+RESULTS:

** Evil mode
#+BEGIN_SRC emacs-lisp
(use-package evil
  :demand t
  :after undo-tree  ;; S'assure que `undo-tree` est charg√© avant
  :init
  (setq evil-respect-visual-line-mode t   ;; Respecte le mode `visual-line-mode`
        evil-undo-system 'undo-tree      ;; Utilise `undo-tree` pour l'historique
        evil-want-abbrev-expand-on-insert-exit nil
        evil-want-keybinding nil)        ;; Pr√©pare pour des extensions comme `evil-collection`
  
  :config
  (evil-mode 1)  ;; Active `evil-mode`

  ;; Exemple de mappage global
  (evil-define-key '(normal insert) 'global (kbd "C-p") 'project-find-file)

  ;; Assurez-vous que les mappages pour `org-mode` fonctionnent seulement si `org` est charg√©
  (with-eval-after-load 'org
    (evil-define-key 'normal org-mode-map (kbd "TAB") 'org-cycle)
    (evil-define-key 'insert org-mode-map (kbd "S-<right>") 'org-shiftright)
    (evil-define-key 'insert org-mode-map (kbd "S-<left>") 'org-shiftleft))

  ;; Emp√™che `evil` de modifier la s√©lection visuelle
  (fset 'evil-visual-update-x-selection 'ignore))
#+END_SRC

#+RESULTS:
: t

#+BEGIN_SRC emacs-lisp
(use-package evil-collection
  :after evil
  :demand t

  :config
  (setq evil-collection-mode-list
        '(comint
          deadgrep
          dired
          ediff
          elfeed
          eww
          ibuffer
          info
          magit
          mu4e
          package-menu
;          pdf-view
          proced
          replace
          vterm
          which-key))

  (evil-collection-init))
#+END_SRC

#+RESULTS:
: t

** Switcher mode emacs et mode normal
f12 = altgr + f12
#+begin_src emacs-lisp
;; ---- Passage entre Evil normal et Emacs ----
(with-eval-after-load 'evil
  ;; en mode normal ‚Üí 'e' bascule en mode Emacs
  (define-key evil-normal-state-map (kbd "e") 'evil-emacs-state)

  ;; fonction pour repasser en normal
  (defun my/emacs-to-normal ()
    "Depuis le mode Emacs, repasse en Evil Normal state."
    (interactive)
    (when (evil-emacs-state-p)
      (evil-normal-state)))

  ;; Lier F12 uniquement en mode Emacs
  (general-define-key
   :states 'emacs
   :keymaps 'override
   "<f12>" #'my/emacs-to-normal))
#+end_src

#+RESULTS:

* Traitement de texte
** Indentation
#+BEGIN_SRC emacs-lisp
(add-hook 'org-mode-hook #'org-indent-mode)
#+END_SRC

#+RESULTS:
| org-indent-mode | rainbow-mode | #[0 \300\301\302\303\304$\207 [add-hook change-major-mode-hook org-fold-show-all append local] 5] | #[0 \300\301\302\303\304$\207 [add-hook change-major-mode-hook org-babel-show-result-all append local] 5] | org-babel-result-hide-spec | org-babel-hide-all-hashes |

#+BEGIN_SRC emacs-lisp
;; --------------------------------------------------------
;; D√©finir la largeur des tabulations et l'indentation
;; pour les modes de programmation
;; --------------------------------------------------------

;; Largeur globale des tabulations
(setq tab-width 4)

;; Fonction pour configurer les modes de programmation
(defun my/prog-mode-tab-settings ()
  "Configure indentation and tab width for programming modes."
  (setq tab-width 4)              ;; largeur d'une tabulation
  (setq evil-shift-width 4)       ;; d√©calage pour evil-mode
  (setq python-indent-offset 4))  ;; indentation Python

;; Ajouter le hook pour tous les modes de programmation
(add-hook 'prog-mode-hook #'my/prog-mode-tab-settings)
#+END_SRC

#+RESULTS:
| my/prog-mode-tab-settings | display-line-numbers-mode | hl-line-mode | rainbow-mode |

** Appel automatique du delimitateur fermant
#+BEGIN_SRC emacs-lisp
;(electric-pair-mode 1)
#+END_SRC

#+RESULTS:
: t

** Coloration des delimitateurs
#+BEGIN_SRC emacs-lisp
(use-package rainbow-delimiters
  :hook ((emacs-lisp-mode . rainbow-delimiters-mode)
         (clojure-mode . rainbow-delimiters-mode)))
#+END_SRC

#+RESULTS:
| rainbow-delimiters-mode |


#+BEGIN_SRC emacs-lisp
(use-package rainbow-mode
  :diminish
  :hook org-mode prog-mode)
#+END_SRC

#+RESULTS:
| rainbow-mode | display-line-numbers-mode | hl-line-mode |

** Mettre en surbrillance la ligne actuelle dans le buffer.

#+BEGIN_SRC emacs-lisp
(add-hook 'text-mode-hook #'hl-line-mode)
(add-hook 'prog-mode-hook #'hl-line-mode)
(add-hook 'org-agenda-finalize-hook #'hl-line-mode)
#+END_SRC

#+RESULTS:
| hl-line-mode |

** Activer la num√©rotation des lignes

#+BEGIN_SRC emacs-lisp
(add-hook 'text-mode-hook #'display-line-numbers-mode)
(add-hook 'prog-mode-hook #'display-line-numbers-mode)
#+END_SRC

#+RESULTS:
| display-line-numbers-mode | hl-line-mode | rainbow-mode |

** Desactiver la numerotation pour certain mode

#+BEGIN_SRC emacs-lisp
(add-hook 'elfeed-show-mode-hook (lambda () (display-line-numbers-mode -1)))
(add-hook 'eshell-mode-hook (lambda () (display-line-numbers-mode -1)))
(add-hook 'pdf-view-mode-hook (lambda () (display-line-numbers-mode -1)))
(add-hook 'shell-mode-hook (lambda () (display-line-numbers-mode -1)))
(add-hook 'eww-mode-hook (lambda () (display-line-numbers-mode -1)))
#+END_SRC

#+RESULTS:
| (lambda nil (display-line-numbers-mode -1)) | org-eww-extend-eww-keymap |

** Localiser le delimitateur correspondant

#+BEGIN_SRC emacs-lisp
(show-paren-mode 1)
#+END_SRC

#+RESULTS:
: t

** V√©rification syntaxique

#+BEGIN_SRC emacs-lisp
(use-package flycheck
  :diminish 'flycheck-mode
  :config (setq-default flycheck-emacs-lisp-load-path 'inherit)
  :init (global-flycheck-mode))
#+END_SRC

#+RESULTS:
: t

** Orthographe

#+BEGIN_SRC emacs-lisp
(setq-default ispell-program-name "aspell")
(setq ispell-list-command "--list")
#+END_SRC

#+RESULTS:
: --list

** Comparateur de fichier
*Fonctionnement*:Il ajoute de la coloration en fonction de la modification du fichier
suivi par git.
#+BEGIN_SRC emacs-lisp
(use-package diff-hl
  :config
  (global-diff-hl-mode t)
  :hook
  (magit-post-refresh-hook . diff-hl-magit-post-refresh))

(setq diff-hl-change-color "green")   ;; Couleur pour les modifications (maintenant vert)
(setq diff-hl-delete-color "red")     ;; Couleur pour les suppressions
(setq diff-hl-insert-color "magenta")    ;; Couleur pour les ajouts (maintenant magenta)
#+END_SRC

#+RESULTS:
: magenta

** Latex
*** Avec pdf-tools
#+BEGIN_SRC emacs-lisp
(use-package auctex
  :defer t
  :config
  (setq TeX-auto-save t)
  (setq TeX-parse-self t)
  (setq TeX-engine 'luatex)
  (setq-default TeX-master nil)) 
#+END_SRC

#+RESULTS:
: t

#+BEGIN_SRC emacs-lisp
(use-package company-auctex
  :after (auctex company)         ;; Charger apr√®s AUCTeX et company
  :ensure t                       ;; S‚Äôassurer que le paquet est install√©
  :config
  (company-auctex-init))         ;; Initialiser company-auctex pour compl√©ter les macros, environnements, etc.
#+END_SRC

#+RESULTS:
: t

#+BEGIN_SRC emacs-lisp
(use-package cdlatex
  :ensure t                                  ;; S'assurer que cdlatex est install√©
  :diminish org-cdlatex-mode                 ;; Ne pas afficher le mode mineur dans la barre de mode
  :hook ((LaTeX-mode . turn-on-cdlatex)      ;; Activer cdlatex en LaTeX-mode
         (org-mode . turn-on-org-cdlatex))   ;; Activer cdlatex en org-mode
  :config
  (setq cdlatex-use-dollar-to-ensure-math nil)) ;; Option : √©viter les conflits avec les dollars dans org
#+END_SRC

#+RESULTS:
| turn-on-org-cdlatex | (lambda nil (display-line-numbers-mode -1)) | org-tempo-setup | toc-org-enable | org-superstar-mode | #[0 \301\211\207 [imenu-create-index-function org-imenu-get-tree] 2] | rainbow-mode | org-indent-mode | #[0 \300\301\302\303\304$\207 [add-hook change-major-mode-hook org-fold-show-all append local] 5] | #[0 \300\301\302\303\304$\207 [add-hook change-major-mode-hook org-babel-show-result-all append local] 5] | org-babel-result-hide-spec | org-babel-hide-all-hashes |

#+BEGIN_SRC emacs-lisp
(use-package ox-latex
  :ensure nil                                        ;; ox-latex fait d√©j√† partie de Org-mode
  :after org
  :commands (org-export-dispatch)
  :ensure-system-package latexmk                    ;; V√©rifie que latexmk est install√©

  :custom
  ;; Utiliser minted pour les blocs de code (avec syntax highlighting)
  (org-latex-src-block-backend 'minted)

  ;; Commande de compilation avec latexmk, en xelatex, avec shell-escape (requis pour minted)
  (org-latex-pdf-process
   '("latexmk -xelatex -shell-escape -quiet -f %f"))

  ;; Ajouter une commande LaTeX dans le pr√©ambule pour d√©finir une couleur (ex : fond transparent gris clair)
  (org-latex-header "\\definecolor{lightgraytransparent}{rgb}{0.9, 0.9, 0.9}\n")

  ;; Ajouter des packages utiles au document export√© depuis Org vers LaTeX
  (org-latex-packages-alist
   '(("" "minted")                                     ;; Code color√© avec minted
     ("" "booktabs")                                   ;; Tableaux professionnels
     ("AUTO" "polyglossia" t ("xelatex" "lualatex"))   ;; Multilingue, alternatif √† babel
     ("" "grffile")                                    ;; Noms de fichiers complexes dans \includegraphics
     ;; ("" "unicode-math")                            ;; D√©commente si tu veux de meilleures fontes math√©matiques
     ("" "xcolor")))                                   ;; Gestion des couleurs

  :config
  ;; Ajouter .tex √† la liste des fichiers √† supprimer apr√®s export
  (add-to-list 'org-latex-logfiles-extensions "tex"))
#+END_SRC

#+RESULTS:
: t

#+BEGIN_SRC emacs-lisp
(use-package auctex
  :ensure t
  :defer t
  :after tex
  :config
  (add-to-list 'TeX-command-list
               '("Latexmk with shell-escape"
                 "latexmk -xelatex -shell-escape -interaction=nonstopmode -f %s"
                 TeX-run-TeX nil t))
  (setq TeX-command-default "Latexmk with shell-escape"))
#+END_SRC

#+RESULTS:
: t




#+BEGIN_SRC emacs-lisp
(use-package ox-beamer
  :ensure nil                  ;; ox-beamer est inclus avec org-mode, donc inutile de l'installer
  :after ox-latex              ;; Charger apr√®s ox-latex (export LaTeX)
  :config
  ;; Tu peux ici personnaliser la classe Beamer si n√©cessaire
  ;; (par exemple, ajouter une classe personnalis√©e)
  ;; (add-to-list 'org-latex-classes
  ;;              '("beamer"
  ;;                "\\documentclass[presentation]{beamer}"
  ;;                ("\\section{%s}" . "\\section*{%s}")))
  )
#+END_SRC

#+RESULTS:

*** Zathura
#+BEGIN_SRC emacs-lisp
  ;; Configuration pour utiliser Zathura comme viewer PDF avec AUCTeX
  (add-hook 'after-init-hook
            (lambda ()
              (with-eval-after-load 'tex
                ;; S√©lection du viewer Zathura
                (setq TeX-view-program-selection '((output-pdf "Zathura")))
                (setq TeX-view-program-list '(("Zathura" "zathura %o"))))))
#+END_SRC

#+RESULTS:
| (lambda nil (with-eval-after-load 'tex (setq TeX-view-program-selection '((output-pdf Zathura))) (setq TeX-view-program-list '((Zathura zathura %o))))) | org-persist-load-all | global-company-mode | (lambda nil (eval-after-load 'tex #'(lambda nil (if (display-graphic-p) (progn (setq TeX-view-program-selection '((output-pdf PDF Tools))) (setq TeX-view-program-list '((PDF Tools TeX-pdf-tools-sync-view))) (add-hook 'TeX-after-compilation-finished-functions #'TeX-revert-document-buffer)) (setq TeX-view-program-selection '((output-pdf Evince))) (setq TeX-view-program-list '((Evince evince %o))))))) | debian-ispell-set-default-dictionary | debian-ispell-set-startup-menu | tramp-register-archive-autoload-file-name-handler | magit-maybe-define-global-key-bindings | table--make-cell-map |


#+BEGIN_SRC emacs-lisp
;; Liste des extensions de fichiers g√©n√©r√©s par LaTeX √† supprimer automatiquement apr√®s export Org->PDF
(setq org-latex-logfiles-extensions
      '("lof"          ;; List of Figures
        "lot"          ;; List of Tables
        "tex~"         ;; Fichier tex sauvegard√© temporairement
        "aux"          ;; Fichier auxiliaire
        "idx"          ;; Index
        "log"          ;; Journal de compilation
        "out"          ;; Fichier de sortie auxiliaire
        "toc"          ;; Table des mati√®res
        "nav"          ;; Navigation pour beamer
        "snm"          ;; Slideshow notes for beamer
        "vrb"          ;; Verbose log
        "dvi"          ;; Fichier DVI
        "fdb_latexmk"  ;; Fichier de suivi latexmk
        "blg"          ;; Bibliographie bibtex log
        "brf"          ;; Bibliographie
        "fls"          ;; Fichier de d√©pendances latex
        "entoc"        ;; ?
        "ps"           ;; Postscript
        "spl"          ;; ?
        "bbl"))        ;; Bibliographie bbl
#+END_SRC

#+RESULTS:
| lof | lot | tex~ | aux | idx | log | out | toc | nav | snm | vrb | dvi | fdb_latexmk | blg | brf | fls | entoc | ps | spl | bbl |

** PDFs-tools
| Touche | Action                               | D√©tails / Couleur              |
|--------+--------------------------------------+--------------------------------|
| C-s    | Recherche avant                      | isearch-forward                |
| C-r    | Recherche arri√®re                    | isearch-backward               |
| n      | Aller √† la correspondance suivante   | pendant isearch                |
| p      | Aller √† la correspondance pr√©c√©dente | pendant isearch                |
| +      | Zoom avant                           | facteur pdf-view-resize-factor |
| -      | Zoom arri√®re                         | facteur pdf-view-resize-factor |
| R      | Rotation du PDF                      | 90¬∞ (sens horaire)             |
| h      | Surbrillance                         | couleur par d√©faut (jaune)     |
| u      | Souligner                            | underline                      |
| s      | Barrer                               | strikeout                      |
| ~      | Soulignement ondul√©                  | squiggly                       |
| t      | Ajouter une annotation texte         | C-c C-c pour valider           |
| d      | Supprimer une annotation             |                                |
| g     | Premi√®re page                        | Retour au d√©but du PDF         |
| G      | Derni√®re page                        | Aller √† la fin du PDF          |
| e      | Aller √† une page sp√©cifique          | Demande le num√©ro de page      |
| r      | Recharger le PDF                     | Rafra√Æchit le document         |

+ clique droit pour changer de couleur ou supprimer un soulignement
+  C-s et C-r peuvent √™tre tap√©s plusieurs fois pour sauter d‚Äôune occurrence √† l‚Äôautre
*** Configurer pdf-tools
#+BEGIN_SRC emacs-lisp
  (use-package pdf-tools
    :if (not (eq system-type 'windows-nt))
    :config
    (pdf-loader-install)

    ;; Ouvrir les PDF ajust√©s pour tenir sur la page
    (setq-default pdf-view-display-size 'fit-page)

    ;; Zoom plus pr√©cis avec un facteur de 1.1
    (setq pdf-view-resize-factor 1.1)

    ;; Navigation style Vim
    (define-key pdf-view-mode-map (kbd "g") #'pdf-view-first-page)
    (define-key pdf-view-mode-map (kbd "G")   #'pdf-view-last-page)
    (define-key pdf-view-mode-map (kbd "e")   #'pdf-view-goto-page)
    (define-key pdf-view-mode-map (kbd "r")   #'pdf-view-revert-buffer)
  
    ;; Utiliser la recherche standard d'Emacs
    (define-key pdf-view-mode-map (kbd "C-s") #'isearch-forward)
    (define-key pdf-view-mode-map (kbd "C-r") #'isearch-backward)

    ;; Raccourcis clavier pour les annotations
    (define-key pdf-view-mode-map (kbd "h") #'pdf-annot-add-highlight-markup-annotation)
    (define-key pdf-view-mode-map (kbd "t") #'pdf-annot-add-text-annotation)
    (define-key pdf-view-mode-map (kbd "u") #'pdf-annot-add-underline-markup-annotation)
    (define-key pdf-view-mode-map (kbd "s") #'pdf-annot-add-strikeout-markup-annotation)
    (define-key pdf-view-mode-map (kbd "~") #'pdf-annot-add-squiggly-markup-annotation)
    (define-key pdf-view-mode-map (kbd "d") #'pdf-annot-delete))
#+END_SRC

#+RESULTS:
: t

*** En mode terminal
#+BEGIN_SRC emacs-lisp
;; Utiliser Zathura pour les PDF depuis Org-mode
(setq org-file-apps
      '(("\\.pdf\\'" . "zathura %s")))

;; Ouvrir automatiquement les PDF avec Zathura partout dans Emacs
(use-package openwith
  :ensure t
  :config
  (setq openwith-associations
        '(("\\.pdf\\'" "zathura" (file))))
  (openwith-mode 1))
#+END_SRC

#+RESULTS:
: t

*** Pour les images
#+BEGIN_SRC emacs-lisp
(use-package openwith
  :config
  (setq openwith-associations
        (unless (display-graphic-p)
          '(("\\.png\\'" "sxiv" (file))
            ("\\.jpg\\'" "sxiv" (file))
            ("\\.jpeg\\'" "sxiv" (file)))))
  (openwith-mode 1))
#+END_SRC

#+RESULTS:
: t

#+BEGIN_SRC emacs-lisp
;; D√©finir un raccourci pour afficher/rafra√Æchir les images inline
(with-eval-after-load 'org
  (define-key org-mode-map (kbd "C-c i") 'org-display-inline-images))
#+END_SRC

#+RESULTS:
: org-display-inline-images

** Autocompl√©tion
#+begin_src emacs-lisp
  (use-package company
    :ensure t
    :custom
    ;; compl√©tion imm√©diate
    (company-idle-delay 0.1)

    ;; longueur minimale
    (company-minimum-prefix-length 1)

    ;; affichage
    (company-tooltip-align-annotations t)

    ;; ne pas forcer un choix
    (company-require-match nil)

    :hook
    (after-init . global-company-mode)

    :config
    ;; TAB compl√®te seulement si company est actif
    (define-key company-active-map (kbd "TAB")
      #'company-complete-common-or-cycle)
    (define-key company-active-map (kbd "<tab>")
      #'company-complete-common-or-cycle)

    (define-key company-active-map (kbd "S-TAB")
      #'company-select-previous)
    (define-key company-active-map (kbd "<backtab>")
      #'company-select-previous)

    ;; d√©clenchement manuel explicite
  ;  (define-key company-mode-map (kbd "C-SPC")
  ;    #'company-complete)
  )
#+end_src

#+RESULTS:
| org-persist-load-all | global-company-mode | (lambda nil (eval-after-load 'tex #'(lambda nil (setq TeX-view-program-selection '((output-pdf Zathura))) (setq TeX-view-program-list '((Zathura zathura %o)))))) | debian-ispell-set-default-dictionary | debian-ispell-set-startup-menu | tramp-register-archive-autoload-file-name-handler | magit-maybe-define-global-key-bindings | table--make-cell-map |


#+BEGIN_SRC emacs-lisp
(use-package company-box
  :after company
  :hook (company-mode . company-box-mode)
  :diminish)
#+END_SRC

#+RESULTS:
| company-box-mode | company-mode-set-explicitly |

** Cacher les marqueurs

#+BEGIN_SRC emacs-lisp
(setq org-hide-emphasis-markers t)
#+END_SRC

#+RESULTS:
: t

** D√©placement des lignes
Le paquet drag-stuff permet de d√©placer des lignes ou des blocs
de texte vers le haut ou le bas avec des raccourcis clavier.

| Mode normal et visual | Action                                    |
|-----------------------+-------------------------------------------|
| M-j                   | d√©placer la ligne ou le bloc vers le haut |
| M-k                   | d√©placer la ligne ou le bloc vers le bas  |
|-----------------------+-------------------------------------------|

#+begin_src emacs-lisp
(use-package drag-stuff
  :ensure t
  :config
  (drag-stuff-global-mode 1)

  ;; Raccourcis personnalis√©s pour evil-mode
  (with-eval-after-load 'evil
    (evil-define-key 'normal drag-stuff-mode-map
      (kbd "M-j") 'drag-stuff-down
      (kbd "M-k") 'drag-stuff-up)
    (evil-define-key 'visual drag-stuff-mode-map
      (kbd "M-j") 'drag-stuff-down
      (kbd "M-k") 'drag-stuff-up))
  )
#+end_src

#+RESULTS:
: t

* Personnalisation du mode line
** Mode line
#+BEGIN_SRC emacs-lisp
;; Police globale avec Nerd Font
(set-face-attribute 'default nil
                    :family "JetBrainsMono Nerd Font Propo"
                    :height 110)

;; Activation doom-modeline avec ic√¥nes
(use-package doom-modeline
  :ensure t
  :init
  (doom-modeline-mode 1)
  :config
  (setq doom-modeline-height 35
        doom-modeline-bar-width 5
        doom-modeline-persp-name t
        doom-modeline-persp-icon t)) ;; ic√¥nes activ√©es

#+END_SRC

#+RESULTS:
: t

** Mode mineur
#+BEGIN_SRC emacs-lisp
(use-package diminish
  :init
  (diminish 'abbrev-mode)
  (diminish 'buffer-face-mode)
  (diminish 'flyspell-mode)
  (diminish 'org-indent-mode)
  (diminish 'org-cdlatex-mode)
  (diminish 'visual-line-mode)
  (diminish 'buffer-face-mode)
  (diminish 'highlight-indent-guides-mode)
  (diminish 'eldoc-mode)
  (diminish 'subword-mode))
"Diminish configuration applied successfully"
#+END_SRC

#+RESULTS:
: Diminish configuration applied successfully

** D√©sactiver la barre de menu
#+begin_src emacs-lisp
(menu-bar-mode -1)
#+end_src

#+RESULTS:

* Theme de font
** theme catppucin
#+BEGIN_SRC emacs-lisp
;; D√©finir le r√©pertoire pour les th√®mes personnalis√©s
(setq custom-theme-directory
      (concat user-emacs-directory "themes"))

;; Utiliser le th√®me Catppuccin avec la saveur 'macchiato'
(use-package catppuccin-theme
  :demand t
  :custom
  (catppuccin-flavor 'macchiato)  ;; Options disponibles : 'latte, 'frappe, 'macchiato, 'mocha

  :config
  (catppuccin-reload))  ;; Recharge la configuration du th√®me
#+END_SRC

#+RESULTS:
: t

*** Couleur du fichier apr√®s enregistrement
#+BEGIN_SRC emacs-lisp
  (set-face-attribute 'mode-line-buffer-id nil
                    :foreground "#40a02b"  ;; vert
                    :weight 'bold)

#+END_SRC

#+RESULTS:

*** Couleur de la recherche
#+begin_src emacs-lisp
(set-face-attribute
  'isearch nil
  :weight 'normal
  :background "#8bd5ca")
#+end_src

#+RESULTS:

#+begin_src emacs-lisp
(set-face-attribute
  'lazy-highlight nil
  :background (cdr (assoc 'surface1 catppuccin-mocha-colors)))
#+end_src

#+RESULTS:

*** Couleur du mode major
#+begin_src emacs-lisp
(set-face-attribute 'doom-modeline-buffer-major-mode nil
                    :foreground "#fe640b"
                    :weight 'bold)
#+end_src

#+RESULTS:

*** Couleur des liens
#+begin_src emacs-lisp
(set-face-attribute
  'link nil
  :foreground "#8bd5ca")
#+end_src

#+RESULTS:

#+begin_src emacs-lisp
;; D√©sactiver UTF-8
(setq doom-modeline-buffer-encoding nil)
#+end_src

#+RESULTS:

*** Couleur du texte dans le mini buffer
#+begin_src emacs-lisp
;; Changer la couleur du prompt dans le minibuffer (avant ton texte)
(set-face-foreground 'minibuffer-prompt "#8839ef")  ;; violet

;; Changer la couleur du texte que tu tapes dans le minibuffer
;; Attention : cela change la couleur par d√©faut de tout le minibuffer
;(set-face-foreground 'default "#8839ef")  ;; texte que tu tapes
#+end_src

#+RESULTS:

* Org mode
** Indentation

#+BEGIN_SRC emacs-lisp
(eval-after-load 'org-indent '(diminish 'org-indent-mode))
#+END_SRC

#+RESULTS:

** Bullets

#+BEGIN_SRC emacs-lisp
(use-package org-superstar
  :hook (org-mode . org-superstar-mode)
  :custom
  (org-superstar-headline-bullets-list '("‚ú∏" "‚úø" "‚óÜ" "‚óâ" "‚úØ"))  ; Puces pour les titres
  (org-superstar-item-bullet-alist '((?* . "‚Ä¢")      ; Puce pour * list
                                     (?+ . "‚û§")      ; Puce pour + list
                                     (?1 . "‚ûÄ")      ; Puce pour 1 list
                                     (?2 . "‚ùñ")      ; Puce pour 2 list
                                     (?3 . "‚òÄ")      ; Puce pour 3 list
                                     (?4 . "‚óÜ"))))    ; Puce pour 4 list
#+END_SRC

#+RESULTS:
| org-superstar-mode | rainbow-mode | org-indent-mode | #[0 \300\301\302\303\304$\207 [add-hook change-major-mode-hook org-fold-show-all append local] 5] | #[0 \300\301\302\303\304$\207 [add-hook change-major-mode-hook org-babel-show-result-all append local] 5] | org-babel-result-hide-spec | org-babel-hide-all-hashes |
                                                                      
** Personnalisation des titres et sous titres

#+BEGIN_SRC emacs-lisp
(custom-set-faces
  '(org-level-1 ((t (:inherit outline-1 :height 1.7))))  ; Niveau 1 : Taille 1.7
  '(org-level-2 ((t (:inherit outline-2 :height 1.6))))  ; Niveau 2 : Taille 1.6
  '(org-level-3 ((t (:inherit outline-3 :height 1.5))))  ; Niveau 3 : Taille 1.5
  '(org-level-4 ((t (:inherit outline-4 :height 1.4))))  ; Niveau 4 : Taille 1.4
  '(org-level-5 ((t (:inherit outline-5 :height 1.3))))  ; Niveau 5 : Taille 1.3
  '(org-level-6 ((t (:inherit outline-5 :height 1.2))))  ; Niveau 6 : Taille 1.2
  '(org-level-7 ((t (:inherit outline-5 :height 1.1))))) ; Niveau 7 : Taille 1.1
#+END_SRC

#+RESULTS:

** Table de mati√®re

#+BEGIN_SRC emacs-lisp
(use-package toc-org
  :commands toc-org-enable
  :init (add-hook 'org-mode-hook 'toc-org-enable))
#+END_SRC

#+RESULTS:
| toc-org-enable | org-superstar-mode | rainbow-mode | org-indent-mode | #[0 \300\301\302\303\304$\207 [add-hook change-major-mode-hook org-fold-show-all append local] 5] | #[0 \300\301\302\303\304$\207 [add-hook change-major-mode-hook org-babel-show-result-all append local] 5] | org-babel-result-hide-spec | org-babel-hide-all-hashes |

** Pliage et depliage

#+BEGIN_SRC emacs-lisp
  (setq org-ellipsis "‚§µ")  ; Fl√®che pointant vers le bas pour symboliser le d√©pliage
(setq org-startup-folded 'content)  ; Plier le contenu par d√©faut
#+END_SRC

#+RESULTS:
: content

* Curseur
** Enregistrer la position du curseur

#+BEGIN_SRC emacs-lisp
(setq save-place-forget-unreadable-files nil)  ; Conserver la position m√™me pour les fichiers illisibles
(save-place-mode 1)  ; Activer le mode de sauvegarde de la position
#+END_SRC

#+RESULTS:
: t

#+BEGIN_SRC emacs-lisp
;; Chargement et configuration du package 'pulsar'
(use-package pulsar
  :ensure t ;; Assure que le package est install√© s'il ne l'est pas
  :bind ("<f8>" . pulsar-pulse-line)) ;; Associe la touche F8 √† la commande 'pulsar-pulse-line'
#+END_SRC

#+RESULTS:
: pulsar-pulse-line
** Flash
#+begin_src emacs-lisp
;; Configuration Beacon : flash unique et rapide
(use-package beacon
  :ensure t
  :custom
  ;; Couleur du flash
  (beacon-color "#666600")

  ;; Taille du halo
  (beacon-size 30)

  ;; Dur√©e r√©elle du flash (IMPORTANT)
  (beacon-blink-duration 0.1)

  ;; Pas de d√©lai suppl√©mentaire
  (beacon-blink-delay 1)

  ;; D√©sactiver les flashes r√©p√©titifs
  (beacon-blink-when-point-moves-vertically nil)
  (beacon-blink-when-point-moves-horizontally nil)
  (beacon-blink-when-buffer-changes nil)
  (beacon-blink-when-window-changes nil)

  :config
  (beacon-mode 1))
#+end_src

#+RESULTS:
: t

* Mini-beffeur
** All-the-icons
M-x all-the-icons-install-fonts RET
#+begin_src emacs-lisp
(use-package all-the-icons
  :if (display-graphic-p)
  :ensure t)

(use-package all-the-icons-dired
  :ensure t
  :hook (dired-mode . all-the-icons-dired-mode))
#+end_src

#+RESULTS:
| all-the-icons-dired-mode | dired-extra-startup | (lambda nil (undo-tree-mode 1)) | pdf-occur-dired-minor-mode |

** Which-key
Il prose des racourcis de clavier
#+BEGIN_SRC emacs-lisp
(use-package which-key
  :demand t ;; Charge imm√©diatement `which-key` au d√©marrage d'Emacs
  :config
  ;; Active le mode `which-key` pour afficher les raccourcis clavier disponibles
  (which-key-mode))
#+END_SRC

#+RESULTS:
: t

** Vertico

#+BEGIN_SRC emacs-lisp
(use-package vertico
  :bind (:map vertico-map
              ("RET" . vertico-directory-enter) ;; Confirmation dans un r√©pertoire
              ("DEL" . vertico-directory-delete-char) ;; Suppression d'un caract√®re
              ("M-DEL" . vertico-directory-delete-word)) ;; Suppression d'un mot entier

  :init
  (vertico-mode))
#+END_SRC

#+RESULTS:
: vertico-directory-delete-word

** Savehist

#+BEGIN_SRC emacs-lisp
(use-package savehist
  :demand t
  :init
  (savehist-mode))
#+END_SRC

#+RESULTS:

** Orderless

#+BEGIN_SRC emacs-lisp
(use-package orderless
  :demand t
  :custom
  (completion-styles '(orderless basic))
  (completion-category-defaults nil)
  (completion-category-overrides '((file (styles basic partial-completion)))))
#+END_SRC

#+RESULTS:

** Consult

#+BEGIN_SRC emacs-lisp
(use-package consult
  :bind
  (("M-i" . consult-imenu) ;; Acc√®de √† la liste des fonctions dans le buffer
   ("C-x b" . consult-buffer) ;; Liste des buffers ouverts
   ("C-x r b" . consult-bookmark) ;; Recherche parmi les signets
   ("C-s" . consult-line)) ;; Recherche dans la ligne actuelle
  :config
  (setq completion-in-region-function #'consult-completion-in-region))
#+END_SRC

#+RESULTS:
: consult-line

** Marginalia

#+BEGIN_SRC emacs-lisp
(use-package marginalia
  :bind (:map minibuffer-local-map
              ("M-A" . marginalia-cycle)) ;; Permet de changer le type d'affichage dans la mini-buffer
  :init
  (marginalia-mode))
#+END_SRC

#+RESULTS:
: marginalia-cycle

** Dired

#+BEGIN_SRC emacs-lisp
  ;; Chargement du paquet `dired`, qui est un mode natif d'Emacs pour naviguer dans les r√©pertoires.
  (use-package dired
    :demand t  ;; Force l'initialisation imm√©diate du paquet (utile si dired n'est pas d√©j√† activ√©)
    :ensure nil  ;; Indique que `dired` est int√©gr√© √† Emacs, donc pas besoin de le t√©l√©charger.
  
    ;; Activation du mode `undo-tree` automatiquement lors de l'ouverture de Dired.
    :hook (dired-mode . (lambda () (undo-tree-mode 1)))  ;; Lance `undo-tree-mode` dans Dired pour la gestion de l'historique.

    :config
    ;; Fonction pour d√©marrer un diaporama dans le r√©pertoire courant de Dired avec la commande `s`.
    (defun +dired-slideshow ()
      "D√©marre un diaporama dans le r√©pertoire courant de Dired en utilisant la commande `s`."
      (interactive)
      (let ((dir (dired-current-directory)))  ;; R√©cup√®re le r√©pertoire actuel de Dired
        (if dir
            (start-process "dired-slideshow" nil "s" dir)  ;; Lance un processus pour d√©marrer le diaporama.
          (message "No directory found")))  ;; Affiche un message d'erreur si aucun r√©pertoire n'est trouv√©.

    ;; D√©finition des raccourcis clavier pour Dired en mode normal (avec Evil).
    (evil-define-key 'normal dired-mode-map (kbd "o") 'dired-find-file-other-window)  ;; Ouvre le fichier dans une autre fen√™tre.
    (evil-define-key 'normal dired-mode-map (kbd "p") 'transient-extras-lp-menu)  ;; Lien vers un menu (modifiez cette commande si n√©cessaire).
    (evil-define-key 'normal dired-mode-map (kbd "v") '+dired-slideshow)  ;; Lance le diaporama d√©fini plus haut.

    ;; Configuration des options d'affichage de Dired pour `ls`.
    (setq-default dired-listing-switches
                  (combine-and-quote-strings '("-l"  ;; Affiche les informations d√©taill√©es sur les fichiers.
                                               "-v"  ;; Trie les fichiers par version.
                                               "-g"  ;; N'affiche pas les colonnes de propri√©taire et de groupe.
                                               "--no-group"  ;; Ne montre pas les groupes.
                                               "--human-readable"  ;; Affiche les tailles des fichiers dans un format lisible par l'homme.
                                               "--time-style=+%Y-%m-%d"  ;; Formate les dates d'une mani√®re sp√©cifique.
                                               "--almost-all")))  ;; Affiche tous les fichiers sauf `.` et `..`.

    ;; Autres options de personnalisation pour le comportement de Dired.
    (setq dired-clean-up-buffers-too t  ;; Nettoie les buffers de Dired apr√®s l'√©dition.
          dired-dwim-target t  ;; Active la fonctionnalit√© "do what I mean" pour les cibles dans Dired.
          dired-recursive-copies 'always  ;; Permet les copies r√©cursives sans confirmation.
          dired-recursive-deletes 'top  ;; Supprime les r√©pertoires r√©cursivement, mais demande une confirmation pour les sous-r√©pertoires.
          global-auto-revert-non-file-buffers t  ;; R√©active les buffers non li√©s √† des fichiers (ex. les r√©pertoires).
          auto-revert-verbose nil))  ;; D√©sactive les messages verbaux lors de l'auto-revert.
)
#+END_SRC

#+RESULTS:
| (lambda nil (undo-tree-mode 1)) | pdf-occur-dired-minor-mode |

#+BEGIN_SRC emacs-lisp
;; Chargement du paquet `dired-hide-dotfiles` pour cacher les fichiers et r√©pertoires commen√ßant par un point (.) dans Dired.
(use-package dired-hide-dotfiles
  :demand t  ;; Force le chargement imm√©diat du paquet.
  :config
  ;; Active `dired-hide-dotfiles-mode` pour cacher les fichiers et r√©pertoires dont le nom commence par un point.
  (dired-hide-dotfiles-mode 1)
  
  ;; D√©finition d'un raccourci clavier dans Dired pour activer/d√©sactiver le mode `dired-hide-dotfiles-mode`.
  ;; Le raccourci `.` dans le mode normal d'Evil permet de basculer entre cacher ou afficher les fichiers cach√©s.
  (evil-define-key 'normal dired-mode-map "." 'dired-hide-dotfiles-mode))
#+END_SRC

#+RESULTS:
: t

#+BEGIN_SRC emacs-lisp
;; Chargement du paquet `dired-open` pour ouvrir des fichiers avec des applications externes depuis Dired.
(use-package dired-open
  :demand t  ;; Force le chargement imm√©diat du paquet.
  
  :config
  ;; D√©finition des extensions de fichiers et des programmes √† utiliser pour ouvrir ces fichiers.
  (setq dired-open-extensions
        `(("avi" . "mpv")  ;; Les fichiers `.avi` sont ouverts avec `mpv`.
          ("cbr" . "zathura")  ;; Les fichiers `.cbr` (bandes dessin√©es) sont ouverts avec `zathura`.
          ("cbz" . "zathura")  ;; Les fichiers `.cbz` (bandes dessin√©es) sont ouverts avec `zathura`.
          ("doc" . "abiword")  ;; Les fichiers `.doc` sont ouverts avec `abiword`.
          ("docx" . "abiword")  ;; Les fichiers `.docx` sont ouverts avec `abiword`.
          ("epub" . "foliate")  ;; Les fichiers `.epub` (ebooks) sont ouverts avec `foliate`.
          ("flac" . "mpv")  ;; Les fichiers `.flac` sont ouverts avec `mpv` (lecture audio).
          ("gif" . "ffplay")  ;; Les fichiers `.gif` sont ouverts avec `ffplay`.
          ("gnumeric" . "gnumeric")  ;; Les fichiers `.gnumeric` sont ouverts avec `gnumeric` (tableur).
          ("jpeg" . ,(executable-find "feh"))  ;; Les fichiers `.jpeg` sont ouverts avec `feh`.
          ("jpg" . ,(executable-find "feh"))  ;; Les fichiers `.jpg` sont ouverts avec `feh`.
          ("m3u8" . "mpv")  ;; Les fichiers de playlist `.m3u8` sont ouverts avec `mpv`.
          ("m4a" . "mpv")  ;; Les fichiers `.m4a` (audio) sont ouverts avec `mpv`.
          ("mkv" . "mpv")  ;; Les fichiers `.mkv` sont ouverts avec `mpv` (vid√©o).
          ("mobi" . "foliate")  ;; Les fichiers `.mobi` (ebooks) sont ouverts avec `foliate`.
          ("mov" . "mpv")  ;; Les fichiers `.mov` (vid√©o) sont ouverts avec `mpv`.
          ("mp3" . "mpv")  ;; Les fichiers `.mp3` (audio) sont ouverts avec `mpv`.
          ("mp4" . "mpv")  ;; Les fichiers `.mp4` (vid√©o) sont ouverts avec `mpv`.
          ("mpg" . "mpv")  ;; Les fichiers `.mpg` (vid√©o) sont ouverts avec `mpv`.
          ("pdf" . "zathura")  ;; Les fichiers `.pdf` sont ouverts avec `zathura`.
          ("png" . ,(executable-find "feh"))  ;; Les fichiers `.png` sont ouverts avec `feh`.
          ("webm" . "mpv")  ;; Les fichiers `.webm` sont ouverts avec `mpv`.
          ("webp" . ,(executable-find "feh"))  ;; Les fichiers `.webp` sont ouverts avec `feh`.
          ("wmv" . "mpv")  ;; Les fichiers `.wmv` (vid√©o) sont ouverts avec `mpv`.
          ("xcf" . "gimp")  ;; Les fichiers `.xcf` (format de GIMP) sont ouverts avec `gimp`.
          ("xls" . "gnumeric")  ;; Les fichiers `.xls` (tableurs Excel) sont ouverts avec `gnumeric`.
          ("xlsx" . "gnumeric")))  ;; Les fichiers `.xlsx` (tableurs Excel) sont ouverts avec `gnumeric`.

  ;; Installation des paquets syst√®me n√©cessaires si non install√©s via une commande shell.
  (unless (executable-find "mpv")
    (shell-command "sudo apt-get install mpv"))
  
  (unless (executable-find "gnumeric")
    (shell-command "sudo apt-get install gnumeric"))
  
  (unless (executable-find "feh")
    (shell-command "sudo apt-get install feh"))
  
  (unless (executable-find "zathura")
    (shell-command "sudo apt-get install zathura"))
  
  (unless (executable-find "abiword")
    (shell-command "sudo apt-get install abiword"))
  
  (unless (executable-find "gimp")
    (shell-command "sudo apt-get install gimp"))
  
  (unless (executable-find "foliate")
    (shell-command "sudo apt-get install foliate"))
)
#+END_SRC

#+RESULTS:
: t

#+BEGIN_SRC emacs-lisp
(use-package async
  :demand t  ;; Assure que le paquet est charg√© imm√©diatement.
  
  :config
  ;; Active `dired-async-mode` pour effectuer les op√©rations Dired de mani√®re asynchrone.
  (dired-async-mode 1))
#+END_SRC

#+RESULTS:
: t

** Conversion d'images dans Dired avec ImageMagick
#+BEGIN_SRC emacs-lisp
(defun +image-dimensions (filename)
  "Given an image file `filename' readable by `identify', return a cons pair of integers denoting the width and height of the image, respectively."
  (->> (shell-command-to-string (format "identify %s" filename))
       (s-split " ")
       (nth 2)
       (s-split "x")
       (mapcar #'string-to-number)))

(defun +dired-convert-image (source-file target-width target-height target-file)
  "Resize an image file specified by `source-file` to `target-width` and `target-height`, and save the resized image as `target-file`."
  (interactive
   (let* ((source-file (dired-file-name-at-point))  ;; R√©cup√®re le nom du fichier s√©lectionn√© dans Dired
          (source-dimensions (+image-dimensions source-file))  ;; R√©cup√®re les dimensions de l'image source
          (source-width (nth 0 source-dimensions))  ;; Largeur de l'image source
          (source-height (nth 1 source-dimensions))  ;; Hauteur de l'image source
          (target-width (read-number "Width: " source-width))  ;; Demande √† l'utilisateur la largeur cible
          (target-height (read-number "Height: "  ;; Demande √† l'utilisateur la hauteur cible
                                      (if (= source-width target-width)
                                          source-height
                                        (round (* source-height
                                                  (/ (float target-width)
                                                     source-width))))))  ;; Conserve les proportions
          (target-file (read-file-name "Target: " nil nil nil
                                       (file-name-nondirectory source-file))))  ;; Demande le chemin du fichier cible
     (list source-file target-width target-height target-file)))  ;; Retourne les arguments n√©cessaires pour la conversion

  ;; Appelle ImageMagick pour redimensionner l'image
  (call-process "convert" nil nil nil
                (expand-file-name source-file)  ;; Fichier source avec son chemin complet
                "-resize" (format "%sx%s"
                                  target-width  ;; Largeur cible
                                  target-height)  ;; Hauteur cible
                (expand-file-name target-file)))  ;; Fichier cible o√π l'image redimensionn√©e sera sauvegard√©e
#+END_SRC

#+RESULTS:
: +dired-convert-image

** Ediff

#+BEGIN_SRC emacs-lisp
(use-package ediff
  :ensure nil  ;; Indique que le paquet 'ediff' est int√©gr√© dans Emacs et n'a pas besoin d'√™tre install√© s√©par√©ment

  :config
  (setq ediff-window-setup-function 'ediff-setup-windows-plain)  ;; D√©finit la fonction de configuration des fen√™tres pour l'affichage d'Ediff
  (setq ediff-split-window-function 'split-window-horizontally))  ;; D√©finit la m√©thode de d√©coupage de fen√™tre (ici, horizontalement)
#+END_SRC

#+RESULTS:
: t

** Afficher les commandes tap√©es

#+BEGIN_SRC emacs-lisp
;; Activer M-x command-log-mode
  (use-package command-log-mode)
#+END_SRC

#+RESULTS:

** Sudo edit

#+BEGIN_SRC emacs-lisp
(use-package sudo-edit
  :commands (sudo-edit))
#+END_SRC

#+RESULTS:

** Cron: ajouter la coloration au fichier

#+BEGIN_SRC emacs-lisp
(use-package crontab-mode)
#+END_SRC

#+RESULTS:

** Calculatrice

#+BEGIN_SRC emacs-lisp
(use-package calc
  :ensure nil

  :config
  (add-hook 'calc-trail-mode-hook 'evil-insert-state))
#+END_SRC

#+RESULTS:
: t

** yasnippets

# #+BEGIN_SRC emacs-lisp
# ;; Configuration du package yasnippet pour g√©rer les snippets
# (use-package yasnippet
#   :demand t ;; Charge imm√©diatement yasnippet
#   :config
#   (setq yas-indent-line 'auto) ;; Indente automatiquement les lignes dans les snippets
#   (yas-global-mode 1)) ;; Active yasnippet globalement
# #+END_SRC

# #+RESULTS:
# : t

** Arc en ciel
# #+begin_src emacs-lisp
# (use-package nyan-mode
#   :ensure t
#   :custom
#   (nyan-bar-length 20)        ;; Longueur de la barre
#   (nyan-wavy-trail t)         ;; Barre en vague
#   (nyan-animate-nyancat t)    ;; Chat anim√©
#   :config
#   (nyan-mode 1)
#   (nyan-start-animation))
# #+end_src

# #+RESULTS:
# : t

* Magit et git
** Magit
 üß™ Sc√©nario courant : modifier, commiter, push
*Fonctionnement*: Il permet de Stager, commit, push, pull etc avec la commande /C-x g/.
s ie Stager fichier / hunk, u ie Unstager, c c ie Commit, P p ie Push, F u ie Pull, l l ie Voir log.
#+BEGIN_SRC emacs-lisp
(use-package magit
  :ensure-system-package git  ;; V√©rifie que Git est install√© sur le syst√®me
  :hook (with-editor-mode . evil-insert-state)  ;; Mettre `evil-insert-state` quand `with-editor-mode` est activ√©
  :bind ("C-x g" . magit-status)  ;; Lier la commande Magit √† la combinaison de touches C-x g

  :config
  (use-package magit-section)  ;; Charge la section de Magit
  (use-package with-editor)    ;; Charge le package with-editor pour la gestion des √©diteurs dans Magit

  (require 'git-rebase)  ;; Charge la fonctionnalit√© git-rebase

  ;; Fonction pour parser l'auteur d'un commit en r√©cup√©rant le nom et l'email
  (defun +get-author-parse-line (key value domain)
    (let* ((values (mapcar #'s-trim (s-split ";" value)))  ;; S√©pare la cha√Æne en parties
           (name (car values))  ;; Le premier √©l√©ment de la liste est le nom
           (email (or (cadr values) key)))  ;; Si pas d'email, utilise la cl√© comme email
      (format "%s <%s@%s>" name email domain)))  ;; Retourne une cha√Æne format√©e pour l'auteur

  ;; Fonction pour obtenir les auteurs √† partir d'un fichier YAML de configuration
  (defun +git-authors ()
    (let* ((config (yaml-parse-string (f-read-text "~/.git-authors")))  ;; Lit et parse le fichier YAML
           (domain (gethash 'domain (gethash 'email config)))  ;; R√©cup√®re le domaine
           (authors '()))  ;; Initialise la liste des auteurs
      (+maphash (lambda (k v) (+git-author-parse-line k v domain))  ;; Mappe les auteurs √† partir du fichier YAML
                (gethash 'authors config))))  ;; Acc√®de aux auteurs dans le fichier YAML

  ;; Fonction pour ins√©rer un co-auteur dans un commit
  (defun +insert-git-coauthor ()
    "Prompt for co-author and insert a co-authored-by block."
    (interactive)
    (insert (format "Co-authored-by: %s\n"
                    (completing-read "Co-authored by:" (+git-authors)))))  ;; Demande un co-auteur et ins√®re le bloc

  ;; Configuration de Magit
  (setq git-commit-summary-max-length 50  ;; Limite la longueur du r√©sum√© du commit
        magit-bury-buffer-function 'magit-restore-window-configuration  ;; Fonction pour g√©rer les buffers de Magit
        magit-display-buffer-function 'magit-display-buffer-fullframe-status-topleft-v1  ;; Fonction pour afficher Magit en mode plein √©cran
        magit-push-always-verify nil))  ;; D√©sactive la v√©rification avant chaque push
#+END_SRC

#+RESULTS:
: magit-status

** Git-timemachine
*Fonctionnement*: Il permet de naviguer entre les versions du fichier. Par exple,
Ouvrir un fichier suivi par git, lancer timemachine avec C-c t/. Pour naviguer,
n ie commit suivant, p ie pr√©c√©dent, b ie copier le hash du commit et q pour quitter.
#+BEGIN_SRC emacs-lisp
(use-package git-timemachine
  :defer t
  :bind ("C-c t" . git-timemachine-toggle))  ;; Lance la timemachine avec C-c t
#+END_SRC

#+RESULTS:
: git-timemachine-toggle

* Web
** Exportation vers le web
#+BEGIN_SRC emacs-lisp
(use-package web-mode
  :mode ("\\.erb$"
         "\\.html$"
         "\\.php$"
         "\\.rhtml$")

  :config
  (setq web-mode-markup-indent-offset 2
        web-mode-css-indent-offset 2
        web-mode-code-indent-offset 2
        web-mode-indent-style 2))
#+END_SRC

#+RESULTS:
: ((\.rhtml$ . web-mode) (\.php$ . web-mode) (\.html$ . web-mode) (\.erb$ . web-mode) (\.[pP][dD][fF]\' . pdf-view-mode) (\.hva\' . LaTeX-mode) (/crontab\(\.X*[[:alnum:]]+\)?\' . crontab-mode) (/git-rebase-todo\' . git-rebase-mode) (\.gpg\(~\|\.~[0-9]+~\)?\' nil epa-file) (\.elc\' . elisp-byte-code-mode) (\.zst\' nil jka-compr) (\.dz\' nil jka-compr) (\.xz\' nil jka-compr) (\.lzma\' nil jka-compr) (\.lz\' nil jka-compr) (\.g?z\' nil jka-compr) (\.bz2\' nil jka-compr) (\.Z\' nil jka-compr) (\.vr[hi]?\' . vera-mode) (\(?:\.\(?:rbw?\|ru\|rake\|thor\|jbuilder\|rabl\|gemspec\|podspec\)\|/\(?:Gem\|Rake\|Cap\|Thor\|Puppet\|Berks\|Brew\|Vagrant\|Guard\|Pod\)file\)\' . ruby-mode) (\.re?st\' . rst-mode) (\.py[iw]?\' . python-mode) (\.m\' . octave-maybe-mode) (\.less\' . less-css-mode) (\.scss\' . scss-mode) (\.cs\' . csharp-mode) (\.awk\' . awk-mode) (\.\(u?lpc\|pike\|pmod\(\.in\)?\)\' . pike-mode) (\.idl\' . idl-mode) (\.java\' . java-mode) (\.m\' . objc-mode) (\.ii\' . c++-mode) (\.i\' . c-mode) (\.lex\' . c-mode) (\.y\(acc\)?\' . c-mode) (\.h\' . c-or-c++-mode) (\.c\' . c-mode) (\.\(CC?\|HH?\)\' . c++-mode) (\.[ch]\(pp\|xx\|\+\+\)\' . c++-mode) (\.\(cc\|hh\)\' . c++-mode) (\.\(bat\|cmd\)\' . bat-mode) (\.[sx]?html?\(\.[a-zA-Z_]+\)?\' . mhtml-mode) (\.svgz?\' . image-mode) (\.svgz?\' . xml-mode) (\.x[bp]m\' . image-mode) (\.x[bp]m\' . c-mode) (\.p[bpgn]m\' . image-mode) (\.tiff?\' . image-mode) (\.gif\' . image-mode) (\.png\' . image-mode) (\.jpe?g\' . image-mode) (\.webp\' . image-mode) (\.te?xt\' . text-mode) (\.[tT]e[xX]\' . tex-mode) (\.ins\' . tex-mode) (\.ltx\' . latex-mode) (\.dtx\' . doctex-mode) (\.org\' . org-mode) (\.dir-locals\(?:-2\)?\.el\' . lisp-data-mode) (\.eld\' . lisp-data-mode) (eww-bookmarks\' . lisp-data-mode) (tramp\' . lisp-data-mode) (/archive-contents\' . lisp-data-mode) (places\' . lisp-data-mode) (\.emacs-places\' . lisp-data-mode) (\.el\' . emacs-lisp-mode) (Project\.ede\' . emacs-lisp-mode) (\.\(scm\|sls\|sld\|stk\|ss\|sch\)\' . scheme-mode) (\.l\' . lisp-mode) (\.li?sp\' . lisp-mode) (\.[fF]\' . fortran-mode) (\.for\' . fortran-mode) (\.p\' . pascal-mode) (\.pas\' . pascal-mode) (\.\(dpr\|DPR\)\' . delphi-mode) (\.\([pP]\([Llm]\|erl\|od\)\|al\)\' . perl-mode) (Imakefile\' . makefile-imake-mode) (Makeppfile\(?:\.mk\)?\' . makefile-makepp-mode) (\.makepp\' . makefile-makepp-mode) (\.mk\' . makefile-gmake-mode) (\.make\' . makefile-gmake-mode) ([Mm]akefile\' . makefile-gmake-mode) (\.am\' . makefile-automake-mode) (\.texinfo\' . texinfo-mode) (\.te?xi\' . texinfo-mode) (\.[sS]\' . asm-mode) (\.asm\' . asm-mode) (\.css\' . css-mode) (\.mixal\' . mixal-mode) (\.gcov\' . compilation-mode) (/\.[a-z0-9-]*gdbinit . gdb-script-mode) (-gdb\.gdb . gdb-script-mode) ([cC]hange\.?[lL]og?\' . change-log-mode) ([cC]hange[lL]og[-.][0-9]+\' . change-log-mode) (\$CHANGE_LOG\$\.TXT . change-log-mode) (\.scm\.[0-9]*\' . scheme-mode) (\.[ckz]?sh\'\|\.shar\'\|/\.z?profile\' . sh-mode) (\.bash\' . sh-mode) (/PKGBUILD\' . sh-mode) (\(/\|\`\)\.\(bash_\(profile\|history\|log\(in\|out\)\)\|z?log\(in\|out\)\)\' . sh-mode) (\(/\|\`\)\.\(shrc\|zshrc\|m?kshrc\|bashrc\|t?cshrc\|esrc\)\' . sh-mode) (\(/\|\`\)\.\([kz]shenv\|xinitrc\|startxrc\|xsession\)\' . sh-mode) (\.m?spec\' . sh-mode) (\.m[mes]\' . nroff-mode) (\.man\' . nroff-mode) (\.sty\' . latex-mode) (\.cl[so]\' . latex-mode) (\.bbl\' . latex-mode) (\.bib\' . bibtex-mode) (\.bst\' . bibtex-style-mode) (\.sql\' . sql-mode) (\(acinclude\|aclocal\|acsite\)\.m4\' . autoconf-mode) (\.m[4c]\' . m4-mode) (\.mf\' . metafont-mode) (\.mp\' . metapost-mode) (\.vhdl?\' . vhdl-mode) (\.article\' . text-mode) (\.letter\' . text-mode) (\.i?tcl\' . tcl-mode) (\.exp\' . tcl-mode) (\.itk\' . tcl-mode) (\.icn\' . icon-mode) (\.sim\' . simula-mode) (\.mss\' . scribe-mode) (\.f9[05]\' . f90-mode) (\.f0[38]\' . f90-mode) (\.indent\.pro\' . fundamental-mode) (\.\(pro\|PRO\)\' . idlwave-mode) (\.srt\' . srecode-template-mode) (\.prolog\' . prolog-mode) (\.tar\' . tar-mode) (\.\(arc\|zip\|lzh\|lha\|zoo\|[jew]ar\|xpi\|rar\|cbr\|7z\|squashfs\|ARC\|ZIP\|LZH\|LHA\|ZOO\|[JEW]AR\|XPI\|RAR\|CBR\|7Z\|SQUASHFS\)\' . archive-mode) (\.oxt\' . archive-mode) (\.\(deb\|[oi]pk\)\' . archive-mode) (\`/tmp/Re . text-mode) (/Message[0-9]*\' . text-mode) (\`/tmp/fol/ . text-mode) (\.oak\' . scheme-mode) (\.sgml?\' . sgml-mode) (\.x[ms]l\' . xml-mode) (\.dbk\' . xml-mode) (\.dtd\' . sgml-mode) (\.ds\(ss\)?l\' . dsssl-mode) (\.js[mx]?\' . javascript-mode) (\.har\' . javascript-mode) (\.json\' . js-json-mode) (\.[ds]?va?h?\' . verilog-mode) (\.by\' . bovine-grammar-mode) (\.wy\' . wisent-grammar-mode) (\.erts\' . erts-mode) ([:/\]\..*\(emacs\|gnus\|viper\)\' . emacs-lisp-mode) (\`\..*emacs\' . emacs-lisp-mode) ([:/]_emacs\' . emacs-lisp-mode) (/crontab\.X*[0-9]+\' . shell-script-mode) (\.ml\' . lisp-mode) (\.ld[si]?\' . ld-script-mode) (ld\.?script\' . ld-script-mode) (\.xs\' . c-mode) (\.x[abdsru]?[cnw]?\' . ld-script-mode) (\.zone\' . dns-mode) (\.soa\' . dns-mode) (\.asd\' . lisp-mode) (\.\(asn\|mib\|smi\)\' . snmp-mode) (\.\(as\|mi\|sm\)2\' . snmpv2-mode) (\.\(diffs?\|patch\|rej\)\' . diff-mode) (\.\(dif\|pat\)\' . diff-mode) (\.[eE]?[pP][sS]\' . ps-mode) (\.\(?:PDF\|EPUB\|CBZ\|FB2\|O?XPS\|DVI\|OD[FGPST]\|DOCX\|XLSX?\|PPTX?\|pdf\|epub\|cbz\|fb2\|o?xps\|djvu\|dvi\|od[fgpst]\|docx\|xlsx?\|pptx?\)\' . doc-view-mode-maybe) (configure\.\(ac\|in\)\' . autoconf-mode) (\.s\(v\|iv\|ieve\)\' . sieve-mode) (BROWSE\' . ebrowse-tree-mode) (\.ebrowse\' . ebrowse-tree-mode) (#\*mail\* . mail-mode) (\.g\' . antlr-mode) (\.mod\' . m2-mode) (\.ses\' . ses-mode) (\.docbook\' . sgml-mode) (\.com\' . dcl-mode) (/config\.\(?:bat\|log\)\' . fundamental-mode) (/\.\(authinfo\|netrc\)\' . authinfo-mode) (\.\(?:[iI][nN][iI]\|[lL][sS][tT]\|[rR][eE][gG]\|[sS][yY][sS]\)\' . conf-mode) (\.la\' . conf-unix-mode) (\.ppd\' . conf-ppd-mode) (java.+\.conf\' . conf-javaprop-mode) (\.properties\(?:\.[a-zA-Z0-9._-]+\)?\' . conf-javaprop-mode) (\.toml\' . conf-toml-mode) (\.desktop\' . conf-desktop-mode) (/\.redshift\.conf\' . conf-windows-mode) (\`/etc/\(?:DIR_COLORS\|ethers\|.?fstab\|.*hosts\|lesskey\|login\.?de\(?:fs\|vperm\)\|magic\|mtab\|pam\.d/.*\|permissions\(?:\.d/.+\)?\|protocols\|rpc\|services\)\' . conf-space-mode) (\`/etc/\(?:acpid?/.+\|aliases\(?:\.d/.+\)?\|default/.+\|group-?\|hosts\..+\|inittab\|ksysguarddrc\|opera6rc\|passwd-?\|shadow-?\|sysconfig/.+\)\' . conf-mode) ([cC]hange[lL]og[-.][-0-9a-z]+\' . change-log-mode) (/\.?\(?:gitconfig\|gnokiirc\|hgrc\|kde.*rc\|mime\.types\|wgetrc\)\' . conf-mode) (/\.mailmap\' . conf-unix-mode) (/\.\(?:asound\|enigma\|fetchmail\|gltron\|gtk\|hxplayer\|mairix\|mbsync\|msmtp\|net\|neverball\|nvidia-settings-\|offlineimap\|qt/.+\|realplayer\|reportbug\|rtorrent\.\|screen\|scummvm\|sversion\|sylpheed/.+\|xmp\)rc\' . conf-mode) (/\.\(?:gdbtkinit\|grip\|mpdconf\|notmuch-config\|orbital/.+txt\|rhosts\|tuxracer/options\)\' . conf-mode) (/\.?X\(?:default\|resource\|re\)s\> . conf-xdefaults-mode) (/X11.+app-defaults/\|\.ad\' . conf-xdefaults-mode) (/X11.+locale/.+/Compose\' . conf-colon-mode) (/X11.+locale/compose\.dir\' . conf-javaprop-mode) (\.~?[0-9]+\.[0-9][-.0-9]*~?\' nil t) (\.\(?:orig\|in\|[bB][aA][kK]\)\' nil t) ([/.]c\(?:on\)?f\(?:i?g\)?\(?:\.[a-zA-Z0-9._-]+\)?\' . conf-mode-maybe) (\.[1-9]\' . nroff-mode) (\.art\' . image-mode) (\.avs\' . image-mode) (\.bmp\' . image-mode) (\.cmyk\' . image-mode) (\.cmyka\' . image-mode) (\.crw\' . image-mode) (\.dcr\' . image-mode) (\.dcx\' . image-mode) (\.dng\' . image-mode) (\.dpx\' . image-mode) (\.fax\' . image-mode) (\.heic\' . image-mode) (\.hrz\' . image-mode) (\.icb\' . image-mode) (\.icc\' . image-mode) (\.icm\' . image-mode) (\.ico\' . image-mode) (\.icon\' . image-mode) (\.jbg\' . image-mode) (\.jbig\' . image-mode) (\.jng\' . image-mode) (\.jnx\' . image-mode) (\.miff\' . image-mode) (\.mng\' . image-mode) (\.mvg\' . image-mode) (\.otb\' . image-mode) (\.p7\' . image-mode) (\.pcx\' . image-mode) (\.pdb\' . image-mode) (\.pfa\' . image-mode) (\.pfb\' . image-mode) (\.picon\' . image-mode) (\.pict\' . image-mode) (\.rgb\' . image-mode) (\.rgba\' . image-mode) (\.tga\' . image-mode) (\.wbmp\' . image-mode) (\.webp\' . image-mode) (\.wmf\' . image-mode) (\.wpg\' . image-mode) (\.xcf\' . image-mode) (\.xmp\' . image-mode) (\.xwd\' . image-mode) (\.yuv\' . image-mode) (\.tgz\' . tar-mode) (\.tbz2?\' . tar-mode) (\.txz\' . tar-mode) (\.tzst\' . tar-mode) (\.drv\' . LaTeX-mode))

#+BEGIN_SRC emacs-lisp
(use-package rainbow-mode
  :hook web-mode)
#+END_SRC

#+RESULTS:
| rainbow-mode |

** Recherche sur Starpage

#+BEGIN_SRC emacs-lisp
(eval-and-compile
  (defun eww-browse-wikipedia-en ()
    (interactive)
    (let ((search (read-from-minibuffer "Recherche Wikip√©dia (EN) : ")))
      (eww-browse-url
       (concat "https://en.wikipedia.org/w/index.php?search=" search)))))

(eval-and-compile
  (defun eww-browser-english-dict ()
    (interactive)
    (let ((search (read-from-minibuffer "Recherche dans le dictionnaire (EN) : ")))
      (eww-browse-url
       (concat "https://www.merriam-webster.com/dictionary/" search)))))

(use-package eww
  :config
  (setq eww-search-prefix "https://startpage.com/search/?q=")
  :bind (("C-c w b" . 'eww)
         ("C-c w d" . 'eww-browser-english-dict)
         ("C-c w w" . 'eww-browse-wikipedia-en)))
#+END_SRC

#+RESULTS:
: eww-browse-wikipedia-en

* Environnement de programmation
** Profondeur de retrait et camelcase

#+BEGIN_SRC emacs-lisp
(setq-default tab-width 2)
#+END_SRC

#+RESULTS:
: 2

#+BEGIN_SRC emacs-lisp
(use-package subword
  :config (global-subword-mode 1))
#+END_SRC

#+RESULTS:
: t

** Activation des langages de programmation 
#+BEGIN_SRC emacs-lisp
  (org-babel-do-load-languages
   'org-babel-load-languages
   '((emacs-lisp . t)
     (shell . t)
     (python . t)
     (ruby . t)
     (C . t)
     (latex . t)))
#+END_SRC

#+RESULTS:

** Raccourcis pour les blocs
#+BEGIN_SRC emacs-lisp
;; Utiliser org-tempo pour ajouter des raccourcis pour les blocs de code
(use-package org-tempo
  :ensure nil
  :demand t
  :config
  (dolist (item '(("sh" . "src sh")
                  ("el" . "src emacs-lisp")
                  ("li" . "src lisp")
                  ("sc" . "src scheme")
                  ("ts" . "src typescript")
                  ("py" . "src python")
                  ("yaml" . "src yaml")
                  ("json" . "src json")
                  ("c" . "src C")
                  ("r" . "src R")
    (add-to-list 'org-structure-template-alist item)))))
#+END_SRC

#+RESULTS:
: t

** Python

#+BEGIN_SRC emacs-lisp
;; Utiliser Python 3 comme interpr√©teur pour Org-Babel
(setq org-babel-python-command "python3")
#+END_SRC

#+RESULTS:
: python3

*** Configuration Python + Virtualenv pour Org-Babel
**** Activation de pyvenv et du virtualenv pythonvenv
#+BEGIN_SRC emacs-lisp
(use-package pyvenv
  :ensure t
  :config
  ;; Active pyvenv automatiquement
  (pyvenv-mode 1)
  ;; Active le virtualenv situ√© ici :
  (pyvenv-activate "/home/kassim/pythonvenv"))
#+END_SRC

#+RESULTS:
: t

**** Mise √† jour automatique du chemin Python d'Org-Babel
#+BEGIN_SRC emacs-lisp
(defun my/update-org-babel-python-command ()
  (when (and (boundp 'pyvenv-virtual-env)
             pyvenv-virtual-env)
    (setq org-babel-python-command
          (expand-file-name "bin/python" pyvenv-virtual-env))))
(add-hook 'pyvenv-post-activate-hooks #'my/update-org-babel-python-command)
#+END_SRC

#+RESULTS:
| my/update-org-babel-python-command |

#+BEGIN_SRC emacs-lisp
(my/update-org-babel-python-command)
#+END_SRC

#+RESULTS:
: /home/kassim/pythonvenv/bin/python

** C/C++
*** Configuration g√©n√©rale C/C++
#+begin_src emacs-lisp
;; ----------------------------
;; Style et indentation
;; ----------------------------
;; Style de code par d√©faut pour C et C++
(setq c-default-style "linux"  ;; style Linux pour C/C++
      c-basic-offset 4)        ;; indentation = 4 espaces

;; Fonction utilitaire pour configurer C et C++
(defun my-c-c++-mode-setup ()
  "Setup for C/C++ modes."
  ;; Utiliser des espaces au lieu de tabulations
  (setq indent-tabs-mode nil
        tab-width 4)
  
  ;; Activer Eglot (LSP) automatiquement pour C/C++
  (eglot-ensure)
  
  ;; Flymake uniquement pour C
  (when (derived-mode-p 'c-mode)
    (flymake-mode))
  
  ;; Style Stroustrup uniquement pour C++
  (when (derived-mode-p 'c++-mode)
    (c-set-style "stroustrup")))

;; Ajouter le hook pour C
(add-hook 'c-mode-hook 'my-c-c++-mode-setup)

;; Ajouter le hook pour C++
(add-hook 'c++-mode-hook 'my-c-c++-mode-setup)

;; Raccourci global pour compiler avec F5
(global-set-key (kbd "<f5>") 'compile)
#+end_src

#+RESULTS:
: compile

*** CMake mode
#+begin_src emacs-lisp
;; ----------------------------
;; Support CMake
;; ----------------------------
(use-package cmake-mode
  :ensure t) ;; Installer automatiquement si manquant
#+end_src

#+RESULTS:

*** Ggtags (navigation de code)
#+begin_src emacs-lisp
;; ----------------------------
;; Ggtags pour navigation et recherche de symboles
;; ----------------------------
(use-package ggtags
  :ensure t
  :hook (c++-mode . ggtags-mode)  ;; activer ggtags pour C++
  :bind (:map ggtags-mode-map
         ("C-c g s" . ggtags-find-other-symbol)  ;; rechercher symbole
         ("C-c g h" . ggtags-view-tag-history)    ;; historique
         ("C-c g r" . ggtags-find-reference)      ;; r√©f√©rences
         ("C-c g f" . ggtags-find-file)           ;; ouvrir fichier
         ("C-c g c" . ggtags-create-tags)         ;; cr√©er tags
         ("C-c g u" . ggtags-update-tags)         ;; mettre √† jour tags
         ("M-," . pop-tag-mark))                  ;; revenir √† la position pr√©c√©dente
  :config
  ;; Int√©grer ggtags √† Imenu pour lister les fonctions
  (setq-local imenu-create-index-function #'ggtags-build-imenu-index))
#+end_src

#+RESULTS:

*** Company headers (autocompl√©tion pour C/C++)
#+begin_src emacs-lisp
;; ----------------------------
;; Company backend pour autocompletion des headers C/C++
;; ----------------------------
(use-package company-c-headers
  :ensure t
  :config
  ;; Ajouter chemin syst√®me des headers C++ (ex: GCC 13)
  (add-to-list 'company-c-headers-path-system "/usr/include/c++/13")
  
  ;; Ajouter company-c-headers √† company-backends
  (add-to-list 'company-backends 'company-c-headers))
#+end_src

#+RESULTS:
: t

*** Semantic
#+begin_src emacs-lisp
;; ----------------------------
;; Semantic pour analyse statique et navigation
;; ----------------------------
(require 'semantic)

;; Activer la base de donn√©es et le scheduler
(global-semanticdb-minor-mode 1)
(global-semantic-idle-scheduler-mode 1)

;; Activer semantic-mode pour C++
(add-hook 'c++-mode-hook #'semantic-mode)
#+end_src

#+RESULTS:
| my-c-c++-mode-setup | irony-mode | semantic-mode | ggtags-mode | (lambda nil (c-set-style stroustrup)) |

*** Irony (autocomplete + compile options)
#+begin_src emacs-lisp
;; ----------------------------
;; Irony mode pour autocompl√©tion intelligente C/C++
;; ----------------------------
(use-package irony
  :ensure t
  :config
  ;; Activer irony-mode automatiquement pour C et C++
  (add-hook 'c++-mode-hook 'irony-mode)
  (add-hook 'c-mode-hook 'irony-mode)
  
  ;; Configurer compilation options automatiquement
  (add-hook 'irony-mode-hook 'irony-cdb-autosetup-compile-options))

;; Int√©grer Irony √† Company
(use-package company-irony
  :ensure t
  :config
  (eval-after-load 'company
    '(add-to-list 'company-backends 'company-irony)))
#+end_src

#+RESULTS:
: t
** Org-Tempo
#+BEGIN_SRC emacs-lisp
(use-package org-tempo
  :ensure nil
  :demand t
  :config
  (dolist (item '(("sh"    . "src sh")                      ;; Shell script
                  ("el"    . "src emacs-lisp")              ;; Emacs Lisp
                  ("li"    . "src lisp")                    ;; Lisp
                  ("sc"    . "src scheme")                  ;; Scheme
                  ("py"    . "src python")                  ;; Python simple
                  ("pyp"   . "src python :results output")  ;; Python output (print)
                  ("pyv"   . "src python :results value")   ;; Python value (return)
                  ("pyr"   . "src python :results value")   ;; Python value (return)
                  ("pyi"   . "src python :results file")    ;; Python graph (image file)
                  ("yaml"  . "src yaml")                    ;; YAML
                  ("json"  . "src json")                    ;; JSON
                  ("cpp"   . "src C++")                     ;; C++
                  ("tex"   . "src latex")))                 ;; LaTeX
    (add-to-list 'org-structure-template-alist item)))
#+END_SRC

#+RESULTS:
: t

** R
*** Dans le terminal
+ sudo apt install r-base r-base-dev
+ sudo apt install build-essential libcurl4-openssl-dev \
                 libssl-dev libxml2-dev
+ sudo apt install -y \
    libpng-dev \
    libjpeg-dev \
    libtiff5-dev \
    libfreetype6-dev \
    libharfbuzz-dev \
    libfribidi-dev \
    libfontconfig1-dev \
    libcurl4-openssl-dev \
    libssl-dev \
    libxml2-dev \
    build-essential
*** Dans R
install.packages("ragg", repos = "https://cloud.r-project.org")
install.packages("tidyverse", repos = "https://cloud.r-project.org")
install.packages("tidyverse")
install.packages("data.table")
install.packages("ggplot2")
*** Dans init
#+begin_src emacs-lisp
(use-package ess
  :ensure t
  :init
  (setq ess-ask-for-ess-directory nil))
#+end_src

#+RESULTS:
: t
* Exportation
** Markdown

#+BEGIN_SRC emacs-lisp
(use-package ox-pandoc
  :ensure t)
#+END_SRC

#+RESULTS:

#+BEGIN_SRC emacs-lisp
(use-package markdown-mode
  :ensure t  ;; Installe automatiquement si non disponible
  :mode "\\.md\\'"  ;; Active markdown-mode pour les fichiers .md
  :config
  (setq markdown-command "pandoc") ;; Utilise Pandoc pour convertir Markdown
  (setq markdown-enable-math t) ;; Active le support des math√©matiques
  (setq markdown-fontify-code-blocks-natively t) ;; Syntaxe des blocs de code color√©e

  ;; Pr√©f√©rences pour une meilleure lisibilit√©
  (add-hook 'markdown-mode-hook #'visual-line-mode) ;; Active la coupure visuelle des lignes
  (add-hook 'markdown-mode-hook #'variable-pitch-mode) ;; Active une police proportionnelle
  (add-hook 'markdown-mode-hook #'visual-fill-column-mode) ;; Centre le texte

  ;; D√©sactiver les num√©ros de ligne dans markdown-mode
  (add-hook 'markdown-mode-hook (lambda () (display-line-numbers-mode -1))))
#+END_SRC

#+RESULTS:
: ((\.md\' . markdown-mode) (\.odc\' . archive-mode) (\.odf\' . archive-mode) (\.odi\' . archive-mode) (\.otp\' . archive-mode) (\.odp\' . archive-mode) (\.otg\' . archive-mode) (\.odg\' . archive-mode) (\.ots\' . archive-mode) (\.ods\' . archive-mode) (\.odm\' . archive-mode) (\.ott\' . archive-mode) (\.odt\' . archive-mode) (\.rhtml$ . web-mode) (\.php$ . web-mode) (\.html$ . web-mode) (\.erb$ . web-mode) (\.[pP][dD][fF]\' . pdf-view-mode) (\.hva\' . LaTeX-mode) (/crontab\(\.X*[[:alnum:]]+\)?\' . crontab-mode) (/git-rebase-todo\' . git-rebase-mode) (\.\(?:md\|markdown\|mkd\|mdown\|mkdn\|mdwn\)\' . markdown-mode) (\.gpg\(~\|\.~[0-9]+~\)?\' nil epa-file) (\.elc\' . elisp-byte-code-mode) (\.zst\' nil jka-compr) (\.dz\' nil jka-compr) (\.xz\' nil jka-compr) (\.lzma\' nil jka-compr) (\.lz\' nil jka-compr) (\.g?z\' nil jka-compr) (\.bz2\' nil jka-compr) (\.Z\' nil jka-compr) (\.vr[hi]?\' . vera-mode) (\(?:\.\(?:rbw?\|ru\|rake\|thor\|jbuilder\|rabl\|gemspec\|podspec\)\|/\(?:Gem\|Rake\|Cap\|Thor\|Puppet\|Berks\|Brew\|Vagrant\|Guard\|Pod\)file\)\' . ruby-mode) (\.re?st\' . rst-mode) (\.py[iw]?\' . python-mode) (\.m\' . octave-maybe-mode) (\.less\' . less-css-mode) (\.scss\' . scss-mode) (\.cs\' . csharp-mode) (\.awk\' . awk-mode) (\.\(u?lpc\|pike\|pmod\(\.in\)?\)\' . pike-mode) (\.idl\' . idl-mode) (\.java\' . java-mode) (\.m\' . objc-mode) (\.ii\' . c++-mode) (\.i\' . c-mode) (\.lex\' . c-mode) (\.y\(acc\)?\' . c-mode) (\.h\' . c-or-c++-mode) (\.c\' . c-mode) (\.\(CC?\|HH?\)\' . c++-mode) (\.[ch]\(pp\|xx\|\+\+\)\' . c++-mode) (\.\(cc\|hh\)\' . c++-mode) (\.\(bat\|cmd\)\' . bat-mode) (\.[sx]?html?\(\.[a-zA-Z_]+\)?\' . mhtml-mode) (\.svgz?\' . image-mode) (\.svgz?\' . xml-mode) (\.x[bp]m\' . image-mode) (\.x[bp]m\' . c-mode) (\.p[bpgn]m\' . image-mode) (\.tiff?\' . image-mode) (\.gif\' . image-mode) (\.png\' . image-mode) (\.jpe?g\' . image-mode) (\.webp\' . image-mode) (\.te?xt\' . text-mode) (\.[tT]e[xX]\' . tex-mode) (\.ins\' . tex-mode) (\.ltx\' . latex-mode) (\.dtx\' . doctex-mode) (\.org\' . org-mode) (\.dir-locals\(?:-2\)?\.el\' . lisp-data-mode) (\.eld\' . lisp-data-mode) (eww-bookmarks\' . lisp-data-mode) (tramp\' . lisp-data-mode) (/archive-contents\' . lisp-data-mode) (places\' . lisp-data-mode) (\.emacs-places\' . lisp-data-mode) (\.el\' . emacs-lisp-mode) (Project\.ede\' . emacs-lisp-mode) (\.\(scm\|sls\|sld\|stk\|ss\|sch\)\' . scheme-mode) (\.l\' . lisp-mode) (\.li?sp\' . lisp-mode) (\.[fF]\' . fortran-mode) (\.for\' . fortran-mode) (\.p\' . pascal-mode) (\.pas\' . pascal-mode) (\.\(dpr\|DPR\)\' . delphi-mode) (\.\([pP]\([Llm]\|erl\|od\)\|al\)\' . perl-mode) (Imakefile\' . makefile-imake-mode) (Makeppfile\(?:\.mk\)?\' . makefile-makepp-mode) (\.makepp\' . makefile-makepp-mode) (\.mk\' . makefile-gmake-mode) (\.make\' . makefile-gmake-mode) ([Mm]akefile\' . makefile-gmake-mode) (\.am\' . makefile-automake-mode) (\.texinfo\' . texinfo-mode) (\.te?xi\' . texinfo-mode) (\.[sS]\' . asm-mode) (\.asm\' . asm-mode) (\.css\' . css-mode) (\.mixal\' . mixal-mode) (\.gcov\' . compilation-mode) (/\.[a-z0-9-]*gdbinit . gdb-script-mode) (-gdb\.gdb . gdb-script-mode) ([cC]hange\.?[lL]og?\' . change-log-mode) ([cC]hange[lL]og[-.][0-9]+\' . change-log-mode) (\$CHANGE_LOG\$\.TXT . change-log-mode) (\.scm\.[0-9]*\' . scheme-mode) (\.[ckz]?sh\'\|\.shar\'\|/\.z?profile\' . sh-mode) (\.bash\' . sh-mode) (/PKGBUILD\' . sh-mode) (\(/\|\`\)\.\(bash_\(profile\|history\|log\(in\|out\)\)\|z?log\(in\|out\)\)\' . sh-mode) (\(/\|\`\)\.\(shrc\|zshrc\|m?kshrc\|bashrc\|t?cshrc\|esrc\)\' . sh-mode) (\(/\|\`\)\.\([kz]shenv\|xinitrc\|startxrc\|xsession\)\' . sh-mode) (\.m?spec\' . sh-mode) (\.m[mes]\' . nroff-mode) (\.man\' . nroff-mode) (\.sty\' . latex-mode) (\.cl[so]\' . latex-mode) (\.bbl\' . latex-mode) (\.bib\' . bibtex-mode) (\.bst\' . bibtex-style-mode) (\.sql\' . sql-mode) (\(acinclude\|aclocal\|acsite\)\.m4\' . autoconf-mode) (\.m[4c]\' . m4-mode) (\.mf\' . metafont-mode) (\.mp\' . metapost-mode) (\.vhdl?\' . vhdl-mode) (\.article\' . text-mode) (\.letter\' . text-mode) (\.i?tcl\' . tcl-mode) (\.exp\' . tcl-mode) (\.itk\' . tcl-mode) (\.icn\' . icon-mode) (\.sim\' . simula-mode) (\.mss\' . scribe-mode) (\.f9[05]\' . f90-mode) (\.f0[38]\' . f90-mode) (\.indent\.pro\' . fundamental-mode) (\.\(pro\|PRO\)\' . idlwave-mode) (\.srt\' . srecode-template-mode) (\.prolog\' . prolog-mode) (\.tar\' . tar-mode) (\.\(arc\|zip\|lzh\|lha\|zoo\|[jew]ar\|xpi\|rar\|cbr\|7z\|squashfs\|ARC\|ZIP\|LZH\|LHA\|ZOO\|[JEW]AR\|XPI\|RAR\|CBR\|7Z\|SQUASHFS\)\' . archive-mode) (\.oxt\' . archive-mode) (\.\(deb\|[oi]pk\)\' . archive-mode) (\`/tmp/Re . text-mode) (/Message[0-9]*\' . text-mode) (\`/tmp/fol/ . text-mode) (\.oak\' . scheme-mode) (\.sgml?\' . sgml-mode) (\.x[ms]l\' . xml-mode) (\.dbk\' . xml-mode) (\.dtd\' . sgml-mode) (\.ds\(ss\)?l\' . dsssl-mode) (\.js[mx]?\' . javascript-mode) (\.har\' . javascript-mode) (\.json\' . js-json-mode) (\.[ds]?va?h?\' . verilog-mode) (\.by\' . bovine-grammar-mode) (\.wy\' . wisent-grammar-mode) (\.erts\' . erts-mode) ([:/\]\..*\(emacs\|gnus\|viper\)\' . emacs-lisp-mode) (\`\..*emacs\' . emacs-lisp-mode) ([:/]_emacs\' . emacs-lisp-mode) (/crontab\.X*[0-9]+\' . shell-script-mode) (\.ml\' . lisp-mode) (\.ld[si]?\' . ld-script-mode) (ld\.?script\' . ld-script-mode) (\.xs\' . c-mode) (\.x[abdsru]?[cnw]?\' . ld-script-mode) (\.zone\' . dns-mode) (\.soa\' . dns-mode) (\.asd\' . lisp-mode) (\.\(asn\|mib\|smi\)\' . snmp-mode) (\.\(as\|mi\|sm\)2\' . snmpv2-mode) (\.\(diffs?\|patch\|rej\)\' . diff-mode) (\.\(dif\|pat\)\' . diff-mode) (\.[eE]?[pP][sS]\' . ps-mode) (\.\(?:PDF\|EPUB\|CBZ\|FB2\|O?XPS\|DVI\|OD[FGPST]\|DOCX\|XLSX?\|PPTX?\|pdf\|epub\|cbz\|fb2\|o?xps\|djvu\|dvi\|od[fgpst]\|docx\|xlsx?\|pptx?\)\' . doc-view-mode-maybe) (configure\.\(ac\|in\)\' . autoconf-mode) (\.s\(v\|iv\|ieve\)\' . sieve-mode) (BROWSE\' . ebrowse-tree-mode) (\.ebrowse\' . ebrowse-tree-mode) (#\*mail\* . mail-mode) (\.g\' . antlr-mode) (\.mod\' . m2-mode) (\.ses\' . ses-mode) (\.docbook\' . sgml-mode) (\.com\' . dcl-mode) (/config\.\(?:bat\|log\)\' . fundamental-mode) (/\.\(authinfo\|netrc\)\' . authinfo-mode) (\.\(?:[iI][nN][iI]\|[lL][sS][tT]\|[rR][eE][gG]\|[sS][yY][sS]\)\' . conf-mode) (\.la\' . conf-unix-mode) (\.ppd\' . conf-ppd-mode) (java.+\.conf\' . conf-javaprop-mode) (\.properties\(?:\.[a-zA-Z0-9._-]+\)?\' . conf-javaprop-mode) (\.toml\' . conf-toml-mode) (\.desktop\' . conf-desktop-mode) (/\.redshift\.conf\' . conf-windows-mode) (\`/etc/\(?:DIR_COLORS\|ethers\|.?fstab\|.*hosts\|lesskey\|login\.?de\(?:fs\|vperm\)\|magic\|mtab\|pam\.d/.*\|permissions\(?:\.d/.+\)?\|protocols\|rpc\|services\)\' . conf-space-mode) (\`/etc/\(?:acpid?/.+\|aliases\(?:\.d/.+\)?\|default/.+\|group-?\|hosts\..+\|inittab\|ksysguarddrc\|opera6rc\|passwd-?\|shadow-?\|sysconfig/.+\)\' . conf-mode) ([cC]hange[lL]og[-.][-0-9a-z]+\' . change-log-mode) (/\.?\(?:gitconfig\|gnokiirc\|hgrc\|kde.*rc\|mime\.types\|wgetrc\)\' . conf-mode) (/\.mailmap\' . conf-unix-mode) (/\.\(?:asound\|enigma\|fetchmail\|gltron\|gtk\|hxplayer\|mairix\|mbsync\|msmtp\|net\|neverball\|nvidia-settings-\|offlineimap\|qt/.+\|realplayer\|reportbug\|rtorrent\.\|screen\|scummvm\|sversion\|sylpheed/.+\|xmp\)rc\' . conf-mode) (/\.\(?:gdbtkinit\|grip\|mpdconf\|notmuch-config\|orbital/.+txt\|rhosts\|tuxracer/options\)\' . conf-mode) (/\.?X\(?:default\|resource\|re\)s\> . conf-xdefaults-mode) (/X11.+app-defaults/\|\.ad\' . conf-xdefaults-mode) (/X11.+locale/.+/Compose\' . conf-colon-mode) (/X11.+locale/compose\.dir\' . conf-javaprop-mode) (\.~?[0-9]+\.[0-9][-.0-9]*~?\' nil t) (\.\(?:orig\|in\|[bB][aA][kK]\)\' nil t) ([/.]c\(?:on\)?f\(?:i?g\)?\(?:\.[a-zA-Z0-9._-]+\)?\' . conf-mode-maybe) (\.[1-9]\' . nroff-mode) (\.art\' . image-mode) (\.avs\' . image-mode) (\.bmp\' . image-mode) (\.cmyk\' . image-mode) (\.cmyka\' . image-mode) (\.crw\' . image-mode) (\.dcr\' . image-mode) (\.dcx\' . image-mode) (\.dng\' . image-mode) (\.dpx\' . image-mode) (\.fax\' . image-mode) (\.heic\' . image-mode) (\.hrz\' . image-mode) (\.icb\' . image-mode) (\.icc\' . image-mode) (\.icm\' . image-mode) (\.ico\' . image-mode) (\.icon\' . image-mode) (\.jbg\' . image-mode) (\.jbig\' . image-mode) (\.jng\' . image-mode) (\.jnx\' . image-mode) (\.miff\' . image-mode) (\.mng\' . image-mode) (\.mvg\' . image-mode) (\.otb\' . image-mode) (\.p7\' . image-mode) (\.pcx\' . image-mode) (\.pdb\' . image-mode) (\.pfa\' . image-mode) (\.pfb\' . image-mode) (\.picon\' . image-mode) (\.pict\' . image-mode) (\.rgb\' . image-mode) (\.rgba\' . image-mode) (\.tga\' . image-mode) (\.wbmp\' . image-mode) (\.webp\' . image-mode) (\.wmf\' . image-mode) (\.wpg\' . image-mode) (\.xcf\' . image-mode) (\.xmp\' . image-mode) (\.xwd\' . image-mode) (\.yuv\' . image-mode) (\.tgz\' . tar-mode) (\.tbz2?\' . tar-mode) (\.txz\' . tar-mode) (\.tzst\' . tar-mode) (\.drv\' . LaTeX-mode))

#+BEGIN_SRC emacs-lisp
(use-package visual-fill-column
  :ensure t
  :config
  (setq visual-fill-column-width 80
        visual-fill-column-center-text t))
#+END_SRC

#+RESULTS:
: t

#+BEGIN_SRC emacs-lisp
(with-eval-after-load 'org
  (require 'ox-md)) ;; Charge l'exportateur Markdown
#+END_SRC

#+RESULTS:
: ox-md

** Jupyter-Notebook (ipynb)
*** Configuration ox-ipynb
#+BEGIN_SRC emacs-lisp
;; git clone https://github.com/jkitchin/ox-ipynb.git
  ;; Ajouter ox-ipynb au chemin de chargement
  (add-to-list 'load-path "~/.emacs.d/ox-ipynb/")

  ;; Charger le paquet ox-ipynb
  (require 'ox-ipynb)

  ;; Ajouter ipynb aux backends d'exportation sans supprimer les autres
  (add-to-list 'org-export-backends 'ipynb)

  ;; Message de debug pour confirmer le chargement
  (message "ox-ipynb charg√© ? %s" (featurep 'ox-ipynb))
#+END_SRC

#+RESULTS:
: ox-ipynb charg√© ? t

* Fen√™tre
** Ajuster les fen√™tres

#+BEGIN_SRC emacs-lisp
;; √âquilibrer automatiquement les fen√™tres apr√®s suppression
(advice-add #'delete-window
            :after #'(lambda (&rest _)
                       (balance-windows))) ;; Appelle 'balance-windows' apr√®s 'delete-window'

;; √âquilibrer les fen√™tres et se d√©placer apr√®s une division
(advice-add #'split-window
            :after #'(lambda (&rest _)
                       (balance-windows) ;; √âquilibre les fen√™tres
                       (other-window 1))) ;; Se d√©place vers la nouvelle fen√™tre
#+END_SRC

#+RESULTS:

essai

** Marge entre les fen√™tres

#+BEGIN_SRC emacs-lisp
;; Load up doom-palenight for the System Crafters look
;(load-theme 'doom-palenight t)
#+END_SRC

#+RESULTS:
: t

** D√©sactiver la num√©rotation des lignes pour Org Mode
;#+BEGIN_SRC emacs-lisp
;(add-hook 'org-mode-hook (lambda () (display-line-numbers-mode -1)))
;#+END_SRC
;
;#+RESULTS:
;| (lambda nil (display-line-numbers-mode -1)) | org-tempo-setup | toc-org-enable | org-superstar-mode | #[0 \301\211\207 [imenu-create-index-function org-imenu-get-tree] 2] | turn-on-org-cdlatex | rainbow-mode | org-indent-mode | #[0 \300\301\302\303\304$\207 [add-hook change-major-mode-hook org-fold-show-all append local] 5] | #[0 \300\301\302\303\304$\207 [add-hook change-major-mode-hook org-babel-show-result-all append local] 5] | org-babel-result-hide-spec | org-babel-hide-all-hashes |

** Naviguer entre les fenetres
#+begin_src emacs-lisp
 (use-package winum
  :ensure t
  :config
  (winum-mode)

  (global-set-key (kbd "C-c 1")
                  (lambda () (interactive) (winum-select-window-by-number 1)))
  (global-set-key (kbd "C-c 2")
                  (lambda () (interactive) (winum-select-window-by-number 2)))
  (global-set-key (kbd "C-c 3")
                  (lambda () (interactive) (winum-select-window-by-number 3)))
  (global-set-key (kbd "C-c 4")
                  (lambda () (interactive) (winum-select-window-by-number 4))))
#+end_src

#+RESULTS:
: t

* Cheat sheet sur la capture
*** Pour capture
| Code     | Nom       | Fichier cible | Description                          | Exemple de note g√©n√©r√©e                                   |
|----------+-----------+---------------+--------------------------------------+-----------------------------------------------------------|
| SPC m  b | Brouillon | brouillon.org | Note rapide ou brouillon             | * TODO Relire le chapitre 3\n 2025-12-08 Tue 14:30        |
| SPC m  p | Personal  | personal.org  | Notes personnelles                   | * TODO Acheter du lait\n 2025-12-08 Tue 14:31             |
| SPC m  w | Work      | work.org      | Notes li√©es au travail               | * TODO Envoyer le rapport\n 2025-12-08 Tue 14:32          |
| SPC m  s | School    | school.org    | Notes scolaires ou devoirs           | * TODO Pr√©parer le devoir de maths\n 2025-12-08 Tue 14:33 |
| SPC m  j | Journal   | journal.org   | Entr√©e de journal organis√©e par date | * R√©flexion du jour\nEntered on 2025-12-08 Tue 14:34      |
|----------+-----------+---------------+--------------------------------------+-----------------------------------------------------------|
*** Pour timestamp
| √âl√©ment                  | Commande / Template                      | Description / Usage                                                                           |
|--------------------------+------------------------------------------+-----------------------------------------------------------------------------------------------|
| Timestamp actif          | C-c .                                    | Ins√®re un timestamp actif <YYYY-MM-DD> ou <YYYY-MM-DD HH:MM>. Appara√Æt dans l‚Äôagenda.         |
| Timestamp inactif        | C-c !                                    | Ins√®re un timestamp inactif [YYYY-MM-DD]. R√©f√©rence historique, n‚Äôappara√Æt pas dans l‚Äôagenda. |
| D√©placer timestamp actif | S-<left> / S-<right> / S-<up> / S-<down> | D√©place la date du timestamp actif d‚Äôun jour ou d‚Äôun mois.                                    |
| Deadline                 | C-c C-d                                  | D√©finit la date limite de la t√¢che. Appara√Æt dans l‚Äôagenda avec rappel.                       |
| Schedule                 | C-c C-s                                  | D√©finit la date de d√©but de la t√¢che. Appara√Æt dans l‚Äôagenda √† partir de cette date.          |
| Intervalle               | C-c C-x C-i                              | Ins√®re un intervalle de dates <2025-12-08 10:00-12:00>.                                       |
|--------------------------+------------------------------------------+-----------------------------------------------------------------------------------------------|

| Type de TODO                       | Exemple Org-mode                                 | Comportement dans l‚Äôagenda                                                           |
|------------------------------------+--------------------------------------------------+---------------------------------------------------------------------------------------|
| TODO simple (timestamp actif)      | * TODO Pr√©parer le rapport <2025-12-08 Mon>      | La t√¢che appara√Æt uniquement √† la date du timestamp.                                  |
| TODO avec SCHEDULED                | * TODO Pr√©parer le rapport                       | La t√¢che appara√Æt √† partir de la date scheduled et reste visible jusqu‚Äô√† ce qu‚Äôelle   |
|                                    |   SCHEDULED: <2025-12-05 Fri>                    | soit faite.                                                                          |
| TODO avec DEADLINE                 | * TODO Pr√©parer le rapport                       | La t√¢che doit √™tre termin√©e au plus tard √† cette date ; alerte si en retard.          |
|                                    |   DEADLINE: <2025-12-08 Mon>                     |                                                                                       |
| TODO complet (Scheduled + Deadline)| * TODO Pr√©parer le rapport                       | La t√¢che appara√Æt √† partir de la date scheduled et doit √™tre termin√©e avant la        |
|                                    |   SCHEDULED: <2025-12-05 Fri>                    | deadline.                                                                             |
|                                    |   DEADLINE: <2025-12-08 Mon>                     |                                                                                       |
|------------------------------------+--------------------------------------------------+---------------------------------------------------------------------------------------|
C-c C-t  permet de basculer entre DONE et TODO.

| Type de r√©p√©tition  | Syntaxe | Exemple initial             | Comment √ßa se comporte si la t√¢che n‚Äôest pas faite                                                         |
|---------------------+---------+-----------------------------+------------------------------------------------------------------------------------------------------------|
| Standard            |     +1d | <2025-12-08 Mon 08:00 +1d>  | Les jours manqu√©s ne sont pas rattrap√©s. La prochaine occurrence reste fix√©e depuis la date initiale.      |
| Bas√© sur compl√©tion |    ++1d | <2025-12-08 Mon 08:00 ++1d> | La r√©p√©tition se calcule depuis la date o√π la t√¢che est marqu√©e DONE. Les jours manqu√©s sont ignor√©s.      |
| Rattrapage          |    .+1d | <2025-12-08 Mon 08:00 .+1d> | Toutes les occurrences manqu√©es apparaissent dans l‚Äôagenda. La prochaine occurrence part de la compl√©tion. |
|---------------------+---------+-----------------------------+------------------------------------------------------------------------------------------------------------|
* Org mode configuration
** Configuration Org-mode
#+BEGIN_SRC emacs-lisp
(require 'org)
(require 'org-agenda)
(require 'org-capture)
(require 'org-mobile)

;; TODO: Replace with C-c o a like <leader>oa (action open agenda)

;(global-set-key (kbd "C-c l") #'org-store-link)
;(global-set-key (kbd "C-c a") #'org-agenda)
;(global-set-key (kbd "C-c c") #'org-capture)
#+END_SRC

#+RESULTS:
: org-mobile

** R√©pertoire de base
#+BEGIN_SRC emacs-lisp
;; windows home directory
;; NOTE: For some reason $HOME or ~ doesn't work on Windows even if we have wsl installed..
(if (eq system-type 'windows-nt)
	(setq home-directory (getenv "USERPROFILE"))
	(setq home-directory "~"))

;; (setq org-directory (concat home-directory "/Notes/org"))
(setq org-directory (concat home-directory "/.emacs.d/Notes/orgfiles"))
#+END_SRC

#+RESULTS:
: ~/.emacs.d/Notes/orgfiles

** Options d'affichage
#+BEGIN_SRC emacs-lisp
(setopt org-startup-indented t
		org-ellipsis " ‚ñº"
		org-hide-emphasis-markers t
		org-pretty-entities t
		org-src-fontify-natively t
		org-fontify-whole-heading-line t
		org-fontify-quote-and-verse-blocks t
		ord-edit-src-content-indentation 0
		org-hide-block-startup nil
		org-src-tab-acts-natively t
		org-src-preserve-indentation nil
		;; org-startup-folded t
		org-cycle-separator-lines 2
		org-hide-leading-stars t
		org-highlight-latex-and-related '(native)
		org-goto-auto-isearch nil)
(setq org-log-done 'time)
(setq org-log-into-drawer t)
(setq org-startup-folded t)
#+END_SRC

#+RESULTS:
: t

** Fichiers agenda
#+BEGIN_SRC emacs-lisp
  (setq org-agenda-files (list (concat org-directory "/personal.org")
                 (concat org-directory "/work.org")
                 (concat org-directory "/school.org")
                 (concat org-directory "/journal.org")))

  (setq diary-file (concat org-directory "/anniversaires.org"))
  (setq org-deadline-warning-days 7)
  (setq org-agenda-include-diary t) ; NOTE: We are including calendar holidays in diary.org
  (setq org-agenda-span 7)
  (setq org-agenda-start-on-weekday nil)
  (setq org-agenda-start-day "-1d")
  (setq org-agenda-start-with-log-mode t)
  ;; TODO: org-agenda-custom-commands
  (setq org-agenda-window-setup 'only-window)
#+END_SRC

#+RESULTS:
: only-window

** Capture
#+BEGIN_SRC emacs-lisp
      (setq org-default-notes-file (concat org-directory "/brouillon.org"))
      (setq org-capture-templates
          '(("b" "Brouillon" entry (file (lambda () (concat org-directory "/brouillon.org")))
           "* TODO %?\n %U\n" :empty-lines 1)
          ("p" "Personal" entry (file (lambda () (concat org-directory "/personal.org")))
           "* TODO %?\n %U\n" :empty-lines 1)
          ("w" "Work" entry (file (lambda () (concat org-directory "/work.org")))
           "* TODO %?\n %U\n" :empty-lines 1)
          ("s" "School" entry (file (lambda () (concat org-directory "/school.org")))
           "* TODO %?\n %U\n" :empty-lines 1)
           ("j" "Journal" entry (file+datetree (lambda () (concat org-directory "/journal.org")))
         "* %?\nEntered on %U\n" :empty-lines 1)))
#+END_SRC

#+RESULTS:
| b | Brouillon | entry | (file (lambda nil (concat org-directory /brouillon.org))) | * TODO %? |

** MobileOrg
#+BEGIN_SRC emacs-lisp
(setq org-mobile-directory (concat home-directory "/Dropbox/Apps/MobileOrg"))
;; (setq org-mobile-directory (concat home-directory "/Dropbox/Applications/MobileOrg"))
(setq org-mobile-use-encryption nil)
;; (setq org-mobile-encryption-password "")
;; (setq org-mobile-files (list ()))
(setq org-mobile-force-id-on-agenda-items nil)
(setq org-mobile-inbox-for-pull (concat org-directory "/mobile-flagged.org"))
#+END_SRC

#+RESULTS:
: ~/Notes/orgfiles/mobile-flagged.org

** Org super agenda
#+BEGIN_SRC emacs-lisp
;; --------------------------------------------------------
;; Org Super Agenda : installation et configuration
;; --------------------------------------------------------
(use-package org-super-agenda
  :ensure t
  :config
  (org-super-agenda-mode))

;; D√©sactiver les raccourcis clavier dans les headers
(setq org-super-agenda-header-map (make-sparse-keymap))

;; Configuration g√©n√©rale de l'agenda
(setq org-agenda-start-on-weekday nil)       ;; Commencer n'importe quel jour
(setq org-agenda-show-all-dates nil)        ;; Masquer les dates vides
(setq org-agenda-format-date "%A")          ;; Afficher le nom du jour
(setq org-agenda-block-separator nil)       ;; Pas de s√©paration entre les blocs

;; D√©sactiver la grille horaire
(setq org-agenda-show-current-time-in-grid nil)
(setq org-agenda-use-time-grid nil)
#+END_SRC

#+RESULTS:

** Roam
#+BEGIN_SRC text
;; C-c n l : ouvrir/fermer la sidebar Org-roam
;; C-c n f : chercher ou cr√©er une note
;; C-c n g : ouvrir le graphe visuel dans le navigateur
;; C-c n i : ins√©rer un lien vers une autre note
;; C-c n c : capturer une nouvelle note
;; C-c n t : ajouter un tag √† une note
;; C-c n a : ajouter un alias √† une note
;; C-c n j : cr√©er ou ouvrir la note du jour (Daily)
;; C-c n e : rechercher un fichier Org-roam via consult
;; C-c n b : afficher les backlinks
;; C-c n B : backlinks r√©cursifs
;; C-c n l : liens sortants
;; C-c n r : rechercher dans toutes les notes (Consult)
#+END_SRC

#+BEGIN_SRC emacs-lisp
  (use-package org-roam
    :ensure t
    :custom
    (org-roam-directory (file-truename "~/.emacs.d/Notes/roam/"))
    :bind (("C-c n l" . org-roam-buffer-toggle)
           ("C-c n f" . org-roam-node-find)
           ("C-c n g" . org-roam-ui-open)
           ("C-c n i" . org-roam-node-insert)
           ("C-c n c" . org-roam-capture)
           ("C-c n t" . org-roam-tag-add)
           ("C-c n a" . org-roam-alias-add)
           ;; Dailies
           ("C-c n j" . org-roam-dailies-capture-today))
    :config
    ;; If you're using a vertical completion framework, you might want a more informative completion interface
    (setq org-roam-node-display-template
          (concat "${title:*} " (propertize "${tags:10}" 'face 'org-tag)))
    (org-roam-db-autosync-mode)
    ;; If using org-roam-protocol
    (require 'org-roam-protocol))
#+END_SRC

#+RESULTS:
: org-roam-dailies-capture-today

#+BEGIN_SRC emacs-lisp
(setq org-roam-db-location "~/.cache/org-roam.db")
#+END_SRC

#+RESULTS:
: ~/.cache/org-roam.db

#+BEGIN_SRC emacs-lisp
(use-package consult-org-roam
  :ensure t
  :after org-roam
  :init
  (require 'consult-org-roam)
  ;; Activate the minor mode
  (consult-org-roam-mode 1)
  :custom
  ;; Use `ripgrep' for searching with `consult-org-roam-search'
  (consult-org-roam-grep-func #'consult-ripgrep)
  ;; Configure a custom narrow key for `consult-buffer'
  (consult-org-roam-buffer-narrow-key ?r)
  ;; Display org-roam buffers right after non-org-roam buffers
  ;; in consult-buffer (and not down at the bottom)
  (consult-org-roam-buffer-after-buffers t)
  :bind
  ;; Define some convenient keybindings as an addition
  ("C-c n e" . consult-org-roam-file-find)
  ("C-c n b" . consult-org-roam-backlinks)
  ("C-c n B" . consult-org-roam-backlinks-recursive)
  ("C-c n l" . consult-org-roam-forward-links)
  ("C-c n r" . consult-org-roam-search))
#+END_SRC

#+RESULTS:
: consult-org-roam-search

#+BEGIN_SRC emacs-lisp
(use-package org-roam-ui
  :ensure t)
#+END_SRC

#+RESULTS:

** Exemple
#+BEGIN_SRC text
Exemple de fonctionnement d'Org-roam

1Ô∏è‚É£ Cr√©er ta premi√®re note
- Taper C-c n f
- Saisir le titre : "Projet Alpha"
- Emacs cr√©e le fichier :
  ~/.emacs.d/Notes/roam/projet-alpha.org
- Contenu initial :
  #+title: Projet Alpha
  #+date: 2025-10-29

2Ô∏è‚É£ Ajouter du contenu
- Dans projet-alpha.org :
  Nous devons cr√©er une application web pour g√©rer les t√¢ches.

  Id√©es :
  - Utiliser Emacs pour les notes.
  - Pr√©voir un syst√®me de backlog.

  Voir aussi :
  - [[Projet Beta]]

3Ô∏è‚É£ Cr√©er une note li√©e (backlink)
- Taper C-c n f
- Nouvelle note : "Projet Beta"
- Contenu :
  #+title: Projet Beta
  Cette note est li√©e √† Projet Alpha.

4Ô∏è‚É£ Ins√©rer un lien dans une autre note
- Dans Projet Alpha, positionner le curseur et taper C-c n i
- Saisir le nom de la note cible : "Projet Beta"
- Lien cr√©√© :
  [[id:1234567890abcdef][Projet Beta]]
- Ouvrir avec C-c C-o

5Ô∏è‚É£ Voir les backlinks
- Dans Projet Beta, taper C-c n b
- Affiche toutes les notes qui pointent vers Projet Beta
  (ici : Projet Alpha)

6Ô∏è‚É£ Graphe visuel (org-roam-ui)
- Taper C-c n g
- Un navigateur s'ouvre avec un graphe interactif :
  Projet Alpha ‚Üí Projet Beta
- Permet de visualiser le r√©seau des notes

7Ô∏è‚É£ Notes journali√®res
- Taper C-c n j
- Emacs cr√©e le fichier :
  ~/.emacs.d/Notes/roam/daily/2025-10-29.org
- Noter les t√¢ches et id√©es du jour
- Relier facilement aux autres notes

‚úÖ R√©sum√© rapide des commandes

| Action                     | Commande       | R√©sultat                                      |
|-----------------------------|----------------|-----------------------------------------------|
| Cr√©er ou chercher une note  | C-c n f        | Fichier .org cr√©√© ou ouvert                   |
| Ins√©rer un lien             | C-c n i        | Lien interne cr√©√©                             |
| Ajouter un tag              | C-c n t        | Tag ajout√© √† la note                           |
| Ajouter un alias            | C-c n a        | Alias pour retrouver la note                  |
| Notes journali√®res          | C-c n j        | Note du jour cr√©√©e                             |
| Backlinks                   | C-c n b        | Liste des notes pointant vers cette note      |
| Graphe visuel               | C-c n g        | Graphe interactif dans le navigateur          |
#+END_SRC

* mu4e
** Chaet sheet
| Action                        | Touche / Commande | Exemple concret                | R√©sultat                     |
|-------------------------------+-------------------+--------------------------------+------------------------------|
| Lancer mu4e                   | M-x mu4e          | M-x mu4e                       | Ouvre l‚Äôinterface mail       |
| Aller dans l‚ÄôINBOX            | Ji                | Ji ‚Üí /Gmail/INBOX              | Affiche les mails re√ßus      |
| Rechercher un mail            | s                 | s from:google subject:security | Liste des mails Google       |
| Voir mails non lus            | bu                | bu                             | Affiche tous les non lus     |
| Lire un mail                  | RET               | RET sur un message             | Ouvre le mail                |
| Aller au mail suivant         | n                 | n                              | Message suivant              |
| Aller au mail pr√©c√©dent       | p                 | p                              | Message pr√©c√©dent            |
| R√©pondre                      | r                 | r                              | R√©pond √† l‚Äôexp√©diteur        |
| R√©pondre √† tous               | R                 | R                              | R√©pond √† tous                |
| Nouveau mail                  | C                 | C                              | Ouvre le buffer de r√©daction |
| Envoyer un mail               | C-c C-c           | √âcrire ‚Üí C-c C-c               | Envoi via SMTP               |
| Marquer comme lu              | !                 | !                              | Marque le mail comme lu      |
| Marquer non lu                | ?                 | ?                              | Marque non lu                |
| Supprimer (Gmail Trash)       | d                 | d                              | D√©place vers Corbeille       |
| Archiver                      | a                 | a                              | Archive le mail              |
| Ajouter un drapeau            | f                 | f                              | Ajoute un flag               |
| T√©l√©charger pi√®ce jointe      | A s               | A s                            | Sauve la pi√®ce jointe        |
| Voir pi√®ces jointes           | A                 | A                              | Liste des PJ                 |
| Changer de dossier            | J                 | J ‚Üí s√©lectionner un dossier    | Navigation rapide            |
| Mettre √† jour les mails       | u                 | u                              | Sync + index                 |
| Quitter mu4e                  | q                 | q                              | Quitte mu4e                  |
| Sortir de la redaction(mail)  | C-c C-k           |                                |                              |
| Enregistrer dans le brouillon | C-c C-d           |                                |                              |

** Config
#+begin_src emacs-lisp
(require 'mu4e)

;; Raccourci pour lancer mu4e
(global-set-key (kbd "C-x t") #'mu4e)

;; Adresse r√©elle
(setq user-mail-address "berthekassime@gmail.com"
      user-full-name "Kassim")

(setq mu4e-user-mail-address-list
      '("berthekassime@gmail.com"))

;; Comportement g√©n√©ral
(setq mu4e-context-policy 'pick-first
      mu4e-confirm-quit nil
      message-kill-buffer-on-exit t
      mu4e-view-show-addresses t)

;; Maildir
(setq mu4e-maildir "~/Maildir")

;; Raccourcis dossiers
(setq mu4e-maildir-shortcuts
      '(("/Gmail/INBOX" . ?i)
        ("/Gmail/[Gmail]/Sent Mail" . ?s)
        ("/Gmail/[Gmail]/Trash" . ?t)))

;; Dossiers Gmail
(setq mu4e-drafts-folder "/Gmail/[Gmail]/Drafts"
      mu4e-sent-folder   "/Gmail/[Gmail]/Sent Mail"
      mu4e-trash-folder  "/Gmail/[Gmail]/Trash"
      mu4e-refile-folder "/Gmail/[Gmail]/All Mail")

;; Pi√®ces jointes
(setq mu4e-attachment-dir "~/Downloads/MailAttachments")
#+end_src

#+RESULTS:
: ~/Downloads/MailAttachments

#+begin_src emacs-lisp
(add-to-list 'load-path "/usr/share/emacs/site-lisp/elpa-src/mu4e-1.10.8")
(require 'mu4e)
#+end_src

#+RESULTS:
: mu4e


#+begin_src emacs-lisp
(setq mu4e-get-mail-command "~/.emacs.d/mail-sync.sh")
#+end_src

#+RESULTS:
: ~/.emacs.d/mail-sync.sh

#+begin_src emacs-lisp
;; Ne pas afficher la fen√™tre associ√©e aux commandes shell asynchrones
(add-to-list 'display-buffer-alist
             (cons "\\*Async Shell Command\\*.*"
                   (cons #'display-buffer-no-window nil)))
#+end_src

#+RESULTS:
| \*Async Shell Command\*.*                                                                                                                                                                       | display-buffer-no-window                               |                             |                       |
| (lambda (buffer-or-name _) (let ((buffer (get-buffer buffer-or-name))) (with-current-buffer buffer (or (eq major-mode 'vterm-mode) (string-prefix-p vterm-buffer-name (buffer-name buffer)))))) | (display-buffer-reuse-window display-buffer-at-bottom) | (reusable-frames . visible) | (window-height . 0.4) |

#+begin_src emacs-lisp
;; Notifications desktop et mode-line pour mu4e
(use-package mu4e-alert
  :ensure t
  :after mu4e

  ;; Param√©trage utilisateur
  :custom
  ;; Emails consid√©r√©s comme "int√©ressants"
  (mu4e-alert-interesting-mail-query
   "flag:unread maildir:/INBOX AND NOT flag:trashed")

  ;; Style de notification (libnotify pour Linux)
  (mu4e-alert-default-style 'libnotify)

  ;; Activation automatique apr√®s le d√©marrage d‚ÄôEmacs
  :hook
  (after-init . mu4e-alert-enable-mode-line-display)
  (after-init . mu4e-alert-enable-notifications)

  :init
  ;; Timer global pour √©viter les doublons
  (defvar perso--mu4e-timer nil
    "Timer utilis√© pour rafra√Æchir mu4e et afficher les notifications.")

  (defun perso--mu4e-check-mail ()
    "Met √† jour les emails et affiche les notifications."
    (mu4e-update-mail-and-index t))

  (defun perso--mu4e-start ()
    "D√©marrer mu4e et lancer la v√©rification automatique des emails."
    (interactive)
    ;; Lancement silencieux de mu4e (requis mu >= 1.3.8)
    (mu4e t)

    ;; √âvite de lancer plusieurs timers
    (when (timerp perso--mu4e-timer)
      (cancel-timer perso--mu4e-timer))

    ;; V√©rification imm√©diate puis toutes les 5 minutes
    (setq perso--mu4e-timer
          (run-with-timer 0 300 #'perso--mu4e-check-mail))

    (message "mu4e : notifications activ√©es (rafra√Æchissement toutes les 5 min)"))

  :bind
  ;; F2 transforme Emacs en client mail
  ("<f2>" . perso--mu4e-start))
#+end_src

#+RESULTS:
: perso--mu4e-start

#+begin_src emacs-lisp
;; ------------------------------------------------------------
;; Envoi des mails via msmtp (mu4e / message-mode)
;; ------------------------------------------------------------
(setq send-mail-function 'sendmail-send-it
      message-send-mail-function 'sendmail-send-it
      sendmail-program "/usr/bin/msmtp"
      mail-specify-envelope-from t
      mail-envelope-from 'header)

;; Authentification via gpg (si n√©cessaire)
(setq auth-sources '("~/emails.gpg"))
#+end_src

#+RESULTS:
| ~/emails.gpg |


#+begin_src emacs-lisp
(setq mu4e-maildir-shortcuts
'( ("/INBOX"             . ?i)
("/Gmail/Sent Mail"   . ?s)
("/Gmail/Trash"       . ?t)
("/Gmail/Drafts"      . ?d)
("/Gmail/Important"   . ?p)
("/Gmail/Spam"        . ?x)
("/Gmail/All Mail"    . ?a) ))
#+end_src

#+RESULTS:
: ((/INBOX . 105) (/Gmail/Sent Mail . 115) (/Gmail/Trash . 116) (/Gmail/Drafts . 100) (/Gmail/Important . 112) (/Gmail/Spam . 120) (/Gmail/All Mail . 97))

* Affichage des num√©ros de lignes relatives
#+BEGIN_SRC emacs-lisp
;; Activer l'affichage des num√©ros de lignes relatifs globalement
(setq display-line-numbers-type 'relative)
(global-display-line-numbers-mode t)

;; Activer uniquement dans certains modes si souhait√©
;; (add-hook 'prog-mode-hook (lambda ()
;;                             (setq display-line-numbers 'relative)
;;                             (display-line-numbers-mode t)))

;; D√©sactiver dans certains modes comme org, term, eshell
;(dolist (mode '(org-mode-hook term-mode-hook eshell-mode-hook))
;  (add-hook mode (lambda () (display-line-numbers-mode 0))))
#+END_SRC

#+RESULTS:
: t

* Visualisation des modification du fichier
#+begin_src emacs-lisp
(use-package git-gutter
  :ensure t
  :config
  (global-git-gutter-mode +1)
  (setq git-gutter:modified-sign "‚â†")   ;; signe pour les lignes modifi√©es
  (setq git-gutter:added-sign    "+") ;; signe pour les lignes ajout√©es
  (setq git-gutter:deleted-sign  "-") ;; signe pour les lignes supprim√©es
  (set-face-foreground 'git-gutter:modified "orange")
  (set-face-foreground 'git-gutter:added    "green")
  (set-face-foreground 'git-gutter:deleted  "red"))
#+end_src

#+RESULTS:
: t

* Raccourcis g√©n√©raux
** Activer le Leader
| Leader | Mode            | Comportement                           |
|--------+-----------------+----------------------------------------|
| SPC    | Normal / Visual | Active le leader                       |
| M-SPC  | Insert / Emacs  | Active le leader sans ins√©rer d‚Äôespace |
|--------+-----------------+----------------------------------------|
** Commandes
| Raccourci                   | Description                                             |
|-----------------------------+---------------------------------------------------------|
| *A.I.*                        |                                                         |
| a                           | Menu A.I.                                               |
| a a                         | Demander √† Ellama sur la s√©lection                      |
| a e                         | Menu Ellama ‚Äì am√©liorer                                 |
| a e g                       | Am√©liorer la grammaire avec Ellama                      |
| a e w                       | Am√©liorer la formulation avec Ellama                    |
| a i                         | Chat avec Ellama                                        |
| a p                         | S√©lectionner le fournisseur Ellama                      |
| a s                         | R√©sumer la s√©lection avec Ellama                        |
| a t                         | Traduire la s√©lection avec Ellama                       |
|                             |                                                         |
| *Bookmarks / Buffers*         |                                                         |
| b                           | Menu Bookmarks & Buffers                                |
| b b                         | Aller √† un buffer                                       |
| b c                         | Cr√©er une copie indirecte dans un split                 |
| b C                         | Cloner un buffer indirect dans une nouvelle fen√™tre     |
| b d                         | Supprimer un bookmark                                   |
| b f                         | Fermer le buffer actuel                                 |
| b i                         | Ibuffer                                                 |
| b j                         | Buffer pr√©c√©dent                                        |
| b k                         | Buffer suivant                                          |
| b K                         | Fermer plusieurs buffers                                |
| b l                         | Lister les bookmarks                                    |
| b m                         | D√©finir un bookmark                                     |
| b r                         | Recharger le buffer                                     |
| b R                         | Renommer le buffer                                      |
| b s                         | Sauvegarder le buffer                                   |
| b S                         | Sauvegarder plusieurs buffers                           |
| b w                         | Sauvegarder les bookmarks dans le fichier bookmark      |
|                             |                                                         |
| *Capture*                     |                                                         |
| m c                         | Menu Capture                                            |
| m c b                       | Capture ‚Äì mod√®le b                                      |
| m c j                       | Capture ‚Äì mod√®le j                                      |
| m c p                       | Capture ‚Äì mod√®le p                                      |
| m c s                       | Capture ‚Äì mod√®le s                                      |
| m c w                       | Capture ‚Äì mod√®le w                                      |
|                             |                                                         |
| *Dates / Deadlines*           |                                                         |
| m d                         | Menu Dates & Deadlines                                  |
| m d d                       | D√©finir un deadline                                     |
| m d i                       | Ins√©rer un timestamp inactif                            |
| m d n                       | Timestamp -1 jour                                       |
| m d p                       | Timestamp +1 jour                                       |
| m d r                       | Rapport de clocking                                     |
| m d s                       | Programmer (schedule)                                   |
| m d t                       | Ins√©rer un timestamp                                    |
|                             |                                                         |
| *Ediff / Eshell / Eval / EWW* |                                                         |
| e                           | Menu Ediff / Eshell / Eval / EWW                        |
| e b                         | Eval buffer (√©valuer le buffer)                         |
| e d                         | Eval defun (√©valuer la fonction sous ou apr√®s le point) |
| e e                         | Eval expression (√©valuer une expression elisp)          |
| e f                         | Ediff fichiers                                          |
| e F                         | Ediff trois fichiers                                    |
| e h                         | Historique Eshell                                       |
| e l                         | Eval last sexp (√©valuer l‚Äôexpression avant le point)    |
| e n                         | Nouveau buffer Eshell                                   |
| e r                         | Eval region (√©valuer la r√©gion)                         |
| e R                         | Recharger la page EWW                                   |
| e s                         | Eshell                                                  |
| e w                         | EWW (navigateur web Emacs)                              |
|                             |                                                         |
| *Files*                       |                                                         |
| f                           | Menu Fichiers                                           |
| f c                         | Ouvrir config_kas.org                                    |
| f d                         | Rechercher une cha√Æne dans les fichiers d‚Äôun r√©pertoire |
| f e                         | Ouvrir le r√©pertoire Emacs utilisateur dans Dired       |
| f g                         | Rechercher une cha√Æne dans le fichier courant           |
| f i                         | Ouvrir init.el                                          |
| f j                         | Aller √† un fichier sous le r√©pertoire courant           |
| f l                         | Localiser un fichier                                    |
| f r                         | Fichiers r√©cents                                        |
| f u                         | Ouvrir un fichier avec sudo                             |
| f U                         | Editer un fichier avec sudo                             |
|                             |                                                         |
| *Git*                         |                                                         |
| g                           | Menu Git                                                |
| g /                         | Magit dispatch                                          |
| g .                         | Magit file dispatch                                     |
| g b                         | Changer de branche                                      |
| g c                         | Cr√©er                                                   |
| g c b                       | Cr√©er une branche et y passer                           |
| g c c                       | Cr√©er un commit                                         |
| g c f                       | Cr√©er un commit fixup                                   |
| g C                         | Cloner un d√©p√¥t                                         |
| g f                         | Trouver                                                 |
| g f c                       | Afficher un commit                                      |
| g f f                       | Magit find file                                         |
| g f g                       | Trouver le fichier gitconfig                            |
| g F                         | Git fetch                                               |
| g g                         | Magit status                                            |
| g i                         | Initialiser un d√©p√¥t git                                |
| g l                         | Journal du buffer git                                   |
| g r                         | Revert (annuler) un fichier git                         |
| g s                         | Stage (mettre en sc√®ne) un fichier git                  |
| g t                         | Git time machine                                        |
| g u                         | Unstage (d√©sindexer) un fichier git                     |
|                             |                                                         |
| *Help*                        |                                                         |
| h                           | Menu Aide                                               |
| h a                         | Apropos (recherche d'aide par mots-cl√©s)                |
| h b                         | D√©crire les raccourcis (describe-bindings)              |
| h c                         | D√©crire le caract√®re sous le curseur                    |
| h d                         | Documentation Emacs                                     |
| h d a                       | √Ä propos d‚ÄôEmacs                                        |
| h d d                       | Debugging Emacs                                         |
| h d f                       | FAQ Emacs                                               |
| h d m                       | Manuel Emacs                                            |
| h d n                       | Nouvelles d‚ÄôEmacs                                       |
| h d o                       | Comment obtenir Emacs                                   |
| h d p                       | Probl√®mes connus d‚ÄôEmacs                                |
| h d t                       | TODO officiel d‚ÄôEmacs                                   |
| h d w                       | Licence / absence de garantie                           |
| h e                         | Messages de la zone d‚Äô√©cho                              |
| h f                         | D√©crire une fonction                                    |
| h F                         | D√©crire une face                                        |
| h g                         | Infos sur le projet GNU                                 |
| h i                         | Ouvrir Info                                             |
| h I                         | D√©crire la m√©thode de saisie                            |
| h k                         | D√©crire une touche                                      |
| h l                         | Voir les derni√®res commandes tap√©es (lossage)           |
| h L                         | D√©crire l‚Äôenvironnement linguistique                    |
| h m                         | D√©crire le mode courant                                 |
| h r                         | Recharger                                               |
| h r r                       | Recharger la configuration Emacs                        |
| h t                         | Charger un th√®me                                        |
| h v                         | D√©crire une variable                                    |
| h w                         | Trouver le raccourci associ√© √† une commande             |
| h x                         | D√©crire une commande                                    |
|                             |                                                         |
| *Leader de base*              |                                                         |
| .                           | Ouvrir un fichier                                       |
| =                           | Perspective (afficher les raccourcis perspective)       |
| TAB TAB                     | Commenter des lignes                                    |
| u                           | Argument universel                                      |
|                             |                                                         |
| *Open*                        |                                                         |
| o                           | Menu Open                                               |
| o d                         | Ouvrir le Dashboard                                     |
| o e                         | Ouvrir Elfeed (RSS)                                     |
| o f                         | Ouvrir un nouveau frame                                 |
| o F                         | S√©lectionner un frame par son nom                       |
|                             |                                                         |
| *Org*                         |                                                         |
| m                           | Menu Org                                                |
| m a                         | Agenda Org                                              |
| m B                         | Tangle des blocs Babel                                  |
| m C                         | Capture (g√©n√©ral)                                       |
| m e                         | Exporter depuis Org                                     |
| m i                         | Basculer item (case √† cocher / liste)                   |
| m l                         | Enregistrer un lien Org                                 |
| m t                         | Changer l‚Äô√©tat TODO                                     |
| m T                         | Voir la liste des TODO                                  |
|                             |                                                         |
| *Tables*                      |                                                         |
| m b                         | Menu Tables                                             |
| m b -                       | Ins√©rer une ligne horizontale                           |
| m b a                       | Aligner le tableau                                      |
| m b c                       | Ins√©rer une colonne                                     |
| m b e                       | Modifier le champ courant                               |
| m b r                       | Ins√©rer une ligne                                       |
| m b s                       | Trier le tableau                                        |
|                             |                                                         |
| *Projectile*                  |                                                         |
| p                           | Menu Projectile                                         |
|                             |                                                         |
| *Search*                      |                                                         |
| s                           | Menu Recherche                                          |
| s d                         | Chercher dans le dictionnaire                           |
| s m                         | Ouvrir une page man                                     |
| s o                         | Rechercher une cha√Æne dans un PDF                       |
| s t                         | Afficher la page TLDR d‚Äôune commande                    |
| s w                         | Ouvrir Woman (similaire √† man sans d√©pendances)         |
|                             |                                                         |
| *Toggle*                      |                                                         |
| t                           | Menu Basculer                                           |
| t e                         | Activer/d√©sactiver eshell                               |
| t f                         | Activer/d√©sactiver Flycheck                             |
| t l                         | Activer/d√©sactiver les num√©ros de ligne                 |
| t n                         | Activer/d√©sactiver Neotree                              |
| t o                         | Activer/d√©sactiver Org mode                             |
| t r                         | Activer/d√©sactiver Rainbow mode                         |
| t t                         | Activer/d√©sactiver visual-line-mode                     |
| t v                         | Activer/d√©sactiver vterm                                |
|                             |                                                         |
| *Windows / Words*             |                                                         |
| w                           | Menu Fen√™tres & Mots                                    |
| w -                         | Split horizontal                                        |
| w H                         | D√©placer la fen√™tre √† gauche                            |
| w J                         | D√©placer la fen√™tre en bas                              |
| w K                         | D√©placer la fen√™tre en haut                             |
| w L                         | D√©placer la fen√™tre √† droite                            |
| w d                         | Mettre le mot en minuscules                             |
| w f                         | Fermer la fen√™tre                                       |
| w h                         | Aller √† la fen√™tre de gauche                            |
| w j                         | Aller √† la fen√™tre du bas                               |
| w k                         | Aller √† la fen√™tre du haut                              |
| w l                         | Aller √† la fen√™tre de droite                            |
| w n                         | Nouvelle fen√™tre                                        |
| w u                         | Mettre le mot en majuscules                             |
| w v                         | Split vertical                                          |
| w w                         | Aller √† la fen√™tre suivante                             |
| w =                         | Compter les mots / lignes du buffer                     |
|-----------------------------+---------------------------------------------------------|
** Configuration du Leader
#+begin_src emacs-lisp
;; Fonction personnalis√©e pour ins√©rer une date inactive
(defun my/org-insert-inactive-timestamp ()
  "Insert an inactive org timestamp."
  (interactive)
  (org-time-stamp nil t))
#+end_src

#+RESULTS:
: my/org-insert-inactive-timestamp

#+BEGIN_SRC emacs-lisp
  (use-package general
    :config
    (general-evil-setup)
    ;; set up 'SPC' as the global leader key
    (general-create-definer dt/leader-keys
      :states '(normal insert visual emacs)
      :keymaps 'override
      :prefix "SPC" ;; set leader
      :global-prefix "M-SPC") ;; access leader in insert mode

    (dt/leader-keys
      "SPC" '(counsel-M-x :wk "Counsel M-x")
      "." '(find-file :wk "Find file")
      "=" '(perspective-map :wk "Perspective") ;; Lists all the perspective keybindings
      "TAB TAB" '(comment-line :wk "Comment lines")
      "u" '(universal-argument :wk "Universal argument"))

     (dt/leader-keys
      "a" '(:ignore t :wk "A.I.")
      "a a" '(ellama-ask-about :wk "Ask ellama about region")
      "a e" '(:ignore t :wk "Ellama enhance")
      "a e g" '(ellama-improve-grammar :wk "Ellama enhance wording")
      "a e w" '(ellama-improve-wording :wk "Ellama enhance grammar")
      "a i" '(ellama-chat :wk "Ask ellama")
      "a p" '(ellama-provider-select :wk "Ellama provider select")
      "a s" '(ellama-summarize :wk "Ellama summarize region")
      "a t" '(ellama-translate :wk "Ellama translate region"))

    (dt/leader-keys
      "b" '(:ignore t :wk "Bookmarks/Buffers")
      "b b" '(switch-to-buffer :wk "Switch to buffer")
      "b c" '(clone-indirect-buffer :wk "Create indirect buffer copy in a split")
      "b C" '(clone-indirect-buffer-other-window :wk "Clone indirect buffer in new window")
      "b d" '(bookmark-delete :wk "Delete bookmark")
      "b i" '(ibuffer :wk "Ibuffer")
      "b f" '(kill-current-buffer :wk "Kill current buffer")
      "b K" '(kill-some-buffers :wk "Kill multiple buffers")
      "b l" '(list-bookmarks :wk "List bookmarks")
      "b m" '(bookmark-set :wk "Set bookmark")
      "b k" '(next-buffer :wk "Next buffer")
      "b j" '(previous-buffer :wk "Previous buffer")
      "b r" '(revert-buffer :wk "Reload buffer")
      "b R" '(rename-buffer :wk "Rename buffer")
      "b s" '(basic-save-buffer :wk "Save buffer")
      "b S" '(save-some-buffers :wk "Save multiple buffers")
      "b w" '(bookmark-save :wk "Save current bookmarks to bookmark file"))

    (dt/leader-keys
      "d" '(:ignore t :wk "Dired")
      "d d" '(dired :wk "Open dired")
      "d f" '(wdired-finish-edit :wk "Writable dired finish edit")
      "d j" '(dired-jump :wk "Dired jump to current")
      "d n" '(neotree-dir :wk "Open directory in neotree")
      "d p" '(peep-dired :wk "Peep-dired")
      "d w" '(wdired-change-to-wdired-mode :wk "Writable dired"))

    (dt/leader-keys
      "e" '(:ignore t :wk "Ediff/Eshell/Eval/EWW")    
      "e b" '(eval-buffer :wk "Evaluate elisp in buffer")
      "e d" '(eval-defun :wk "Evaluate defun containing or after point")
      "e e" '(eval-expression :wk "Evaluate and elisp expression")
      "e f" '(ediff-files :wk "Run ediff on a pair of files")
      "e F" '(ediff-files3 :wk "Run ediff on three files")
      "e h" '(counsel-esh-history :which-key "Eshell history")
      "e l" '(eval-last-sexp :wk "Evaluate elisp expression before point")
      "e n" '(eshell-new :wk "Create new eshell buffer")
      "e r" '(eval-region :wk "Evaluate elisp in region")
      "e R" '(eww-reload :which-key "Reload current page in EWW")
      "e s" '(eshell :which-key "Eshell")
      "e w" '(eww :which-key "EWW emacs web wowser"))

    (dt/leader-keys
      "f" '(:ignore t :wk "Files")    
      "f c" '((lambda () (interactive)
                (find-file "~/.emacs.d/config_kas.org")) 
              :wk "Open emacs -nw config_kas.org")
      "f e" '((lambda () (interactive)
                (dired "~/.emacs.d")) 
              :wk "Open user-emacs-directory in dired")
      "f d" '(find-grep-dired :wk "Search for string in files in DIR")
      "f g" '(counsel-grep-or-swiper :wk "Search for string current file")
      "f i" '((lambda () (interactive)
                (find-file "~/.emacs.d/init.el")) 
              :wk "Open emacs -nw init.el")
      "f j" '(counsel-file-jump :wk "Jump to a file below current directory")
      "f l" '(counsel-locate :wk "Locate a file")
      "f r" '(counsel-recentf :wk "Find recent files")
      "f u" '(sudo-edit-find-file :wk "Sudo find file")
      "f U" '(sudo-edit :wk "Sudo edit file"))

    (dt/leader-keys
      "g" '(:ignore t :wk "Git")    
      "g /" '(magit-displatch :wk "Magit dispatch")
      "g ." '(magit-file-displatch :wk "Magit file dispatch")
      "g b" '(magit-branch-checkout :wk "Switch branch")
      "g c" '(:ignore t :wk "Create") 
      "g c b" '(magit-branch-and-checkout :wk "Create branch and checkout")
      "g c c" '(magit-commit-create :wk "Create commit")
      "g c f" '(magit-commit-fixup :wk "Create fixup commit")
      "g C" '(magit-clone :wk "Clone repo")
      "g f" '(:ignore t :wk "Find") 
      "g f c" '(magit-show-commit :wk "Show commit")
      "g f f" '(magit-find-file :wk "Magit find file")
      "g f g" '(magit-find-git-config-file :wk "Find gitconfig file")
      "g F" '(magit-fetch :wk "Git fetch")
      "g g" '(magit-status :wk "Magit status")
      "g i" '(magit-init :wk "Initialize git repo")
      "g l" '(magit-log-buffer-file :wk "Magit buffer log")
      "g r" '(vc-revert :wk "Git revert file")
      "g s" '(magit-stage-file :wk "Git stage file")
      "g t" '(git-timemachine :wk "Git time machine")
      "g u" '(magit-stage-file :wk "Git unstage file"))

   (dt/leader-keys
      "h" '(:ignore t :wk "Help")
      "h a" '(counsel-apropos :wk "Apropos")
      "h b" '(describe-bindings :wk "Describe bindings")
      "h c" '(describe-char :wk "Describe character under cursor")
      "h d" '(:ignore t :wk "Emacs documentation")
      "h d a" '(about-emacs :wk "About Emacs")
      "h d d" '(view-emacs-debugging :wk "View Emacs debugging")
      "h d f" '(view-emacs-FAQ :wk "View Emacs FAQ")
      "h d m" '(info-emacs-manual :wk "The Emacs manual")
      "h d n" '(view-emacs-news :wk "View Emacs news")
      "h d o" '(describe-distribution :wk "How to obtain Emacs")
      "h d p" '(view-emacs-problems :wk "View Emacs problems")
      "h d t" '(view-emacs-todo :wk "View Emacs todo")
      "h d w" '(describe-no-warranty :wk "Describe no warranty")
      "h e" '(view-echo-area-messages :wk "View echo area messages")
      "h f" '(describe-function :wk "Describe function")
      "h F" '(describe-face :wk "Describe face")
      "h g" '(describe-gnu-project :wk "Describe GNU Project")
      "h i" '(info :wk "Info")
      "h I" '(describe-input-method :wk "Describe input method")
      "h k" '(describe-key :wk "Describe key")
      "h l" '(view-lossage :wk "Display recent keystrokes and the commands run")
      "h L" '(describe-language-environment :wk "Describe language environment")
      "h m" '(describe-mode :wk "Describe mode")
      "h r" '(:ignore t :wk "Reload")
      "h r r" '((lambda () (interactive)
                  (load-file "~/.emacs.d/init.el")
                  (ignore (elpaca-process-queues)))
                :wk "Reload emacs config_kas")
      "h t" '(load-theme :wk "Load theme")
      "h v" '(describe-variable :wk "Describe variable")
      "h w" '(where-is :wk "Prints keybinding for command if set")
      "h x" '(describe-command :wk "Display full documentation for command"))

    (dt/leader-keys
      "m" '(:ignore t :wk "Org")
      "m a" '(org-agenda :wk "Org agenda")
      "m e" '(org-export-dispatch :wk "Org export dispatch")
      "m i" '(org-toggle-item :wk "Org toggle item")
      "m t" '(org-todo :wk "Org todo")
      "m B" '(org-babel-tangle :wk "Org babel tangle")
      "m T" '(org-todo-list :wk "Org todo list")
      "m l" '(org-store-link :wk "Store Org link")
      "m C" '(org-capture :wk "Org capture"))  ;; C majuscule = g√©n√©ral

    (dt/leader-keys
      "c" '(:ignore t :wk "Capture")
      "c b" (lambda () (interactive) (org-capture nil "b"))
      "c p" (lambda () (interactive) (org-capture nil "p"))
      "c w" (lambda () (interactive) (org-capture nil "w"))
      "c s" (lambda () (interactive) (org-capture nil "s"))
      "c j" (lambda () (interactive) (org-capture nil "j")))

     (dt/leader-keys
       "m b" '(:ignore t :wk "Tables")
       "m b -" '(org-table-insert-hline :wk "Insert hline in table")
       "m b r" '(org-table-insert-row :wk "Insert row")
       "m b c" '(org-table-insert-column :wk "Insert column")
       "m b e" '(org-table-edit-field :wk "Edit current field")
       "m b a" '(org-table-align :wk "Align table")
       "m b s" '(org-table-sort-lines :wk "Sort table"))

    (dt/leader-keys
      "m d" '(:ignore t :wk "Date/deadline")
      "m d t" '(org-time-stamp :wk "Insert timestamp")
      "m d i" '(my/org-insert-inactive-timestamp :wk "Insert inactive timestamp")
      "m d d" '(org-deadline :wk "Set deadline")
      "m d s" '(org-schedule :wk "Set schedule")
      "m d r" '(org-clock-report :wk "Clock report")
      "m d n" '(org-timestamp-down :wk "Timestamp -1 day")
      "m d p" '(org-timestamp-up :wk "Timestamp +1 day"))

    (dt/leader-keys
      "o" '(:ignore t :wk "Open")
      "o d" '(dashboard-open :wk "Dashboard")
      "o e" '(elfeed :wk "Elfeed RSS")
      "o f" '(make-frame :wk "Open buffer in new frame")
      "o F" '(select-frame-by-name :wk "Select frame by name"))

    ;; projectile-command-map already has a ton of bindings 
    ;; set for us, so no need to specify each individually.
    (dt/leader-keys
      "p" '(projectile-command-map :wk "Projectile"))

    (dt/leader-keys
      "r" '(:ignore t :wk "Radio")
      "r p" '(eradio-play :wk "Eradio play")
      "r s" '(eradio-stop :wk "Eradio stop")
      "r t" '(eradio-toggle :wk "Eradio toggle"))

    (dt/leader-keys
      "s" '(:ignore t :wk "Search")
      "s d" '(dictionary-search :wk "Search dictionary")
      "s m" '(man :wk "Man pages")
      "s o" '(pdf-occur :wk "Pdf search lines matching STRING")
      "s t" '(tldr :wk "Lookup TLDR docs for a command")
      "s w" '(woman :wk "Similar to man but doesn't require man"))

    (dt/leader-keys
      "t" '(:ignore t :wk "Toggle")
      "t e" '(eshell-toggle :wk "Toggle eshell")
      "t f" '(flycheck-mode :wk "Toggle flycheck")
      "t l" '(display-line-numbers-mode :wk "Toggle line numbers")
      "t n" '(neotree-toggle :wk "Toggle neotree file viewer")
      "t o" '(org-mode :wk "Toggle org mode")
      "t r" '(rainbow-mode :wk "Toggle rainbow mode")
      "t t" '(visual-line-mode :wk "Toggle truncated lines")
      "t v" '(vterm-toggle :wk "Toggle vterm"))

    (dt/leader-keys
      "w" '(:ignore t :wk "Windows/Words")
      ;; Window splits
      "w f" '(evil-window-delete :wk "Close window")
      "w n" '(evil-window-new :wk "New window")
      "w -" '(evil-window-split :wk "Horizontal split window")
      "w v" '(evil-window-vsplit :wk "Vertical split window")
      ;; Window motions
      "w h" '(evil-window-left :wk "Window left")
      "w j" '(evil-window-down :wk "Window down")
      "w k" '(evil-window-up :wk "Window up")
      "w l" '(evil-window-right :wk "Window right")
      "w w" '(evil-window-next :wk "Goto next window")
      ;; Move Windows
      "w H" '(buf-move-left :wk "Buffer move left")
      "w J" '(buf-move-down :wk "Buffer move down")
      "w K" '(buf-move-up :wk "Buffer move up")
      "w L" '(buf-move-right :wk "Buffer move right")
      ;; Words
      "w d" '(downcase-word :wk "Downcase word")
      "w u" '(upcase-word :wk "Upcase word")
      "w =" '(count-words :wk "Count words/lines for buffer"))
  )
#+END_SRC

#+RESULTS:
: t

* Themes
#+BEGIN_SRC emacs-lisp
;; Ajouter le dossier contenant ton th√®me personnalis√© au chemin des th√®mes
(add-to-list 'custom-theme-load-path "~/.emacs/themes/")

;; Charger ton th√®me personnalis√© 'dtmacs'
(load-theme 'dtmacs t)
#+END_SRC

#+RESULTS:
: t

* Completion company mode
#+begin_src emacs-lisp
  (use-package company
    :ensure t
    :custom
    ;; D√©lai avant affichage
    (company-idle-delay 0.3)

    ;; Nombre minimum de caract√®res pour d√©clencher
    (company-minimum-prefix-length 3)
    ;; Alignement des annotations
    (company-tooltip-align-annotations t)
    ;; Ne pas bloquer l‚Äô√©dition
    (company-require-match nil)
    ;; Navigation circulaire
    (company-selection-wrap-around t)
    :hook
    (after-init . global-company-mode)
    :config
    ;; Couleurs du tooltip
    (set-face-attribute 'company-tooltip nil
                        :foreground "#ffffff"  ;; texte
                        :background "#333333") ;; fond
    (set-face-attribute 'company-tooltip-selection nil
                        :foreground "#000000"  ;; texte s√©lection
                        :background "#ffcc00") ;; fond s√©lection
    (set-face-attribute 'company-tooltip-common nil
                        :foreground "#00ff00"  ;; texte commun
                        :background "#333333") ;; fond commun
    (set-face-attribute 'company-tooltip-annotation nil
                        :foreground "#ff6666"  ;; annotations
                        :background "#333333") ;; fond annotations
    (set-face-attribute 'company-scrollbar-bg nil
                        :background "#222222") ;; scrollbar bg
    (set-face-attribute 'company-scrollbar-fg nil
                        :background "#ffcc00")) ;; scrollbar fg
#+end_src

#+RESULTS:
| global-company-mode | (lambda nil (eval-after-load 'tex #'(lambda nil (setq TeX-view-program-selection '((output-pdf Zathura))) (setq TeX-view-program-list '((Zathura zathura %o)))))) | org-persist-load-all | debian-ispell-set-default-dictionary | debian-ispell-set-startup-menu | x-wm-set-size-hint | tramp-register-archive-autoload-file-name-handler | magit-maybe-define-global-key-bindings | table--make-cell-map |

* Shell et terminal
** Eshell
Lancer M-x eshell
Quitter exit
#+BEGIN_SRC emacs-lisp
;; A function for easily creating multiple buffers of 'eshell'.
;; NOTE: `C-u M-x eshell` would also create new 'eshell' buffers.
(defun eshell-new (name)
  "Create new eshell buffer named NAME."
  (interactive "sName: ")
  (setq name (concat "$" name))
  (eshell)
  (rename-buffer name))

(use-package eshell-toggle
  :ensure t
  :custom
  (eshell-toggle-size-fraction 3)
  (eshell-toggle-use-projectile-root t)
  (eshell-toggle-run-command nil)
  (eshell-toggle-init-function #'eshell-toggle-init-ansi-term))

(use-package eshell-syntax-highlighting
  :ensure t
  :after esh-mode
  :config
  (eshell-syntax-highlighting-global-mode +1))

;; Eshell config
(setq eshell-rc-script (concat user-emacs-directory "eshell/profile")
      eshell-aliases-file (concat user-emacs-directory "eshell/aliases")
      eshell-history-size 5000
      eshell-buffer-maximum-lines 5000
      eshell-hist-ignoredups t
      eshell-scroll-to-bottom-on-input t
      eshell-destroy-buffer-when-process-dies t
      eshell-visual-commands '("bash" "fish" "htop" "ssh" "top" "zsh"))
#+END_SRC

#+RESULTS:
| bash | fish | htop | ssh | top | zsh |

** Vterm
sudo apt update
sudo apt install libtool libtool-bin cmake make gcc
Lancer M-x vterm
Quitter exit 
#+BEGIN_SRC emacs-lisp
(use-package vterm
  :ensure t
  :hook (vterm-mode . (lambda () (setq-local global-hl-line-mode nil))) ;; (optionnel) d√©sactive le highlight dans vterm
  :config
  ;; Utilise /bin/sh comme shell (par d√©faut)
  (setq shell-file-name "/bin/sh"
        vterm-max-scrollback 5000))
#+END_SRC

#+RESULTS:
| lambda | nil | (setq-local global-hl-line-mode nil) |

** Vterm-toggle
#+BEGIN_SRC emacs-lisp
(use-package vterm-toggle
  :ensure t
  :after vterm
  :config
  ;; En mode normal (evil), la touche ESC doit s'envoyer elle-m√™me dans vterm,
  ;; ce qui permet de tuer les programmes comme dans un terminal classique.
  (evil-define-key 'normal vterm-mode-map (kbd "<escape>") 'vterm--self-insert)

  ;; Ne pas passer en fullscreen lors du toggle
  (setq vterm-toggle-fullscreen-p nil)

  ;; Scope sur le projet courant (autrement, c‚Äôest 'global)
  (setq vterm-toggle-scope 'project)

  ;; Gestion de l'affichage des buffers vterm
  (add-to-list 'display-buffer-alist
               '((lambda (buffer-or-name _)
                   (let ((buffer (get-buffer buffer-or-name)))
                     (with-current-buffer buffer
                       (or (eq major-mode 'vterm-mode)
                           (string-prefix-p vterm-buffer-name (buffer-name buffer))))))
                 (display-buffer-reuse-window display-buffer-at-bottom)
                 ;; (display-buffer-reuse-window display-buffer-in-direction)
                 ;; display-buffer-in-direction/direction/dedicated est ajout√© dans Emacs 27+
                 ;; (direction . bottom)
                 ;; (dedicated . t) ; dedicated support√© dans Emacs 27+
                 (reusable-frames . visible)
                 (window-height . 0.4))))
#+END_SRC

#+RESULTS:
: t
* Version
#+BEGIN_SRC emacs-lisp
  (org-version)
#+END_SRC

#+RESULTS:
: 9.6.15

#+BEGIN_SRC emacs-lisp
(emacs-version)
#+END_SRC

#+RESULTS:
: GNU Emacs 29.3 (build 1, x86_64-pc-linux-gnu, GTK+ Version 3.24.41, cairo version 1.18.0)
:  of 2024-04-01, modified by Debian

* Mode graphique
#+BEGIN_SRC emacs-lisp
;;; config_kas.el --- Configuration personnelle -*- lexical-binding: t; -*-

;;; ===================== Pr√©requis =====================
(require 'cl-lib)
(require 'use-package)

;;; ===================== GUI =====================
(when (display-graphic-p)
  ;; D√©sactiver les √©l√©ments visuels
  (menu-bar-mode -1)
  (tool-bar-mode -1)
  (scroll-bar-mode -1)
  (setq horizontal-scroll-bar-mode nil)

  ;; ==================== Doom Modeline ====================
  (use-package all-the-icons
    :ensure t)

  (use-package doom-modeline
    :ensure t
    :init
    (setq doom-modeline-icon t
          doom-modeline-buffer-encoding nil
          doom-modeline-battery t)
    :config
    (doom-modeline-mode 1)
    :custom
    (doom-modeline-height 25)
    (doom-modeline-bar-width 3)
    (doom-modeline-icon t)
    (doom-modeline-major-mode-icon t)))

;;; ===================== Evil Mode =====================
(with-eval-after-load 'doom-modeline
  (setq doom-modeline-modal-icon nil))

(with-eval-after-load 'evil
  ;; Personnalisation des tags de mode pour Doom Modeline
  (plist-put (plist-get evil-state-properties 'normal) :tag "[N]")
  (plist-put (plist-get evil-state-properties 'insert) :tag "[I]")
  (plist-put (plist-get evil-state-properties 'visual) :tag "[V]")
  (plist-put (plist-get evil-state-properties 'replace) :tag "[R]")
  (plist-put (plist-get evil-state-properties 'motion) :tag "[M]")
  (plist-put (plist-get evil-state-properties 'emacs) :tag "[E]"))
#+END_SRC

#+RESULTS:
| :tag | [E] |

* Fonction personnalis√©e
*** Kloc
En faisant M-x select-kbloc, il selectionne le bloc commen√ßant par #+BEGIN_SRC jusqu'√† 
la position du curseur.
#+BEGIN_SRC emacs-lisp
(defun select-kbloc ()
  "S√©lectionne le bloc commen√ßant par #+BEGIN_SRC ... # +END_SRC)."
  (interactive)
  (save-excursion
    (let (beg end)
      ;; Trouver le d√©but du bloc et aller au d√©but de la ligne
      (unless (re-search-backward "^[ \t]*#\\+BEGIN_SRC" nil t)
        (error "Pas de d√©but de bloc trouv√©"))
      (setq beg (line-beginning-position))
      ;; Trouver la fin du bloc et aller √† la fin de la ligne
      (unless (re-search-forward "^[ \t]*#\\+END_SRC" nil t)
        (error "Pas de fin de bloc trouv√©e"))
      (setq end (line-end-position))
      ;; S√©lectionner la r√©gion enti√®re
      (goto-char beg)
      (set-mark-command nil)
      (goto-char end)
      (message "Bloc s√©lectionn√©"))))
#+END_SRC

#+RESULTS:
: select-kbloc

*** Coller sous le curseur: ≈ìp
#+BEGIN_SRC emacs-lisp
(with-eval-after-load 'evil
  (define-key evil-normal-state-map (kbd "≈ì p")
    (lambda () (interactive)
      (evil-ex-execute "put"))))
#+END_SRC

#+RESULTS:
| lambda | nil | (interactive) | (evil-ex-execute put) |
* Cheat sheet: vim/emacs
** Mouvement
*** du curseur
| mode normal | Description                        |
|-------------+------------------------------------|
| k           | d√©placer le curseur vers le haut   |
| j           | d√©placer le curseur vers le bas    |
| h           | d√©placer le curseur vers la gauche |
| l           | d√©placer le curseur vers la droite |
|-------------+------------------------------------|
*** sur les mots
| normal | Description                            |
|--------+----------------------------------------|
| w (b)  | aller au debut de chaque mot (reculer) |
| e (ge) | aller √† la fin de chaque mot (reculer) |
|--------+----------------------------------------|
*** sur les lignes
| normal | emacs     | Description                              |
|--------+-----------+------------------------------------------|
| 0  (_) | C-a (M-m) | aller au debut de la ligne (sans espace) |
| $ (g_) | C-e       | aller √† la fin de la ligne (sans espace) |
|        | M-a (M-e) | aller au debut (fin)  de la phrase       |
|--------+-----------+------------------------------------------|

Une ~phrase~ en emacs commence par un caract√®re autre que #, espace et
se termine soit par .,! ou ? suivi d'un espace ou retour √† la ligne.

| Mode normal et visual | Action                                    |
|-----------------------+-------------------------------------------|
| M-j                   | d√©placer la ligne ou le bloc vers le haut |
| M-k                   | d√©placer la ligne ou le bloc vers le bas  |
|-----------------------+-------------------------------------------|
*** sur le fichier
| normal | Description                          |
|--------+--------------------------------------|
| gg (G) | aller au debut du fichier (√† la fin) |
|--------+--------------------------------------|
*** sur l'ecran
| normal     | Description                                                    |
|------------+----------------------------------------------------------------|
| C-e ou C-y | descendre ou monter l'ecran d'une ligne sans bouger le curseur |
| C-b ou C-f | descendre ou monter l'ecran d'une hauteur(page)                |
|------------+----------------------------------------------------------------|
*** sur les headings
| commande        | action                                             |
|-----------------+----------------------------------------------------|
| M-fleche droit  | deplacer les headings vers la droite               |
| M-fleche gauche | deplace les headings vers la gauche                |
| M-entrer        | ajouter un heading de m√™me niveau que le precedent |
|-----------------+----------------------------------------------------|
** Insertion
| Insertion | Description                       |
|-----------+-----------------------------------|
| i ou a    | inserer avant ou apr√®s le curseur |
| I ou A    | aller en debut ou fin de ligne    |
|-----------+-----------------------------------|
** Selection
| Visual | Description                                   |
|--------+-----------------------------------------------|
| S-v    | selectionner ligne par ligne                  |
| v      | selectionner caract√®re par caract√®re          |
| C-v    | selectionner par bloc                         |
| < ou > | d√©caler la selection vers la gauche ou droite |
|--------+-----------------------------------------------|
*** op√©ration sur les selection par bloc
**** pour copier ou supprimer
| Visual | Description                               |
|--------+-------------------------------------------|
| tx     | aller jusqu'avant le caract√®re x          |
| fx     | aller jusqu'au caract√®re x                |
| $      | aller jusqu'√† la fin de ligne             |
| g_     | aller juqu'√† la fin de ligne sans espace  |
| 0      | aller jusqu'√† debut de ligne             |
| _      | aller jusqu'en debut de ligne sans espace |
|--------+-------------------------------------------|
**** faire une action apr√®s le bloc
| Visual | Description      |
|--------+------------------|
| A      | apr√®s le bloc    |
| I      | avant le bloc    |
| esc    | applique au bloc |
|--------+------------------|
** Copier
| Action                          | Normal | Emacs |
|---------------------------------+--------+-------|
| copier                          | y      | M-w   |
| copier une ligne                | yy     |       |
| copier le contenu de ",(,{ et w | yi(    |       |
| copier l'objet et le contenu    | ya"    |       |
|---------------------------------+--------+-------|
** Coller
| Action                           | Normal | Emacs |
|----------------------------------+--------+-------|
| coller avant ou apr√®s le curseur | P ou p | C-y   |
|----------------------------------+--------+-------|
** Supprimer = couper
 | Normal  | Action                                       |
 |---------+----------------------------------------------|
 | d       | supprimer                                    |
 | dd      | supprimer une ligne                          |
 | d+ordre | supprimer ordre                              |
 | x       | supprimer le caract√®re sous le curseur       |
 | S-d     | supprimer √† partir du curseur jusqu'√† la fin |
 |---------+----------------------------------------------|
** Commenter
| commande    | mode vim    | mode emac   |
|-------------+-------------+-------------|
| spc tab tab | spc tab tab | spc tab tab |
|-------------+-------------+-------------|
** Evaluer un bloc
| mode vim | mode emacs |
|----------+------------|
| spc e r  | C-c C-c    |
|----------+------------|
** Recherche et remplacement
| Action       | Normal      | Emacs           |
|--------------+-------------+-----------------|
| recherche    | /           |                 |
|              | n=suivant   |                 |
|              | N=precedent |                 |
|--------------+-------------+-----------------|
|              | M-%         | M-%             |
| remplacement |             | n=passe         |
|              |             | !=remplace tout |
|              |             | entr√©=quitter   |
|--------------+-------------+-----------------|
* Cheat sheet: Tableau org
*** Copier la valeur courante en dessous
#+BEGIN_SRC emacs-lisp
(defun my/org-table-copy-down (&optional arg)
  "Appeler `org-table-copy-down' si on est dans un tableau Org.
ARG (prefix) est transmis proprement √† la commande d'Org si n√©cessaire."
  (interactive "P")
  (unless (and (fboundp 'org-at-table-p) (org-at-table-p))
    (user-error "Pas dans un tableau Org"))
  ;; call-interactively g√®re correctement le prefix arg / arit√©
  (call-interactively #'org-table-copy-down))

(with-eval-after-load 'org
  (define-key org-mode-map (kbd "C-c C-d") #'my/org-table-copy-down))
#+END_SRC

#+RESULTS:
: my/org-table-copy-down
*** Cr√©er un tableau
**** Outils
| commande   | descriptin                                |
|------------+-------------------------------------------|
| pipe       | separateur des colonnes                   |
|            |                                           |
| C-c entrer | tracer la ligne horizontale en dessous du |
|            | curseur + une ligne du tableau            |
|            |                                           |
| C-c -      | tracer le hline en dessous du curseur     |
|            |                                           |
| C-u C-c -  | tracer le hline en haut du curseur        |
|            |                                           |
| tab        | pour se deplacer entre cellule            |
|            |                                           |
| entrer     | pour se deplacer entre ligne              |
|------------+-------------------------------------------|
**** supprimer une colonne ou une ligne
| commande          | action                        |
|-------------------+-------------------------------|
| M-S-fl√®che gauche | supprimer la colonne courante |
| M-S-fl√®che haute  | supprimer la ligne courante   |
|-------------------+-------------------------------|
**** ajouter une colonne ou une ligne
| commande          | action                       |
|-------------------+------------------------------|
| M-S-fl√®che droite | ajouter une colonne courante |
| M-S-fl√®che bas    | ajouter une  ligne courante  |
|-------------------+------------------------------|
**** tableau vide
C-c | + nbre__colonne x nbre__ligne  
**** donn√©es brutes en tableau
selection + C-c |   (quand le separateur est tab ou ,)
**** position dans le tableau
#+name: tab
|  a |  b |  c |  d |  e |
|----+----+----+----+----|
|  1 |  5 |  7 |  8 |  3 |
|  4 |  5 |  9 |  1 |  2 |
| 14 | 26 | 85 | 48 | 75 |
|----+----+----+----+----|

| commande | explication          |
|----------+----------------------|
| @n$p     | ligne n et colonne p |
| ..       | jusqu'√†              |
| tab[n]   | ligne n+1            |
| tab[,p]  | colonne p+1          |
| @<       | 1√®re ligne           |
| @>       | derni√®re ligne       |
| $<       | 1√®re colonne         |
| $>       | derni√®re colonne     |
| ::       | et                   |
|----------+----------------------|
Les lignes et colonnes commencent par 1 et tab par 0.

*** Permuter les lignes ou colonnes / les √©l√©ments du tableau
| commande         | action                          |
|------------------+---------------------------------|
| M- + les fl√®ches | permuter les lignes ou colonnes |
| S- + les fl√®ches | permuter les elts du tableau    |
|------------------+---------------------------------|
*** Op√©ration sur les tables
**** Introduction des formules
| sous le tableau  | dans la cellule |
|------------------+-----------------|
| #+TBLFM: syntaxe | egal syntaxe    |
|------------------+-----------------|
| compile: C-c C-c | compile: entrer |
|------------------+-----------------|

Quelques syntaxes

| Type d‚Äôop√©ration   | Syntaxe              | Explication                                                          |
|--------------------+----------------------+----------------------------------------------------------------------|
| Colonne (vertical) | $3 = $1 + $2         | La colonne 3 = col1 + col2                                           |
| Ligne (horizontal) | @2 = @1 * 2          | La ligne 2 recevra touts les valeurs de la ligne 1 multipli√©√©s par 2 |
| Rectangle          | @2$2..@4$3 = $1 + 10 | Cette formule est appliqu√©e √† chaque cellule du rectangle            |
| Rectangle          | @2$2..@4$3 = expr    | Applique expr au bloc ligne 2‚Üí4, colonne 2‚Üí3                         |
| Cumul colonne      | $2 += 1              | Ajoute 1 √† chaque cellule de la colonne 2                            |
| Copier une ligne   | @2 = @1              | Copie toute la ligne 1 dans la ligne 2                               |
| Copier une colonne | $3 = $1              | Copie la colonne 1 dans la colonne 3                                 |
|--------------------+----------------------+----------------------------------------------------------------------|
**** commandes
| commande  | effet                                    |
|-----------+------------------------------------------|
| C-c*      | Recalculer les formules du tableau       |
| C-c}      | Affiche les lignes et colonne du tableau |
| C-c?      | Affiche la position de la cellule        |
| C-u C-c * | Recalculer tous les tableaux du buffer   |
|-----------+------------------------------------------|
**** formules int√©gr√©s
| Fonction            | Syntaxe          | Description                        | Exemple                   |
|---------------------+------------------+------------------------------------+---------------------------|
| Somme verticale     | vsum(range)      | Somme des valeurs d‚Äôune colonne    | @>$2 = vsum(@2..@-1)      |
| Moyenne verticale   | vmean(range)     | Moyenne des valeurs d‚Äôune colonne  | @>$2 = vmean(@2..@-1)     |
| Valeur min          | vmin(range)      | Valeur minimale d‚Äôune colonne      | @>$2 = vmin(@2..@-1)      |
| Valeur max          | vmax(range)      | Valeur maximale d‚Äôune colonne      | @>$2 = vmax(@2..@-1)      |
| Compte              | vcount(range)    | Nombre de valeurs num√©riques       | @>$2 = vcount(@2..@-1)    |
| Produit             | vprod(range)     | Produit des valeurs d‚Äôune colonne  | @>$2 = vprod(@2..@-1)     |
| Somme des carr√©s    | vsumsq(range)    | Somme des carr√©s des valeurs       | @>$2 = vsumsq(@2..@-1)    |
| √âcart-type          | vstd(range)      | √âcart-type des valeurs             | @>$2 = vstd(@2..@-1)      |
| Variance            | vvariance(range) | Variance des valeurs               | @>$2 = vvariance(@2..@-1) |
| M√©diane verticale   | vmedian(range)   | M√©diane d‚Äôune colonne              | @>$2 = vmedian(@2..@-1)   |
| Somme horizontale   | hsum(range)      | Somme des valeurs d‚Äôune ligne      | @2$4 = hsum($1..$3)       |
| Moyenne horizontale | hmean(range)     | Moyenne des valeurs d‚Äôune ligne    | @2$4 = hmean($1..$3)      |
| Valeur min ligne    | hmin(range)      | Minimum des valeurs d‚Äôune ligne    | @2$4 = hmin($1..$3)       |
| Valeur max ligne    | hmax(range)      | Maximum des valeurs d‚Äôune ligne    | @2$4 = hmax($1..$3)       |
| Compte ligne        | hcount(range)    | Nombre de valeurs num√©riques ligne | @2$4 = hcount($1..$3)     |
|---------------------+------------------+------------------------------------+---------------------------|
*** Sur les blocs
**** syntaxe
#+begin_src python option1 option2 .. option n

#+end_src

**** les options
Note: X peut √™tre le nom d'une table ou un extrait de la table

| option                 | description                                                                             |
|------------------------+-----------------------------------------------------------------------------------------|
| :var tab=X             | recup√®re l'objet X et stocke   dans tab                                                 |
| :colnames yes          | n'applique pas l'action sur la 1√®re ligne du tableau                                    |
| :colnames no           | applique l'action sur la 1√®re ligne du tableau aussi                                    |
| :results output        | affiche la sortie (√† utiliser avec print ou printf)                                     |
| table                  | convertir le output en tableau org                                                      |
| :results graphics file | le r√©sultat est un fichier graphique                                                    |
| :file chemin/image.png | d√©finit l‚Äôemplacement et le nom du fichier g√©n√©r√©                                       |
| :exports code          | n‚Äôexporte que le code du bloc                                                           |
| :exports results       | n‚Äôexporte que les r√©sultats du bloc                                                     |
| :exports both          | exporte le code et les r√©sultats.                                                       |
| :results table         | Formate le r√©sultat comme tableau Org                                                   |
| :results value         | R√©cup√®re la valeur renvoy√©e par l‚Äôexpression, utilisable dans d‚Äôautres blocs ou calculs |
|------------------------+-----------------------------------------------------------------------------------------|

C-c C-o pour ouvrir le lien

#+BEGIN_SRC python :results graphics file :file kimg.png
import matplotlib.pyplot as plt

plt.plot([1, 2, 3], [4, 5, 6])
plt.title("Exemple graphique")
plt.savefig("kimg.png")
#+END_SRC

#+RESULTS:
[[file:kimg.png]]

*** Nommer un tableau
#+name: sert √† nommer un tableau ou la sortie du bloc
*** fusionner deux tableaux org
**** Horizontal sans entete 
#+NAME: T1
| col1 | col2 |
|    1 | 2    |

#+NAME: T2
| col3 |
| 3    |

#+BEGIN_SRC emacs-lisp :var t1=T1 t2=T2
(cl-mapcar #'append t1 t2)
#+END_SRC

#+RESULTS:
| col1 | col2 | col3 |
|    1 |    2 |    3 |

**** Horizontal avec entete
#+NAME: Ta
| a    | b |
|------+---|
| col1 | col2 |
|   1  |  2  |

#+NAME: Tb
| c    |
|------|
| col3 |
|   3  |

#+BEGIN_SRC emacs-lisp :var ta=Ta :var tb=Tb :colnames no
(cl-mapcar #'append ta tb)
#+END_SRC

#+RESULTS:
| a    | b    | c    |
| col1 | col2 | col3 |
| 1    | 2    | 3    |

**** Extraction des colonnes
#+NAME: T10
| c1 | c2 | c3 | c4 | c5 | c6 | c7 | c8 | c9 | c10 |
|----+----+----+----+----+----+----+----+----+-----|
| 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20  |
| 21 | 22 | 23 | 24 | 25 | 26 | 27 | 28 | 29 | 30  |


#+BEGIN_SRC emacs-lisp :var tbl=T10 :colnames yes
(mapcar
 (lambda (row)
   (list (nth 0 row)   ;; col1
         (nth 2 row)   ;; col3
         (nth 6 row))) ;; col7
 tbl)
#+END_SRC

#+RESULTS:
| 11 | 13 | 17 |
| 21 | 23 | 27 |

#+BEGIN_SRC emacs-lisp :var tbl=T10 :colnames no
(mapcar
 (lambda (row)
   (list (nth 0 row)   ;; col1
         (nth 2 row)   ;; col3
         (nth 6 row))) ;; col7
 tbl)
#+END_SRC

#+RESULTS:
| c1 | c3 | c7 |
| 11 | 13 | 17 |
| 21 | 23 | 27 |

*** Raccourci sur le tableau org
| code | correspondance                      |
|------+-------------------------------------|
| ≈ìt   | #+TBLFM:                            |
| ≈ìn   | #+name:                             |
| ≈ì    | <                                   |
| ≈ìfh  | fusion horizontale de deux tableaux |
|      |                                     |

** G√©n√©rales
| Commande    | Description                          | R√¥le                                                            |
|-------------+--------------------------------------+-----------------------------------------------------------------|
| SPC SPC     | Counsel M-x                          | Ex√©cute une commande Emacs via interface de recherche           |
| SPC .       | Find file                            | Ouvre un fichier depuis le syst√®me de fichiers                  |
| SPC =       | Perspective                          | Ouvre le menu de gestion des espaces de travail                 |
| SPC TAB TAB | Comment lines                        | Commente ou d√©commente la/les ligne(s) courante(s)              |
| SPC u       | Universal argument                   | Fournit un argument num√©rique universel √† la prochaine commande |
| SPC a       | A.I.                                 | Ouvre le sous-menu des fonctions d‚Äôintelligence artificielle    |
| SPC a a     | Ask ellama about region              | Demande √† Ellama des informations sur la r√©gion s√©lectionn√©e    |
| SPC a e     | Ellama enhance                       | Ouvre le sous-menu d‚Äôam√©lioration de texte via Ellama           |
| SPC a e g   | Ellama improve grammar               | Corrige la grammaire du texte s√©lectionn√©                       |
| SPC a e w   | Ellama improve wording               | Am√©liore le style ou le choix des mots du texte s√©lectionn√©     |
| SPC a i     | Ellama chat                          | Lance une session de discussion avec Ellama                     |
| SPC a p     | Ellama provider select               | Change le fournisseur de mod√®le IA (Ellama)                     |
| SPC a s     | Ellama summarize region              | R√©sume le texte s√©lectionn√©                                     |
| SPC a t     | Ellama translate region              | Traduit le texte s√©lectionn√©                                    |
| SPC b       | Bookmarks / Buffers                  | Fichiers & buffers                                              |
| SPC b b     | Switch to buffer                     | Navigation entre buffers                                        |
| SPC b c     | Clone indirect buffer (split)        | Duplication de buffer                                           |
| SPC b C     | Clone indirect buffer (other window) | Duplication dans autre fen√™tre                                  |
| SPC b d     | Delete bookmark                      | Gestion de signets                                              |
| SPC b i     | Ibuffer                              | Liste des buffers                                               |
| SPC b f     | Kill current buffer                  | Fermer buffer courant                                           |
| SPC b K     | Kill some buffers                    | Fermer plusieurs buffers                                        |
| SPC b l     | List bookmarks                       | Voir les signets                                                |
| SPC b m     | Bookmark set                         | Cr√©er un signet                                                 |
| SPC b k     | Next buffer                          | Naviguer vers le suivant                                        |
| SPC b j     | Previous buffer                      | Naviguer vers le pr√©c√©dent                                      |
| SPC b r     | Revert buffer                        | Recharger le buffer                                             |
| SPC b R     | Rename buffer                        | Renommer un buffer                                              |
| SPC b s     | Save buffer                          | Sauvegarder le buffer                                           |
| SPC b S     | Save some buffers                    | Sauvegarder plusieurs buffers                                   |
| SPC b w     | Bookmark save                        | Sauver les signets                                              |
| SPC d       | Dired                                | Gestion de fichiers                                             |
| SPC d d     | Open Dired                           | Ouvrir explorateur de fichiers                                  |
| SPC d f     | Finish wdired edit                   | Finir √©dition dans Dired                                        |
| SPC d j     | Dired jump                           | Aller √† dossier du buffer                                       |
| SPC d n     | Neotree dir                          | Ouvrir dans Neotree                                             |
| SPC d p     | Peep Dired                           | Aper√ßu des fichiers                                             |
| SPC d w     | Writable Dired                       | Mode √©dition Dired                                              |
| SPC e       | Ediff / Eshell / Eval / EWW          | √âvaluation & shell                                              |
| SPC e b     | Eval buffer                          | √âvaluer tout le buffer                                          |
| SPC e d     | Eval defun                           | √âvaluer la fonction actuelle                                    |
| SPC e e     | Eval expression                      | √âvaluer une expression                                          |
| SPC e f     | Ediff files                          | Comparer deux fichiers                                          |
| SPC e F     | Ediff files3                         | Comparer trois fichiers                                         |
| SPC e h     | Eshell history                       | Historique Eshell                                               |
| SPC e l     | Eval last sexp                       | √âvaluer derni√®re expression                                     |
| SPC e n     | Eshell new                           | Nouveau terminal Eshell                                         |
| SPC e r     | Eval region                          | √âvaluer une r√©gion                                              |
| SPC e R     | EWW reload                           | Recharger la page web                                           |
| SPC e s     | Eshell                               | Ouvrir un terminal                                              |
| SPC e w     | EWW browser                          | Navigateur Web interne                                          |
| SPC f       | Files                                | Gestion de fichiers                                             |
| SPC f c     | Open config_kas.org                   | Fichier de configuration                                        |
| SPC f e     | Open ~/.emacs.d in Dired             | Ouvrir r√©pertoire Emacs                                         |
| SPC f d     | Find-grep Dired                      | Rechercher texte dans dossier                                   |
| SPC f g     | Counsel grep/swiper                  | Recherche dans le fichier                                       |
| SPC f i     | Open init.el                         | Fichier principal de config                                     |
| SPC f j     | File jump                            | Aller √† un fichier                                              |
| SPC f l     | Locate file                          | Trouver un fichier                                              |
| SPC f r     | Counsel recentf                      | Fichiers r√©cents                                                |
| SPC f u     | Sudo find file                       | Ouvrir fichier en root                                          |
| SPC f U     | Sudo edit file                       | √âditer fichier en root                                          |
| SPC g       | Git                                  | Gestion de version Git                                          |
| SPC g /     | Magit dispatch                       | Menu Git principal                                              |
| SPC g .     | Magit file dispatch                  | Commandes Git fichier                                           |
| SPC g b     | Switch branch                        | Changer de branche                                              |
| SPC g c     | Create submenu                       | Cr√©ation Git                                                    |
| SPC g c b   | Branch and checkout                  | Cr√©er et basculer branche                                       |
| SPC g c c   | Commit create                        | Cr√©er un commit                                                 |
| SPC g c f   | Commit fixup                         | Fixup commit                                                    |
| SPC g C     | Magit clone                          | Cloner un d√©p√¥t                                                 |
| SPC g f     | Find submenu                         | Recherche Git                                                   |
| SPC g f c   | Show commit                          | Voir un commit                                                  |
| SPC g f f   | Magit find file                      | Trouver fichier Git                                             |
| SPC g f g   | Find gitconfig file                  | Fichier de configuration Git                                    |
| SPC g F     | Git fetch                            | R√©cup√©rer modifications                                         |
| SPC g g     | Magit status                         | √âtat du d√©p√¥t                                                   |
| SPC g i     | Magit init                           | Initialiser d√©p√¥t Git                                           |
| SPC g l     | Log buffer file                      | Historique Git du fichier                                       |
| SPC g r     | VC revert                            | Revenir √† version pr√©c√©dente                                    |
| SPC g s     | Stage file                           | Ajouter fichier (stage)                                         |
| SPC g t     | Git timemachine                      | Explorer historique Git                                         |
| SPC g u     | Unstage file                         | Retirer du stage                                                |
| SPC h       | Help                                 | Aide                                                            |
| SPC h a     | Counsel apropos                      | Rechercher commandes                                            |
| SPC h b     | Describe bindings                    | Voir raccourcis clavier                                         |
| SPC h c     | Describe char                        | Infos sur caract√®re                                             |
| SPC h d     | Documentation                        | Documentation Emacs                                             |
| SPC h d a   | About Emacs                          | √Ä propos d‚ÄôEmacs                                                |
| SPC h d d   | View debugging                       | D√©bogage                                                        |
| SPC h d f   | View FAQ                             | Aide                                                            |
| SPC h d m   | Manual                               | Manuel officiel                                                 |
| SPC h d n   | News                                 | Nouveaut√©s Emacs                                                |
| SPC h d o   | Distribution info                    | Comment obtenir Emacs                                           |
| SPC h d p   | Problems                             | Probl√®mes connus                                                |
| SPC h d t   | Todo list                            | Liste de t√¢ches internes                                        |
| SPC h d w   | No warranty                          | Clause de non-garantie                                          |
| SPC h e     | Echo messages                        | Voir messages d‚Äô√©cho                                            |
| SPC h f     | Describe function                    | D√©crire une fonction                                            |
| SPC h F     | Describe face                        | D√©crire un th√®me/fonte                                          |
| SPC h g     | Describe GNU project                 | Infos sur GNU                                                   |
| SPC h i     | Info browser                         | Navigateur d‚Äôaide                                               |
| SPC h I     | Describe input method                | M√©thode d‚Äôentr√©e                                                |
| SPC h k     | Describe key                         | Voir quelle commande est li√©e                                   |
| SPC h l     | View lossage                         | Historique de frappes                                           |
| SPC h L     | Describe language env                | Environnement linguistique                                      |
| SPC h m     | Describe mode                        | Infos sur le mode actuel                                        |
| SPC h r r   | Reload config                        | Recharger la config Emacs                                       |
| SPC h t     | Load theme                           | Changer le th√®me                                                |
| SPC h v     | Describe variable                    | Variable d‚ÄôEmacs                                                |
| SPC h w     | Where is                             | Trouver raccourci                                               |
| SPC h x     | Describe command                     | Documentation commande                                          |
| SPC m       | Org mode                             | Organisation / notes                                            |
| SPC m a     | Org agenda                           | Vue des t√¢ches                                                  |
| SPC m e     | Org export dispatch                  | Exportation                                                     |
| SPC m i     | Org toggle item                      | Liste / checkbox                                                |
| SPC m t     | Org todo                             | Gestion de t√¢ches                                               |
| SPC m B     | Org babel tangle                     | Extraire code Org                                               |
| SPC m T     | Org todo list                        | Liste de t√¢ches                                                 |
| SPC m l     | Org store link                       | Enregistrer un lien Org                                         |
| SPC m C     | Org capture                          | Capturer une note                                               |
| SPC m c b   | Capture bookmark                     | Signet rapide                                                   |
| SPC m c p   | Capture project                      | Note projet                                                     |
| SPC m c w   | Capture work                         | Note travail                                                    |
| SPC m c s   | Capture study                        | Note √©tude                                                      |
| SPC m c j   | Capture journal                      | Entr√©e journal                                                  |
| SPC m b -   | Insert hline                         | Ligne dans tableau                                              |
| SPC m b r   | Insert row                           | Ligne tableau                                                   |
| SPC m b c   | Insert column                        | Colonne tableau                                                 |
| SPC m b e   | Edit field                           | √âditer cellule                                                  |
| SPC m b a   | Align table                          | Aligner colonnes                                                |
| SPC m b s   | Sort table                           | Trier tableau                                                   |
| SPC m d t   | Insert timestamp                     | Ins√©rer date                                                    |
| SPC m d i   | Insert inactive timestamp            | Date non active                                                 |
| SPC m d d   | Set deadline                         | Fixer une √©ch√©ance                                              |
| SPC m d s   | Set schedule                         | Planifier t√¢che                                                 |
| SPC m d r   | Clock report                         | Rapport de temps                                                |
| SPC m d n   | Timestamp -1 day                     | Retirer un jour                                                 |
| SPC m d p   | Timestamp +1 day                     | Ajouter un jour                                                 |
| SPC o d     | Dashboard                            | √âcran d‚Äôaccueil                                                 |
| SPC o e     | Elfeed RSS                           | Lecteur de flux RSS                                             |
| SPC o f     | Open buffer in frame                 | Ouvrir dans une autre fen√™tre                                   |
| SPC o F     | Select frame by name                 | S√©lection de fen√™tre                                            |
| SPC p       | Projectile command map               | Projets                                                         |
| SPC r p     | Radio play                           | D√©marrer la radio                                               |
| SPC r s     | Radio stop                           | Arr√™ter la radio                                                |
| SPC r t     | Radio toggle                         | Basculer radio on/off                                           |
| SPC s d     | Dictionary search                    | Recherche mot                                                   |
| SPC s m     | Man pages                            | Documentation Unix                                              |
| SPC s o     | PDF occur                            | Recherche dans PDF                                              |
| SPC s t     | TLDR docs                            | R√©sum√© commandes shell                                          |
| SPC s w     | Woman                                | Documentation interne                                           |
| SPC t e     | Eshell toggle                        | Terminal int√©gr√©                                                |
| SPC t f     | Flycheck mode                        | V√©rification syntaxique                                         |
| SPC t l     | Display line numbers                 | Num√©ros de ligne                                                |
| SPC t n     | Neotree toggle                       | Arborescence fichiers                                           |
| SPC t o     | Org mode toggle                      | Activer Org-mode                                                |
| SPC t r     | Rainbow mode                         | Couleurs dans le code                                           |
| SPC t t     | Visual line mode                     | Casser lignes visuellement                                      |
| SPC t v     | Vterm toggle                         | Terminal Vterm                                                  |
| SPC w f     | Evil window delete                   | Fermer fen√™tre                                                  |
| SPC w n     | Evil window new                      | Nouvelle fen√™tre                                                |
| SPC w -     | Horizontal split                     | S√©paration horizontale                                          |
| SPC w v     | Vertical split                       | S√©paration verticale                                            |
| SPC w h     | Window left                          | Aller √† gauche                                                  |
| SPC w j     | Window down                          | Aller en bas                                                    |
| SPC w k     | Window up                            | Aller en haut                                                   |
| SPC w l     | Window right                         | Aller √† droite                                                  |
| SPC w w     | Window next                          | Fen√™tre suivante                                                |
| SPC w H     | Buffer move left                     | D√©placer √† gauche                                               |
| SPC w J     | Buffer move down                     | D√©placer en bas                                                 |
| SPC w K     | Buffer move up                       | D√©placer en haut                                                |
| SPC w L     | Buffer move right                    | D√©placer √† droite                                               |
| SPC w d     | Downcase word                        | Minuscule mot                                                   |
| SPC w u     | Upcase word                          | Majuscule mot                                                   |
| SPC w =     | Count words                          | Compter mots/lignes                                             |

* Clique
** Activer la synchronisation entre emacs, evil et le presse-papiers syst√®me
*** Mode terminal
#+begin_src emacs-lisp
;; Clipboard pour Emacs en mode terminal sous Wayland (Ubuntu 24.04)
(unless (display-graphic-p)
  ;; Copier vers le presse-papier syst√®me
  (setq interprogram-cut-function
        (lambda (text &optional push)
          (when (executable-find "wl-copy")
            (let ((process-connection-type nil))
              (let ((proc (start-process "wl-copy" nil "wl-copy" "-f")))
                (process-send-string proc text)
                (process-send-eof proc))))))

  ;; Coller depuis le presse-papier syst√®me
  (setq interprogram-paste-function
        (lambda ()
          (when (executable-find "wl-paste")
            (string-trim
             (shell-command-to-string "wl-paste"))))))
#+end_src

#+RESULTS:
| lambda | nil | (when (executable-find wl-paste) (string-trim (shell-command-to-string wl-paste))) |

*** Mode graphique
#+begin_src emacs-lisp
;; Menu contextuel sur clic droit
(require 'easymenu)
(defvar my-context-menu
  '("Menu"
    ["Cut" kill-region t]
    ["Copy" kill-ring-save t]
    ["Paste" yank t]))
(define-key global-map [mouse-3] (lambda (event)
                                   (interactive "e")
                                   (popup-menu my-context-menu event)))
#+end_src

#+RESULTS:
| lambda | (event) | (interactive e) | (popup-menu my-context-menu event) |

#+begin_src emacs-lisp          
(setq select-enable-clipboard t)
(setq select-enable-primary t)  
#+end_src

#+RESULTS:
: t

* Desactiver l'√©cran d'accueil d'emacs
#+begin_src emacs-lisp
(setq inhibit-startup-screen t)   ;; d√©sactive la page d‚Äôaccueil
(setq inhibit-startup-message t)  ;; d√©sactive le message de d√©marrage
(setq initial-scratch-message "") ;; vide le buffer *scratch*
#+end_src

#+RESULTS:

* Abbreviation dans org mode
| code | correspondance                      |
|------+-------------------------------------|
| ≈ìt   | #+TBLFM:                            |
| ≈ìn   | #+name:                             |
| ≈ì    | <                                   |
| ≈ìfh  | fusion horizontale de deux tableaux |
|      |                                     |
#+BEGIN_SRC emacs-lisp
;; Activer abbrev dans tous les buffers Org
(add-hook 'org-mode-hook #'abbrev-mode)

;; Abbrev pour Org Mode
;; Ins√®re une ligne TBLFM
(define-abbrev org-mode-abbrev-table "≈ìt" "#+TBLFM:")

;; Ins√®re un nom pour un tableau ou un bloc
(define-abbrev org-mode-abbrev-table "≈ìn" "#+name:")

;; Correction automatique du caract√®re ≈ì ‚Üí <
(define-abbrev org-mode-abbrev-table "≈ì" "<")

;; Abbrev pour ins√©rer ton bloc Emacs Lisp
(define-abbrev org-mode-abbrev-table
  "≈ìfh"
  "#+BEGIN_SRC emacs-lisp :var ta=nom_tab1 :var tb=nom_tab2 :colnames no
(cl-mapcar #'append ta tb)
#+END_SRC")
#+END_SRC

#+RESULTS:
: ≈ìfh

* Exporter en excel
** Configuration
*** config
#+begin_src emacs-lisp
(defun org-current-table-to-xlsx-using-name ()
  "Export the Org table at point to an .xlsx file using its #+NAME: property,
and save it automatically into ~/EXCEL_TABLE_ORG/."
  (interactive)

  (save-excursion
    ;; V√©rifier qu'on est sur un tableau
    (unless (org-at-table-p)
      (error "Le curseur n'est pas sur un tableau Org"))

    ;; Aller au d√©but du tableau
    (goto-char (org-table-begin))

    ;; R√©cup√©ration du #+NAME:
    (let* ((name
            (save-excursion
              (or
               ;; 1. V√©rifier juste la ligne au-dessus
               (when (progn
                       (forward-line -1)
                       (looking-at "^[ \t]*#\\+NAME:[ \t]*\\(.*\\)$"))
                 (match-string-no-properties 1))

               ;; 2. Sinon, chercher en arri√®re dans le fichier
               (when (re-search-backward "^[ \t]*#\\+NAME:[ \t]*\\(.*\\)$" nil t)
                 (match-string-no-properties 1))))))

      (unless name
        (error "Aucun #+NAME: trouv√© pour ce tableau"))

      ;; R√©pertoire de sortie
      (let* ((output-dir (expand-file-name "~/EXCEL_TABLE_ORG/")))
        ;; Cr√©ation du dossier si n√©cessaire
        (unless (file-directory-p output-dir)
          (make-directory output-dir t))

        ;; Nom de fichier s√ªr
        (let* ((safe-name (replace-regexp-in-string "[^[:alnum:]-]+" "" name))
               (outfile (expand-file-name (concat safe-name ".xlsx") output-dir))
               (beg (org-table-begin))
               (end (org-table-end))
               (content (buffer-substring-no-properties beg end))
               (tmpfile (make-temp-file "org-table-" nil ".org")))

          ;; √âcrire la table dans un fichier temporaire
          (with-temp-file tmpfile
            (insert content))

          ;; Conversion vers XLSX via Pandoc
          (shell-command
           (format "pandoc %s -o %s"
                   (shell-quote-argument tmpfile)
                   (shell-quote-argument outfile)))

          (message "Tableau export√© dans : %s" outfile))))))
#+end_src

#+RESULTS:
: org-current-table-to-xlsx-using-name

*** Chemin du dossier
~/EXCEL_TABLE_ORG/

*** Raccourci d'exportation
#+begin_src emacs-lisp
(with-eval-after-load 'org
  (define-key org-mode-map (kbd "C-c e x")
    #'org-current-table-to-xlsx-using-name))
#+end_src

#+RESULTS:
: org-current-table-to-xlsx-using-name

*** V√©rification
Dans le bash
+ file nom_fichier.xlsx
+ c'est bon si la sortie est nom_fichier.xlsx: Microsoft Excel 2007+

* Neotree
** sheet
| Touche          | Action                                 |
|-----------------+----------------------------------------|
| F8              | Ouvrir / Fermer NeoTree                |
| n ou k / p ou j | D√©placer le curseur vers le haut / bas |
| TAB             | D√©plier / refermer un dossier          |
| RET             | Ouvrir le fichier                      |
| q               | Fermer NeoTree                         |
| r               | Rafra√Æchir l‚Äôarbre                     |
| d               | Supprimer fichier                      |
| c               | Cr√©er fichier/dossier                  |
|-----------------+----------------------------------------|

** config

git clone https://github.com/jaypei/emacs-neotree.git neotree

#+begin_src emacs-lisp
;; Ajouter NeoTree clon√© localement
(add-to-list 'load-path "/home/kassim/.emacs.d/neotree")
(require 'neotree)

;; Activer NeoTree avec F8
(global-set-key [f8] 'neotree-toggle)

;; Config Evil pour NeoTree
(with-eval-after-load 'neotree
  (evil-define-key 'normal neotree-mode-map
    (kbd "n") 'neotree-next-line
    (kbd "p") 'neotree-previous-line
    (kbd "TAB") 'neotree-enter
    (kbd "RET") 'neotree-enter
    (kbd "q") 'neotree-hide
    (kbd "r") 'neotree-refresh
    (kbd "d") 'neotree-delete-node
    (kbd "c") 'neotree-create-node))
#+end_src

#+RESULTS:

* Taille du frame
#+begin_src emacs-lisp
(setq initial-frame-alist
      `((width . 100)
        (height . 40)
        (top . 50)
        (left . 50)))

(setq default-frame-alist initial-frame-alist)
#+end_src

#+RESULTS:
: ((width . 100) (height . 40) (top . 50) (left . 50))

* Cheat sheet Git
** Structure du dossier local
*** Working directory
**** Dossier suivi par git (tracked)
+ unmodified : les fichiers non modifi√©s par rapport au dernier commit.
+ modified : les fichiers modifi√©s par rapport au dernier commit.
**** Dossier non suivi
+ untracked : les fichiers n'ayant jamais subi git add.
*** Stage
Lieu o√π les fichiers sont captur√©s/copi√©s.
**** Envoyer les fichiers ou dossier dans le stage
***** Envoyer un dossier ou fichier sp√©cifique
+ git add nom__fichier ou git add nom__dossier/
+ git add -f nom__dossier/                     # Forcer git √† envoyer le dossier sans rien enlever
+ git add -f nom__dossier/nom__fichier          # Forcer git √† ajouter nom__fichier dans nom__dossier
***** Envoyer tous les suivis
+ git add .
**** Retirer un fichier ou un dossier du stage
+ git restore --staged nom__fichier ou git restore --staged nom__dossier 
*** Repository
Lieu o√π les captures sont enregistr√©es.
**** Enregistrer un commit
+ git commit -m"commentaire √† faire"
**** Annuler un commit
+ git reset --soft HEAD~1   # uniquement le commit
+ git reset --mixed HEAD~1  # uniquement le commit et le staged
** Structure du depot distant
*** Repository distant
Lieu o√π les fichiers sont enregistr√©s sur le net.
**** Envoyer un commit vers le repository distant
+ git push : lorsque les commits du le depot local est en'avance sur le depot distant 
** Mise √† jour du depot local
+ git pull : lorsque les commits du le depot distant est en'avance sur le depot local. 
  Le pull peut se decomposer en deux:
  + git fetch # pour charger les mises √† jour
  + git merge # pour installer : Le merge affecte le staging, le tracked et le repository.
** Les branches
*** Cr√©er une branche
+ git branch nom__branche
*** Aller sur une branche
+ git checkout nom__branche
*** Cr√©er et aller sur une branche
+ git checkout -b nom__branche
*** Lister les branches
+ git branch     # affecte le ripo local
*** Supprimer une branche
+ git branch -d nom__branche # affecte le ripo local
*** Mettre √† jour une branche
**** Avec le merge : cree un commit commun au deux branches
+ aller sur la branche √† mettre √† jour car HEAD suit le sens du 1er parent.
+ git merge
**** Avec rebase : transf√®re tous les commits de la branche courant vers l'autre
+ aller sur la branche qui enverrais les commits
+ git rebase
*** Envoyer les fichiers vers le depot distant √† travers une branche tierce
+ git push origin nom__branche__tierce

**  Etat des fichiers
*** git status
+ montre l'√©tat des fichiers tracked et untracked
+ montre les conflis s'il existe
*** git diff
compare le fichier modifi√© au dernier staged
*** git --staged
compare le dernier staged et le dernier commit
*** git diff HEAD
compare le fichier modifi√© au dernier commit
** Les conflits
*** Les zones dans git
Supposons que nous avons un fichier ancetre dont les lignes sont
contitu√©es de A,B,C et D et lig une ligne ins√©r√©e.
+ si lig est avant A, alors la zone est "zone avant A"
+ si lig est entre A et B, alors la zone est "zone entre A et B"
+ si lig est apr√®s D, alors la zone est "zone apr√®s D"
+ si B est modifi√©es, git considere que la ligne B a √©t√© supprim√©e donc la "zone B" et
  la nouvelle ligne est dans la zone "zone entre A et C"
*** R√®gle de conflits
Il y'a conflit lorsqu'une m√™me zone est modifi√©e.
*** Conflits dans le depot local
Ce conflit se produit lors un merge ou un rebase ou un pull.
**** Resolution
***** Annuler le merge ou le rebase
+ git merge --abort  # pour le merge
+ git rebase --abort # pour le rebase
***** Corriger le fichier
+ Ouvre le fichier et corrige
+ git commit               # pour un merge
+ git rebase --continue    # pour un rebase  
*** Conflits dans le depot distant
Les branches divergent
**** Resolution
***** Avec un rebase
+ git pull --rebase
+ git push
***** Avec un merge
+ git pull --no-rebase
+ git push
***** Jeter le code de la branche
+ git checkout -b newbranche
+ git checkout newbranche
+ git reset --hard origin/main
***** Initialiser le depot distant
+ git push --force
** Costaumiser git
Les couleurs sont √† mettre en hexadecimales
# Untracked files ‚Üí noir sur jaune
git config --global color.status.untracked "black yellow"

# Modified ‚Üí jaune sur noir
git config --global color.status.changed "yellow black"

# Added (staged) ‚Üí vert vif
git config --global color.status.added "brightgreen"

# Deleted ‚Üí rouge vif
git config --global color.status.deleted "brightred"

# Branch name (in status output)
git config --global color.branch.current "yellow bold"

* IDE pour programmation
#+PROPERTY: header-args:python :session my_session :exports both

| √âl√©ment            | Effet                                     |
|--------------------+-------------------------------------------|
| #+PROPERTY:        | D√©finit une propri√©t√© globale du document |
| header-args        | S‚Äôapplique √† TOUS les blocs `#+begin_src`  |
| header-args:python | S‚Äôapplique uniquement aux blocs Python    |
| :session my_session | Les blocs partagent la m√™me session       |
|                    | (variables persistantes)                  |
| :exports both      | Code + r√©sultats inclus √† l‚Äôexport        |
| :exports code      | Seulement le code √† l‚Äôexport              |
| :exports results   | Seulement les r√©sultats √† l‚Äôexport        |
| :exports none      | Rien n‚Äôest export√©                        |

+ #+PROPERTY: header-args :session my_session :exports both        # # accepte tous les langages


| :results                          | Ce que Org r√©cup√®re                   | Exemple Python                | R√©sultat Org                    |
|-----------------------------------+---------------------------------------+-------------------------------+---------------------------------|
| output                            | Texte affich√© (stdout)                | print("Hi")                   | Hi                              |
| value                             | Valeur retourn√©e                      | 2 + 2                         | 4                               |
| file                              | Nom de fichier g√©n√©r√©                 | ["data.csv"]                  | [[file:data.csv]]                   |
| table                             | Tableau Org (liste de listes)         | [[1,2],[3,4]]                 |                                 |
| table replace                     | Tableau Org, remplace ancien r√©sultat | [[1,2],[3,4]] ‚Üí [[5,6],[7,8]] |                                 |
| graphics file :file /tmp/plot.png | Image g√©n√©r√©e dans un fichier         | matplotlib plot               | [[file:/tmp/plot.png]]              |
| raw                               | Ins√®re le r√©sultat tel quel           | "<b>Hi</b>"                   | <b>Hi</b>                       |
| silent                            | Rien n‚Äôest ins√©r√©                     | print("Hi")                   | (rien)                          |
| drawer                            | R√©sultat dans un drawer               | 2 + 2                         | :RESULTS:\n4\n:END:             |
| replace                           | Remplace l‚Äôancien r√©sultat            | print("Hi")                   | Hi (remplace l‚Äôancien r√©sultat) |
| append                            | Ajoute apr√®s l‚Äôancien r√©sultat        | print("Hi")                   | Ancien r√©sultat\nHi             |
| prepend                           | Ajoute avant l‚Äôancien r√©sultat        | print("Hi")                   | Hi\nAncien r√©sultat             |
| list                              | Force une liste                       | [1,2,3]                       | - 1\n- 2\n- 3                   |
| scalar                            | Valeur simple                         | 42                            | 42                              |

+ #+BEGIN__SRC python :results graphics file replace :file chemin/nom__image.png

| Ligne                   | Port√©e / effet                                    |
|-------------------------+---------------------------------------------------|
| #+HEADER:               | locale ‚Üí seulement le bloc suivant                |
| #+PROPERTY: header-args | globale ‚Üí tous les blocs du langage ou du fichier |

#+HEADER: <option1> <valeur1> <option2> <valeur2> ...
#+BEGIN_SRC <langage>
...
#+END_SRC

| Option                     | R√¥le / Explication                                    | Exemple Python                                       | R√©sultat Org                        |
|----------------------------+------------------------------------------------------+----------------------------------------------------+------------------------------------|
| :var <nom>=<val>           | Passe une variable dans le bloc source              | :var dirs=["src","tests"]                           | dirs disponible dans le bloc       |
| :results <type>            | D√©finit le type de r√©sultat (value, output, table, file, graphics) | :results output                                    | texte affich√© par print()          |
| :session <nom>             | Sp√©cifie la session partag√©e (persistante)          | :session my_session                                 | variables persistantes entre blocs |
| :exports <mode>            | Ce qui sera export√© : code, results, both          | :exports both                                      | export code + r√©sultat             |
| :file <chemin>             | Sp√©cifie un fichier de sortie                       | :file /tmp/plot.png                                | lien vers le fichier [[file:/tmp/plot.png]] |
| :results table             | Force un tableau Org                                 | [[1,2],[3,4]]                                      | |1|2|\n|3|4|                        |
| :results table replace     | Tableau Org, remplace l‚Äôancien r√©sultat             | [[5,6],[7,8]]                                      | |5|6|\n|7|8|                        |
| :results graphics file :file <chemin> | G√©n√®re un graphique / image dans un fichier | matplotlib plot :file /tmp/plot.png               | [[file:/tmp/plot.png]]             |
| :results raw               | Ins√®re le r√©sultat tel quel                          | "<b>Hi</b>"                                        | <b>Hi</b>                          |
| :results silent            | N‚Äôins√®re rien                                        | print("Hi")                                        | (rien)                             |
| :results drawer            | Met le r√©sultat dans un drawer                       | 2 + 2                                              | :RESULTS:\n4\n:END:                |
| :results append            | Ajoute apr√®s l‚Äôancien r√©sultat                        | print("Hi")                                        | Ancien r√©sultat\nHi                 |
| :results prepend           | Ajoute avant l‚Äôancien r√©sultat                        | print("Hi")                                        | Hi\nAncien r√©sultat                 |
| :results list              | Force une liste                                     | [1,2,3]                                           | - 1\n- 2\n- 3                       |
| :results scalar            | Valeur simple                                       | 42                                                | 42                                  |


** 1. Chargement des librairies

#+BEGIN_SRC python :results output
import matplotlib
matplotlib.use('Agg')  # Backend non interactif (n√©cessaire pour l'export PNG)

import matplotlib.pyplot as plt
import pandas as pd
import numpy as np

print("Librairies charg√©es.")
#+END_SRC

#+RESULTS:
: Librairies charg√©es.

** 2. Cr√©ation du DataFrame

#+BEGIN_SRC python :results output
df = pd.DataFrame({
    "Nom": ["Alice", "Bob", "Claire"],
    "√Çge": [25, 30, 27],
    "Score": np.random.rand(3)
})
print(df)
#+END_SRC

#+RESULTS:
:       Nom  √Çge     Score
: 0   Alice   25  0.507505
: 1     Bob   30  0.578912
: 2  Claire   27  0.704731

** 3. Analyse statistique

#+BEGIN_SRC python :results output
print("√Çge moyen :", df["√Çge"].mean())
print("Score moyen :", df["Score"].mean())
#+END_SRC

#+RESULTS:
: √Çge moyen : 27.333333333333332
: Score moyen : 0.5970496563702467

** 4. G√©n√©ration du graphique

#+BEGIN_SRC python :results file
plt.figure(figsize=(5,3))
plt.bar(df["Nom"], df["Score"], color='skyblue')
plt.title("Scores par personne")
plt.ylabel("Score")

filename = "graph.png"
plt.savefig(filename)
filename  # Org-mode affichera l'image automatiquement
#+END_SRC

#+RESULTS:
[[file:graph.png]]

# #####################################################################

** Cr√©ation d'une liste de carr√©s
#+NAME: dire
#+BEGIN_SRC python :results value
# Renvoie une liste de carr√©s de 0 √† 9
squares = [x**2 for x in range(10)]
squares
#+END_SRC

#+RESULTS: dire
| 0 | 1 | 4 | 9 | 16 | 25 | 36 | 49 | 64 | 81 |

#+RESULTS:
| 0 | 1 | 4 | 9 | 16 | 25 | 36 | 49 | 64 | 81 |

** Moyenne d'une colonne dans un DataFrame

#+BEGIN_SRC python :results value
import pandas as pd
df = pd.DataFrame({
    "Nom": ["Alice", "Bob", "Claire"],
    "√Çge": [25, 30, 27],
    "Score": [88, 92, 79]
})
df["Score"].mean()  # Retourne une seule valeur
#+END_SRC

#+RESULTS:
: 86.33333333333333

** Retourner un DataFrame entier

#+BEGIN_SRC python :results value
df  # Affiche le DataFrame complet comme valeur
#+END_SRC

#+RESULTS:
:       Nom  √Çge  Score
: 0   Alice   25     88
: 1     Bob   30     92
: 2  Claire   27     79

| Nom    | √Çge | Score |
|--------+-----+-------|
| Alice  |  25 |    88 |
| Bob    |  30 |    92 |
| Claire |  27 |    79 |
|        |     |       |
|        |     |       |

#+BEGIN_SRC python :results graphics file :file plot.png
import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(0, 10, 100)
y = np.sin(x)

plt.plot(x, y)
plt.savefig("plot.png")  # obligatoire pour matplotlib
plt.close()
#+END_SRC

#+RESULTS:
[[file:plot.png]]


#+HEADER: :var dirs=dire() :exports both
#+BEGIN_SRC python :results output
for d in dirs:
    print(d, end=' ')
#+END_SRC

#+RESULTS:
: 0 1 4 9 16 25 36 49 64 81
* Cheat sheet: buffer fen√™tre bookmarks
** Fen√™tres
| Commande | Action                             | Description                                          |
|----------+------------------------------------+------------------------------------------------------|
| C-x 1    | Supprimer les autres fen√™tres      | Garde la fen√™tre courante et ferme toutes les autres |
| C-x 0    | Supprimer cette fen√™tre            | Ferme la fen√™tre courante                            |
| C-x 2    | Diviser la fen√™tre horizontalement | Coupe la fen√™tre en deux (haut / bas)                |
| C-x 3    | Diviser la fen√™tre verticalement   | Coupe la fen√™tre en deux (gauche / droite)           |
| C-c n    | Aller √† la fen√™tre num√©ro n        | Active la fen√™tre num√©rot√©e n (ex: C-c 2)            |
** Buffers ou tampons
| Commande | Action                        | Description                                                 |
|----------+-------------------------------+-------------------------------------------------------------|
| C-x b    | Changer de tampon             | Bascule vers un autre tampon existant ou en cr√©e un nouveau |
| C-x C-b  | Lister les tampons            | Affiche la liste de tous les tampons ouverts (*Buffer List*)  |
| C-x k    | Supprimer un tampon           | Ferme le tampon courant ou un tampon sp√©cifi√©               |
| C-x C-s  | Sauvegarder                   | Enregistre le tampon courant dans son fichier               |
| C-x C-w  | Sauvegarder sous un autre nom | √âcrit le tampon courant dans un nouveau fichier             |
** Bookmarks
| Commande            | Action                | Description                                        |
|---------------------+-----------------------+----------------------------------------------------|
| C-c c               | Cr√©er un bookmark     | Ajoute un signet √† la position courante            |
| C-c a               | Aller √† un bookmark   | Saute vers un signet existant                      |
| C-c b               | Lister les bookmarks  | Affiche la liste des signets                       |
| M-x bookmark-delete | Supprimer un bookmark | Supprime un signet                                 |
| espace b w          | mode normal           | Sauvegarder les bookmarks dans le fichier bookmark |
+ Les bookmarks sont sauvegard√©s entre les sessions
*** Personnalisation
#+BEGIN_SRC emacs-lisp
  ;; Cr√©er un bookmark avec C-c c
  (global-set-key (kbd "C-c c") 'bookmark-set)

  ;; Aller √† un bookmark avec C-c a
  (global-set-key (kbd "C-c a") 'bookmark-jump)

  ;; Lister tous les bookmarks avec C-c b
  (global-set-key (kbd "C-c b") 'bookmark-bmenu-list)
#+END_SRC

#+RESULTS:
: bookmark-jump

** Marks pour vim
| Commande | Action               | Description                          |
|----------+----------------------+--------------------------------------|
| m{a-z}   | Cr√©er un bookmark    | Marque la position courante (ex: ma) |
| '{a-z}   | Aller √† un bookmark  | Va √† la ligne du marqueur            |
| `{a-z}   | Aller exact          | Va √† la ligne et colonne du marqueur |
| :marks   | Lister les bookmarks | Affiche tous les marqueurs           |
+ Les marques sont perdues √† la fermeture (par d√©faut)                                          
* Verification des commandes
| Commande | Action        | Description                                               |
|----------+---------------+-----------------------------------------------------------|
| C-h k    | describe-key  | Affiche la commande associ√©e √† une touche sp√©cifique      |
| C-h m    | describe-mode | Affiche les raccourcis et fonctionnalit√©s du mode courant |
